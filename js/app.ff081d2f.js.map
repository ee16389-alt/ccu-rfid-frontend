{"version":3,"file":"js/app.ff081d2f.js","mappings":"mEAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAAEJ,EAAa,UAAEE,EAAG,MAAM,CAACG,YAAY,qBAAqBC,GAAG,CAAC,MAAQ,SAASC,GAAQP,EAAIQ,eAAgB,CAAI,IAAI,CAACN,EAAG,IAAI,CAACG,YAAY,oBAAoBH,EAAG,OAAO,CAACF,EAAIS,GAAG,YAAYT,EAAIU,KAAKR,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,SAAS,QAAUJ,EAAIQ,cAAc,UAAY,MAAM,KAAO,QAAQ,eAAe,gBAAgBF,GAAG,CAAC,iBAAiB,SAASC,GAAQP,EAAIQ,cAAcD,CAAM,IAAI,CAACL,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,aAAa,CAACE,MAAM,CAAC,mBAAmB,SAAS,CAACJ,EAAIS,GAAG,UAAUP,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,MAAQ,GAAG,KAAO,kBAAkBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIW,WAAW,cAAc,IAAI,CAACX,EAAIS,GAAG,cAAcP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAU,MAAQ,GAAG,KAAO,oBAAoBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIW,WAAW,QAAQ,IAAI,CAACX,EAAIS,GAAG,WAAWP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,QAAQ,KAAO,OAAO,MAAQ,GAAG,KAAO,gBAAgBE,GAAG,CAAC,MAAQ,SAASC,GAAQP,EAAIY,WAAY,CAAK,IAAI,CAACZ,EAAIS,GAAG,aAAa,GAAGP,EAAG,aAAa,CAACE,MAAM,CAAC,mBAAmB,SAAS,CAACJ,EAAIS,GAAG,UAAUP,EAAG,KAAK,CAACG,YAAY,eAAe,CAACH,EAAG,KAAK,CAACF,EAAIS,GAAG,SAAST,EAAIa,GAAGb,EAAIc,gBAAgBZ,EAAG,KAAK,CAACF,EAAIS,GAAG,UAAUT,EAAIa,GAAGb,EAAIe,oBAAsB,WAAW,KAAKb,EAAG,MAAM,CAACG,YAAY,aAAa,CAAsB,gBAApBL,EAAIc,YAA+BZ,EAAG,cAAc,CAACI,GAAG,CAAC,eAAeN,EAAIgB,iBAAsC,iBAApBhB,EAAIc,YAAgCZ,EAAG,eAAe,CAACE,MAAM,CAAC,KAAOJ,EAAIiB,cAAcX,GAAG,CAAC,kBAAkBN,EAAIkB,iBAAiB,UAAU,SAASX,GAAQP,EAAIc,YAAc,aAAa,KAA0B,cAApBd,EAAIc,YAA6BZ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAOJ,EAAIiB,aAAa,WAAajB,EAAIe,oBAAoBT,GAAG,CAAC,UAAU,SAASC,GAAQP,EAAIc,YAAc,cAAc,KAA0B,UAApBd,EAAIc,YAAyBZ,EAAG,QAAQ,CAACI,GAAG,CAAC,gBAAgB,SAASC,GAAQP,EAAIc,YAAc,cAAc,KAA0B,iBAApBd,EAAIc,YAAgCZ,EAAG,eAAe,CAACI,GAAG,CAAC,kBAAkBN,EAAImB,iBAAiB,eAAenB,EAAIoB,iBAAsC,mBAApBpB,EAAIc,YAAkCZ,EAAG,iBAAiB,CAACE,MAAM,CAAC,iBAAmBJ,EAAIqB,sBAAsBf,GAAG,CAAC,UAAU,SAASC,GAAQP,EAAIc,YAAc,cAAc,EAAE,eAAe,SAASP,GAAQP,EAAIc,YAAc,aAAa,EAAE,iBAAiB,SAASP,GAAQP,EAAIc,YAAc,eAAe,KAA0B,kBAApBd,EAAIc,YAAiCZ,EAAG,oBAAoB,CAACE,MAAM,CAAC,WAAaJ,EAAIe,oBAAoBT,GAAG,CAAC,UAAU,SAASC,GAAQP,EAAIc,YAAc,gBAAgB,KAA0B,gBAApBd,EAAIc,YAA+BZ,EAAG,cAAc,CAACE,MAAM,CAAC,WAAaJ,EAAIe,oBAAoBT,GAAG,CAAC,UAAU,SAASC,GAAQP,EAAIc,YAAc,gBAAgB,KAA0B,cAApBd,EAAIc,YAA6BZ,EAAG,YAAY,CAACI,GAAG,CAAC,aAAaN,EAAIsB,YAAY,YAAYtB,EAAIuB,cAAmC,cAApBvB,EAAIc,YAA6BZ,EAAG,YAAY,CAACE,MAAM,CAAC,QAAUJ,EAAIwB,oBAAoBlB,GAAG,CAAC,UAAU,SAASC,GAAQP,EAAIc,YAAc,WAAW,KAAKZ,EAAG,IAAI,CAACuB,YAAY,CAAC,aAAa,SAAS,aAAa,SAAS,CAACvB,EAAG,IAAI,CAACG,YAAY,oBAAoBL,EAAIS,GAAG,mBAAmB,GAAIT,EAAe,YAAEE,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,mBAAmBE,GAAG,CAAC,MAAQ,SAASC,GAAQP,EAAIc,YAAc,cAAc,IAAI,CAACd,EAAIS,GAAG,UAAUP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,sBAAsBE,GAAG,CAAC,MAAQ,SAASC,GAAQP,EAAIc,YAAc,WAAW,IAAI,CAACd,EAAIS,GAAG,UAAUP,EAAG,YAAY,CAACuB,YAAY,CAAC,MAAQ,WAAWrB,MAAM,CAAC,KAAO,QAAQE,GAAG,CAAC,MAAQN,EAAI0B,SAAS,CAAC1B,EAAIS,GAAG,WAAW,GAAGT,EAAIU,MAAM,EACplH,EACIiB,EAAkB,GCFlB,EAAS,WAAkB,IAAI3B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,qBAAqB,CAACH,EAAG,MAAM,CAACG,YAAY,YAAYH,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,KAAK,CAACG,YAAY,cAAc,CAACL,EAAIS,GAAG,WAAWP,EAAG,IAAI,CAACG,YAAY,aAAa,CAACL,EAAIS,GAAG,qBAAqBP,EAAG,MAAM,CAACG,YAAY,oBAAoBuB,MAAM,CAAE,SAAY5B,EAAI6B,UAAW,CAAC3B,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,IAAI,CAACG,YAAY,oBAAoBoB,YAAY,CAAC,YAAY,UAAWzB,EAAW,QAAEE,EAAG,MAAM,CAACG,YAAY,cAAcL,EAAIU,SAASR,EAAG,MAAM,CAACG,YAAY,WAAWH,EAAG,MAAM,CAACG,YAAY,qBAAqBH,EAAG,IAAI,CAACG,YAAY,eAAe,CAACH,EAAG,IAAI,CAAC0B,MAAM5B,EAAI6B,QAAU,kBAAoB,kBAAkB7B,EAAIS,GAAG,IAAIT,EAAIa,GAAGb,EAAI6B,QAAU,kBAAkB7B,EAAI8B,cAAgB,SAAS,OAAO5B,EAAG,YAAY,CAACG,YAAY,qBAAqBD,MAAM,CAAC,KAAO,UAAU,QAAUJ,EAAI6B,SAASvB,GAAG,CAAC,MAAQN,EAAI+B,cAAc,CAAC/B,EAAIS,GAAG,IAAIT,EAAIa,GAAGb,EAAI6B,QAAU,SAAW,QAAQ,QAAQ,GAAG7B,EAAIgC,GAAG,GAAG9B,EAAG,QAAQ,CAAC+B,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOpC,EAAc,WAAEqC,WAAW,eAAeC,IAAI,YAAYjC,YAAY,aAAaD,MAAM,CAAC,KAAO,OAAO,aAAe,OAAOmC,SAAS,CAAC,MAASvC,EAAc,YAAGM,GAAG,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOiC,KAAKC,QAAQ,QAAQzC,EAAI0C,GAAGnC,EAAOoC,QAAQ,QAAQ,GAAGpC,EAAOqC,IAAI,SAAgB,MAAKrC,EAAOsC,iBAAwB7C,EAAI8C,eAAeC,MAAM,KAAMC,WAAU,EAAE,MAAQ,SAASzC,GAAWA,EAAO0C,OAAOC,YAAiBlD,EAAImD,WAAW5C,EAAO0C,OAAOb,MAAK,MACziD,EACI,EAAkB,CAAC,WAAY,IAAIpC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,OAAO,CAACG,YAAY,QAAQL,EAAIS,GAAG,qBAAqBP,EAAG,OAAO,CAACG,YAAY,WACxO,GCiDA,GACE6B,KAAM,cACN,IAAAkB,GACE,MAAO,CACLvB,SAAS,EACTsB,WAAY,GACZE,UAAW,KACXvB,UAAW,EACXwB,eAAgB,KAEpB,EACAC,QAAS,CACP,iBAAMxB,GACJ9B,KAAK4B,SAAU,EACf5B,KAAKkD,WAAa,GAClBlD,KAAK6B,UAAY,EAGjB7B,KAAKuD,UAAU,KACTvD,KAAKwD,MAAMC,WAAWzD,KAAKwD,MAAMC,UAAUC,UAGjD1D,KAAKqD,eAAiBM,YAAY,KAC5B3D,KAAK6B,UAAY,GAAG7B,KAAK6B,aAC5B,KAGH7B,KAAKoD,UAAYQ,WAAW,KACtB5D,KAAK4B,SAAS5B,KAAK6D,iBACtB,IACL,EAEA,oBAAMhB,GACJiB,aAAa9D,KAAKoD,WAClBW,cAAc/D,KAAKqD,gBAEnB,MAAMW,EAAUhE,KAAKkD,WAAWe,OAChCjE,KAAKkD,WAAa,GAEbc,QAIChE,KAAKkE,YAAYF,GAHrBhE,KAAK6D,eAIT,EAEA,iBAAMK,CAAYF,GAChB,IAGE,MAAMG,QAAiBnE,KAAKoE,MAAMC,IAAI,SAASL,KAE/C,GAAIG,EAAShB,KAAKmB,OAASH,EAAShB,KAAKmB,MAAMC,OAAS,EAAG,CACzD,MAAMvB,EAASmB,EAAShB,KAAKmB,MAAM,GAEnCtE,KAAKwE,QAAQ,CACXC,MAAO,OACPC,QAAyB,YAAhB1B,EAAOT,KACZ,GAAGS,EAAOf,mBACV,OAAOe,EAAOf,YAClBM,KAAM,UACNoC,SAAU,aAIZf,WAAW,KACT5D,KAAK4E,MAAM,eAAgB,CACzBC,KAAMb,EACNM,MAAOtB,EACP8B,WAAYX,EAAShB,KAAK4B,WAAa,MAExC,IACL,MACE/E,KAAKgF,SAASC,QAAQ,oBACtBjF,KAAK4B,SAAU,CAEnB,CAAE,MAAOsD,GACPC,QAAQC,KAAK,qBAAsBF,GACnClF,KAAK6D,eACP,CACF,EAEA,aAAAA,GACEC,aAAa9D,KAAKoD,WAClBW,cAAc/D,KAAKqD,gBACnBrD,KAAK4B,SAAU,EAEf5B,KAAKgF,SAAS,CACZN,QAAS,uBACTnC,KAAM,YAGRqB,WAAW,KACT5D,KAAK4E,MAAM,eAAgB,CACzBC,KAAM,WACNP,MAAO,CAAE/B,KAAM,UAAWN,KAAM,MAAOoD,GAAI,QAC3CP,WAAY,MAEb,KACL,GAEF,aAAAQ,GACExB,aAAa9D,KAAKoD,WAClBW,cAAc/D,KAAKqD,eACrB,GC5JqI,I,UCQnIkC,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAeA,E,QCnBX,EAAS,WAAkB,IAAIxF,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,2BAA2B,CAACH,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAACH,EAAG,KAAK,CAACG,YAAY,cAAc,CAACL,EAAIS,GAAG,WAAYT,EAAgB,aAAEE,EAAG,SAAS,CAACG,YAAY,eAAeD,MAAM,CAAC,KAAO,UAAU,OAAS,SAAS,CAACF,EAAG,IAAI,CAACG,YAAY,iBAAiBL,EAAIS,GAAG,OAAOT,EAAIa,GAAGb,EAAIyF,cAAc,OAAOzF,EAAIU,KAAKR,EAAG,YAAY,CAACG,YAAY,cAAcD,MAAM,CAAC,KAAO,WAAWE,GAAG,CAAC,MAAQN,EAAI0F,aAAa,CAAC1F,EAAIS,GAAG,SAAS,GAAGP,EAAG,IAAI,CAACG,YAAY,eAAe,CAACL,EAAIS,GAAG,wBAAwBP,EAAG,SAAS,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAW,QAAEqC,WAAW,YAAYjC,MAAM,CAAC,OAAS,KAAKJ,EAAI2F,GAAI3F,EAAgB,aAAE,SAAS4F,GAAU,OAAO1F,EAAG,SAAS,CAAC0C,IAAIgD,EAASN,GAAGjF,YAAY,eAAeD,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,UAAU,CAACG,YAAY,gBAAgBD,MAAM,CAAC,OAAS,SAASyF,SAAS,CAAC,MAAQ,SAAStF,GAAQ,OAAOP,EAAI8F,qBAAqBF,EAAS,IAAI,CAAC1F,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,WAAW,CAACG,YAAY,iBAAiBD,MAAM,CAAC,IAAMwF,EAASG,OAAS/F,EAAIgG,kBAAkB,IAAM,UAAU,CAAC9F,EAAG,MAAM,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,SAAS6F,KAAK,SAAS,CAAC/F,EAAG,IAAI,CAACG,YAAY,gCAAgCH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,IAAI,CAACG,YAAY,iBAAiB,CAACL,EAAIS,GAAGT,EAAIa,GAAG+E,EAAS1D,SAAShC,EAAG,IAAI,CAACG,YAAY,iBAAiB,CAACH,EAAG,IAAI,CAACG,YAAY,iBAAiBL,EAAIS,GAAG,IAAIT,EAAIa,GAAG+E,EAASM,MAAM,KAAMN,EAAmB,WAAE1F,EAAG,OAAO,CAACF,EAAIS,GAAG,KAAKT,EAAIa,GAAG+E,EAASO,YAAY,QAAQnG,EAAIU,UAAU,MAAM,EAAE,GAAG,GAAKV,EAAI6B,SAAuC,IAA5B7B,EAAIoG,aAAa5B,OAAkExE,EAAIU,KAAxDR,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,iBAA0B,EAClrD,EACI,EAAkB,GCwCtB,GACE8B,KAAM,eAENmE,MAAO,CAAC,QACR,IAAAjD,GACE,MAAO,CACLvB,SAAS,EACT4D,aAAc,GACdW,aAAc,GAElB,EACA,OAAAE,GAEMrG,KAAK6E,KACP7E,KAAKsG,kBAELtG,KAAKuG,oBAET,EACAjD,QAAS,CACP,eAAAyC,GACE,MAAO,oEACT,EAEA,qBAAMO,GACJtG,KAAK4B,SAAU,EACf,IAGE,MAAMuC,QAAiBnE,KAAKoE,MAAMC,IAAI,SAASrE,KAAK6E,QAGpD,GAAIV,EAAShB,KAAKmB,OAASH,EAAShB,KAAKmB,MAAMC,OAAS,EAAG,CACzD,MAAMiC,EAAYrC,EAAShB,KAAKmB,MAAM,GACtCtE,KAAKwF,aAAegB,EAAUvE,IAChC,CAGIkC,EAAShB,KAAK4B,WAAaZ,EAAShB,KAAK4B,UAAUR,OAAS,IAC9DvE,KAAKmG,aAAehC,EAAShB,KAAK4B,UAAU0B,IAAIC,IAAQ,CACtDrB,GAAIqB,EAAKrB,GACTpD,KAAMyE,EAAKjC,MACXwB,KAAMS,EAAKC,YACXb,MAAOY,EAAKZ,MACZI,WAAYQ,EAAKE,eAGvB,CAAE,MAAO1B,GACPC,QAAQD,MAAM,YAAaA,GAC3BlF,KAAKgF,SAASE,MAAM,eACpBlF,KAAKuG,oBACP,CAAE,QACAvG,KAAK4B,SAAU,CACjB,CACF,EAEA,kBAAA2E,GACEvG,KAAKwF,aAAe,OACpBxF,KAAKmG,aAAe,CAClB,CAAEd,GAAI,IAAKpD,KAAM,OAAQgE,KAAM,aAAcC,WAAY,EAAGJ,MAAO,sEACnE,CAAET,GAAI,IAAKpD,KAAM,OAAQgE,KAAM,aAAcC,WAAY,EAAGJ,MAAO,sEAEvE,EAEA,oBAAAD,CAAqBF,GACnB3F,KAAK4E,MAAM,kBAAmB,CAC5BiC,WAAYlB,EAASN,GAErBR,KAAM7E,KAAK6E,MAEf,EAEA,UAAAY,GACEzF,KAAK4E,MAAM,UACb,ICpHoI,ICQpI,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBX,EAAS,WAAkB,IAAI7E,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,uBAAuB,CAACH,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAACH,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,KAAK,CAACG,YAAY,cAAc,CAACL,EAAIS,GAAG,WAAYT,EAAgB,aAAEE,EAAG,OAAO,CAACG,YAAY,iBAAiB,CAACH,EAAG,IAAI,CAACG,YAAY,2BAA2BL,EAAIS,GAAG,IAAIT,EAAIa,GAAGb,EAAI+G,cAAc,OAAO/G,EAAIU,OAAOR,EAAG,YAAY,CAACG,YAAY,cAAcD,MAAM,CAAC,KAAO,UAAU,KAAO,iBAAiBE,GAAG,CAAC,MAAQN,EAAI0F,aAAa,CAAC1F,EAAIS,GAAG,WAAW,GAAGP,EAAG,UAAU,CAACG,YAAY,iBAAiBD,MAAM,CAAC,OAAS,WAAW,CAACF,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAAEL,EAAIgH,UAAUxC,OAAS,EAAGtE,EAAG,MAAM,CAACG,YAAY,uBAAuBC,GAAG,CAAC,MAAQN,EAAIiH,YAAY,CAAC/G,EAAG,IAAI,CAACG,YAAY,yBAAyBL,EAAIU,KAAKR,EAAG,MAAM,CAACG,YAAY,2BAA2B,CAACH,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,aAAa,KAAO,WAAW,CAAEJ,EAAIgH,UAAUxC,OAAS,EAAGtE,EAAG,WAAW,CAAC0C,IAAI5C,EAAIkH,kBAAkB7G,YAAY,aAAaD,MAAM,CAAC,IAAMJ,EAAIgH,UAAUhH,EAAIkH,mBAAmBC,IAAI,IAAM,YAAY,CAACjH,EAAG,MAAM,CAACG,YAAY,gBAAgBD,MAAM,CAAC,KAAO,eAAe6F,KAAK,eAAe,CAAC/F,EAAG,IAAI,CAACG,YAAY,oBAAoBL,EAAIS,GAAG,oBAAoBP,EAAG,MAAM,CAACG,YAAY,cAAcD,MAAM,CAAC,KAAO,SAAS6F,KAAK,SAAS,CAAC/F,EAAG,IAAI,CAACG,YAAY,4BAA4BL,EAAIS,GAAG,sBAAuBT,EAAW,QAAEE,EAAG,MAAM,CAACG,YAAY,6BAA6B,CAACH,EAAG,IAAI,CAACG,YAAY,oBAAoBL,EAAIS,GAAG,kBAAkBP,EAAG,MAAM,CAACG,YAAY,6BAA6B,CAACL,EAAIS,GAAG,kBAAkB,IAAI,GAAIT,EAAIgH,UAAUxC,OAAS,EAAGtE,EAAG,MAAM,CAACG,YAAY,wBAAwBC,GAAG,CAAC,MAAQN,EAAIoH,YAAY,CAAClH,EAAG,IAAI,CAACG,YAAY,0BAA0BL,EAAIU,SAASR,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,YAAY,CAACG,YAAY,WAAWD,MAAM,CAAC,KAAOJ,EAAIqH,UAAY,OAAS,UAAU,OAAS,GAAG,KAAOrH,EAAIqH,UAAY,sBAAwB,sBAAsB/G,GAAG,CAAC,MAAQN,EAAIsH,cAAcpH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,OAAO,CAACG,YAAY,WAAW,CAACL,EAAIS,GAAGT,EAAIa,GAAGb,EAAIgH,UAAUxC,OAAS,EAAIxE,EAAIkH,kBAAoB,EAAI,MAAMhH,EAAG,OAAO,CAACG,YAAY,aAAa,CAACL,EAAIS,GAAG,OAAOP,EAAG,OAAO,CAACG,YAAY,SAAS,CAACL,EAAIS,GAAGT,EAAIa,GAAGb,EAAIgH,UAAUxC,cAAc,MAAM,EAChyE,EACI,EAAkB,GCiEtB,GACEtC,KAAM,YACNmE,MAAO,CAAC,aAAc,QACtB,IAAAjD,GACE,MAAO,CACLvB,SAAS,EACTwF,WAAW,EACXH,kBAAmB,EACnBF,UAAW,GACXD,aAAc,GACdQ,MAAO,KAEX,EACA,OAAAjB,GACErG,KAAKuH,cACLvH,KAAKwH,YACP,EACA,aAAAlC,GACEtF,KAAKyH,WACP,EACAnE,QAAS,CACP,iBAAMiE,GACJvH,KAAK4B,SAAU,EACf,IAGE,MAAM8F,QAAY1H,KAAKoE,MAAMC,IAAI,eAAerE,KAAK6G,oBAAqB,CACxEc,OAAQ,CAAE9C,KAAM7E,KAAK6E,QAInB6C,EAAIvE,KAAKyE,QAAUF,EAAIvE,KAAKyE,OAAOrD,OAAS,GAC9CvE,KAAK+G,UAAYW,EAAIvE,KAAKyE,OAAOnB,IAAIoB,IAAK,CACxCxC,GAAIwC,EAAExC,IAAMwC,EAAEC,SACdZ,IAAKW,EAAEE,WAAaF,EAAEG,UACtBC,SAAUJ,EAAEI,YAEdjI,KAAK8G,aAAeY,EAAIvE,KAAK+E,gBAAkB,SAASlI,KAAK6G,cAE7D7G,KAAKmI,gBAET,CAAE,MAAOC,GACPjD,QAAQC,KAAK,mBACbpF,KAAKmI,gBACP,CAAE,QACAnI,KAAK4B,SAAU,CACjB,CACF,EAEA,cAAAuG,GACEnI,KAAK8G,aAAe,gBAEpB,MAAMuB,EAAU,6DAChBrI,KAAK+G,UAAY,CACf,CAAEG,IAAK,GAAGmB,kBACV,CAAEnB,IAAK,GAAGmB,kBACV,CAAEnB,IAAK,GAAGmB,kBACV,CAAEnB,IAAK,GAAGmB,kBAEd,EAEA,UAAAb,GACExH,KAAKsH,MAAQ3D,YAAY,KACnB3D,KAAKoH,WAAapH,KAAK+G,UAAUxC,OAAS,GAC5CvE,KAAKmH,aAEN,IACL,EACA,SAAAM,GACMzH,KAAKsH,OAAOvD,cAAc/D,KAAKsH,MACrC,EACA,UAAAD,GACErH,KAAKoH,WAAapH,KAAKoH,SACzB,EACA,SAAAJ,GACEhH,KAAKiH,mBAAqBjH,KAAKiH,kBAAoB,EAAIjH,KAAK+G,UAAUxC,QAAUvE,KAAK+G,UAAUxC,MACjG,EACA,SAAA4C,GACEnH,KAAKiH,mBAAqBjH,KAAKiH,kBAAoB,GAAKjH,KAAK+G,UAAUxC,MACzE,EACA,UAAAkB,GACEzF,KAAK4E,MAAM,UACb,ICrJiI,ICQjI,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBX,EAAS,WAAkB,IAAI7E,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,MAAM,CAACG,YAAY,aAAa,CAACL,EAAIgC,GAAG,GAAG9B,EAAG,UAAU,CAACG,YAAY,aAAaD,MAAM,CAAC,OAAS,UAAU,CAACF,EAAG,MAAM,CAACG,YAAY,eAAeD,MAAM,CAAC,KAAO,UAAU6F,KAAK,UAAU,CAAC/F,EAAG,MAAM,CAACG,YAAY,aAAaD,MAAM,CAAC,IAAM,qDAAqD,IAAM,UAAUF,EAAG,KAAK,CAACF,EAAIS,GAAG,YAAYP,EAAG,IAAI,CAACG,YAAY,YAAY,CAACL,EAAIS,GAAG,kBAAkBP,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQJ,EAAIuI,UAAU,iBAAiB,QAAQ,CAACrI,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,cAAc,cAAc,eAAe,UAAY,IAAIoI,MAAM,CAACpG,MAAOpC,EAAIuI,UAAiB,QAAEE,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIuI,UAAW,UAAWG,EAAI,EAAErG,WAAW,wBAAwB,GAAGnC,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,WAAW,YAAc,cAAc,cAAc,eAAe,gBAAgB,IAAIyF,SAAS,CAAC,MAAQ,SAAStF,GAAQ,OAAIA,EAAOiC,KAAKC,QAAQ,QAAQzC,EAAI0C,GAAGnC,EAAOoC,QAAQ,QAAQ,GAAGpC,EAAOqC,IAAI,SAAgB,KAAY5C,EAAI4I,YAAY7F,MAAM,KAAMC,UAAU,GAAGwF,MAAM,CAACpG,MAAOpC,EAAIuI,UAAkB,SAAEE,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIuI,UAAW,WAAYG,EAAI,EAAErG,WAAW,yBAAyB,GAAGnC,EAAG,YAAY,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,UAAU,QAAUJ,EAAI6B,SAASvB,GAAG,CAAC,MAAQN,EAAI4I,cAAc,CAAC5I,EAAIS,GAAG,eAAe,IAAI,IAAI,IAC38C,EACI,EAAkB,CAAC,WAAY,IAAIT,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,MAAM,CAACG,YAAY,YAAYH,EAAG,MAAM,CAACG,YAAY,WAAW,CAACH,EAAG,KAAK,CAACF,EAAIS,GAAG,WAAWP,EAAG,IAAI,CAACF,EAAIS,GAAG,wBAChO,GCmDA,GACEyB,KAAM,QACN,IAAAkB,GACE,MAAO,CACLmF,UAAW,CAAEM,QAAS,MAAOC,SAAU,OACvCjH,SAAS,EAEb,EACA0B,QAAS,CACP,iBAAMqF,GAEJ,GAAK3I,KAAKsI,UAAUM,SAAY5I,KAAKsI,UAAUO,SAA/C,CAKA7I,KAAK4B,SAAU,EACf,IAEE,MAAM8F,QAAY1H,KAAKoE,MAAM0E,KAAK,eAAgB9I,KAAKsI,WAEnDZ,EAAIvE,MAAQuE,EAAIvE,KAAK4F,eAEvBC,aAAaC,QAAQ,YAAavB,EAAIvE,KAAK4F,cAE3C/I,KAAKgF,SAAS,CACZN,QAAS,kBACTnC,KAAM,UACN2G,SAAU,MAIZlJ,KAAK4E,MAAM,iBAEf,CAAE,MAAOwD,GACPjD,QAAQD,MAAM,eAAgBkD,GAC9B,MAAMe,EAASf,EAAIjE,SAAWiE,EAAIjE,SAASgF,OAAS,KAErC,MAAXA,EACFnJ,KAAKgF,SAASE,MAAM,iBAGpBlF,KAAKgF,SAASE,MAAM,mBAExB,CAAE,QACAlF,KAAK4B,SAAU,CACjB,CAhCA,MAFE5B,KAAKgF,SAASC,QAAQ,YAmC1B,ICrG6H,ICQ7H,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBX,EAAS,WAAkB,IAAIlF,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,2BAA2B,CAACH,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,KAAK,CAACF,EAAIS,GAAG,YAAYP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,gBAAgBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,eAAe,IAAI,CAAC7E,EAAIS,GAAG,WAAW,GAAGP,EAAG,WAAW,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAW,QAAEqC,WAAW,YAAYZ,YAAY,CAAC,MAAQ,QAAQrB,MAAM,CAAC,KAAOJ,EAAI+E,WAAW,OAAS,KAAK,CAAC7E,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,OAAO,MAAQ,MAAM,MAAQ,UAAUiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAACtJ,EAAG,WAAW,CAACuB,YAAY,CAAC,MAAQ,OAAO,OAAS,OAAO,gBAAgB,MAAM,OAAS,kBAAkBrB,MAAM,CAAC,IAAMoJ,EAAMC,IAAI1D,OAAS,qEAAqE,IAAM,QAAQ,mBAAmB,CAACyD,EAAMC,IAAI1D,SAAS,CAAC7F,EAAG,MAAM,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,SAAS6F,KAAK,SAAS,CAAC/F,EAAG,IAAI,CAACG,YAAY,gCAAgC,OAAOH,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,QAAQ,MAAQ,OAAO,YAAY,SAASF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,cAAc,MAAQ,OAAO,MAAQ,SAASF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,MAAM,MAAQ,UAAUiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAAEA,EAAMC,IAAQ,KAAEvJ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,QAAQ,OAAS,UAAU,CAACF,EAAG,IAAI,CAACG,YAAY,qBAAqBL,EAAIS,GAAG,IAAIT,EAAIa,GAAG2I,EAAMC,IAAI3E,MAAM,OAAO5E,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQ,OAAS,UAAU,CAACJ,EAAIS,GAAG,SAAS,OAAOP,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,WAAW,MAAQ,KAAK,YAAY,SAASF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,cAAc,MAAQ,MAAM,MAAQ,KAAK,MAAQ,YAAYF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,MAAM,MAAQ,UAAUiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAACtJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,OAAO,KAAO,mBAAmBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,kBAAmB2E,EAAMC,IAAInE,GAAG,IAAI,CAACtF,EAAIS,GAAG,UAAU,QAAQ,IAAI,EACxkE,EACI,EAAkB,GCqDtB,GACEyB,KAAM,eACN,IAAAkB,GACE,MAAO,CACLvB,SAAS,EACTkD,WAAY,GAEhB,EACA,OAAAuB,GACErG,KAAKyJ,iBACP,EACAnG,QAAS,CACP,qBAAMmG,GACJzJ,KAAK4B,SAAU,EAEf,IAEE,MAAMuC,QAAiBnE,KAAKoE,MAAMC,IAAI,aAElCF,EAAShB,MAAQgB,EAAShB,KAAKoB,OAAS,EAE1CvE,KAAK8E,WAAaX,EAAShB,KAAKsD,IAAIC,IAAQ,IACvCA,EACH7B,KAAM6B,EAAK7B,MAAQ,MAGrB7E,KAAK0J,cAET,CAAE,MAAOxE,GACPC,QAAQC,KAAK,mBACbpF,KAAK0J,cACP,CAAE,QACA1J,KAAK4B,SAAU,CACjB,CACF,EAEA,YAAA8H,GACE1J,KAAK8E,WAAa,CAChB,CACEO,GAAI,UACJZ,MAAO,YACPkC,YAAa,aACbgD,SAAU,WACV/C,YAAa,GACb/B,KAAM,WACNiB,MAAO,sEAET,CACET,GAAI,UACJZ,MAAO,YACPkC,YAAa,aACbgD,SAAU,SACV/C,YAAa,GACb/B,KAAM,GACNiB,MAAO,sEAGb,IChHoI,ICQpI,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBX,EAAS,WAAkB,IAAI/F,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,wBAAwB,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiBoB,YAAY,CAAC,QAAU,OAAO,kBAAkB,gBAAgB,cAAc,SAAS,gBAAgB,SAAS,CAACvB,EAAG,KAAK,CAACuB,YAAY,CAAC,cAAc,MAAM,MAAQ,YAAY,CAACzB,EAAIS,GAAG,YAAYP,EAAG,YAAY,CAACG,YAAY,aAAaoB,YAAY,CAAC,mBAAmB,UAAU,eAAe,UAAU,cAAc,QAAQrB,MAAM,CAAC,KAAO,UAAU,KAAO,gBAAgBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,YAAY,IAAI,CAAC7E,EAAIS,GAAG,eAAe,GAAGP,EAAG,MAAM,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAW,QAAEqC,WAAW,YAAYhC,YAAY,gBAAgB,CAACH,EAAG,WAAW,CAACuB,YAAY,CAAC,MAAQ,QAAQrB,MAAM,CAAC,KAAOJ,EAAI6J,UAAU,OAAS,KAAK,CAAC3J,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,MAAM,MAAQ,UAAUiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAACtJ,EAAG,YAAY,CAACuB,YAAY,CAAC,OAAS,oBAAoB,mBAAmB,QAAQrB,MAAM,CAAC,KAAO,GAAG,IAAMoJ,EAAMC,IAAIK,QAAU9J,EAAI+J,mBAAmB,YAAc,cAAc,CAAC/J,EAAIS,GAAG,IAAIT,EAAIa,GAAG2I,EAAMC,IAAIvH,KAAOsH,EAAMC,IAAIvH,KAAK8H,OAAO,GAAK,KAAK,OAAO,OAAO9J,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,OAAO,MAAQ,KAAK,MAAQ,OAAOiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAACtJ,EAAG,OAAO,CAACuB,YAAY,CAAC,cAAc,OAAO,MAAQ,SAAS,CAACzB,EAAIS,GAAGT,EAAIa,GAAG2I,EAAMC,IAAIvH,SAAS,OAAOhC,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,MAAM,MAAQ,KAAK,MAAQ,MAAM,MAAQ,YAAYF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,OAAO,MAAQ,kBAAkB,YAAY,OAAOiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAAEA,EAAMC,IAAQ,KAAEvJ,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,UAAU,OAAS,UAAU,CAACF,EAAG,IAAI,CAACG,YAAY,qBAAqBL,EAAIS,GAAG,IAAIT,EAAIa,GAAG2I,EAAMC,IAAI3E,MAAM,OAAO5E,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,OAAO,OAAS,UAAU,CAACJ,EAAIS,GAAG,UAAU,OAAOP,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,MAAM,MAAQ,UAAUiJ,YAAYrJ,EAAIsJ,GAAG,CAAC,CAAC1G,IAAI,UAAU2G,GAAG,SAASC,GAAO,MAAO,CAACtJ,EAAG,YAAY,CAACuB,YAAY,CAAC,MAAQ,UAAU,cAAc,QAAQrB,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,aAAc2E,EAAMC,IAAInE,GAAG,IAAI,CAACpF,EAAG,IAAI,CAACG,YAAY,iBAAiBL,EAAIS,GAAG,YAAY,QAAQ,GAA6B,IAAzBT,EAAI6J,UAAUrF,QAAiBxE,EAAI6B,QAA2M7B,EAAIU,KAAtMR,EAAG,MAAM,CAACG,YAAY,qBAAqB,CAACH,EAAG,IAAI,CAACG,YAAY,qBAAqBoB,YAAY,CAAC,YAAY,OAAO,MAAQ,UAAU,gBAAgB,UAAUvB,EAAG,IAAI,CAACF,EAAIS,GAAG,mBAA4B,IAC3iF,EACI,EAAkB,GCmEtB,GACEyB,KAAM,YACN,IAAAkB,GACE,MAAO,CACLvB,SAAS,EACTgI,UAAW,GAEf,EACA,OAAAvD,GACErG,KAAKgK,aACP,EACA1G,QAAS,CACP,gBAAAwG,GACE,MAAO,8FACT,EAEA,iBAAME,GACJhK,KAAK4B,SAAU,EACf,MAAMqI,EAAY,2EAElB,IACE,MAAMvC,QAAY1H,KAAKoE,MAAMC,IAAI,aAE7BqD,EAAIvE,MAAQuE,EAAIvE,KAAKoB,OAAS,EAChCvE,KAAK4J,UAAYlC,EAAIvE,KAAKsD,IAAIC,IAC5B,IAAIwD,EAAc,KAGlB,MAAMC,EAAczD,EAAKmD,QAAUnD,EAAK0D,WAExC,GAAID,EAAa,CACf,MAAME,GAAY,IAAIC,MAAOC,UAE7B,GAAIJ,EAAYK,WAAW,QACzBN,EAAc,GAAGC,IAAcA,EAAYM,SAAS,KAAO,IAAM,QAAQJ,QACpE,CACL,MAAMK,EAAYP,EAAYK,WAAW,KAAOL,EAAYQ,UAAU,GAAKR,EAC3ED,EAAc,GAAGD,KAAaS,OAAeL,GAC/C,CACF,CAEA,MAAO,CACLhF,GAAIqB,EAAKrB,GACTpD,KAAMyE,EAAKzE,KACX2I,IAAKlE,EAAKkE,IAEV/F,KAAM6B,EAAK7B,KACXgF,OAAQK,KAIZlK,KAAK6K,aAET,CAAE,MAAOzC,GACPjD,QAAQC,KAAK,kBAAmBgD,GAChCpI,KAAK6K,aACP,CAAE,QACA7K,KAAK4B,SAAU,CACjB,CACF,EAEA,WAAAiJ,GACE7K,KAAK4J,UAAY,CACf,CACEvE,GAAI,KACJpD,KAAM,eACN2I,IAAK,GACL/F,KAAM,WACNgF,OAAQ,gGAEV,CACExE,GAAI,KACJpD,KAAM,MACN2I,IAAK,GACL/F,KAAM,WACNgF,OAAQ,6FAGd,ICnJiI,ICQjI,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBX,EAAS,WAAkB,IAAI9J,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,wBAAwB,CAACH,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,eAAe,OAAS,IAAIE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,UAAU,KAAK3E,EAAG,KAAK,CAACuB,YAAY,CAAC,cAAc,SAAS,CAACzB,EAAIS,GAAGT,EAAIa,GAAGb,EAAI+K,OAAS,WAAa,kBAAkB,GAAG7K,EAAG,UAAU,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAc,WAAEqC,WAAW,eAAehC,YAAY,YAAYD,MAAM,CAAC,OAAS,UAAU,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQJ,EAAIgL,UAAU,iBAAiB,QAAQ,CAAC9K,EAAG,SAAS,CAACE,MAAM,CAAC,OAAS,KAAK,CAACF,EAAG,SAAS,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,YAAY,CAACG,YAAY,kBAAkBD,MAAM,CAAC,OAAS,IAAI,eAAc,EAAM,kBAAiB,EAAM,YAAYJ,EAAIiL,qBAAqB,CAAEjL,EAAY,SAAEE,EAAG,MAAM,CAACG,YAAY,0BAA0B,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiBD,MAAM,CAAC,IAAMJ,EAAIkL,SAAS,YAAc,eAAehL,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,IAAI,CAACG,YAAY,iBAAiBH,EAAG,OAAO,CAACF,EAAIS,GAAG,cAAcP,EAAG,MAAM,CAACG,YAAY,wBAAwB,CAACH,EAAG,IAAI,CAACG,YAAY,oCAAoCoB,YAAY,CAAC,YAAY,OAAO,MAAQ,aAAavB,EAAG,MAAMA,EAAG,OAAO,CAACuB,YAAY,CAAC,MAAQ,UAAU,YAAY,SAAS,CAACzB,EAAIS,GAAG,eAAeP,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,cAAc,KAAO,OAAO,UAAW,EAAM,YAAY,GAAG,OAAS,MAAMF,EAAG,IAAI,CAACG,YAAY,cAAc,CAACL,EAAIS,GAAG,iBAAiB,IAAI,KAAKP,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,SAAW,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,UAAUoI,MAAM,CAACpG,MAAOpC,EAAIgL,UAAc,KAAEvC,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIgL,UAAW,OAAQtC,EAAI,EAAErG,WAAW,qBAAqB,GAAGnC,EAAG,SAAS,CAACE,MAAM,CAAC,OAAS,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,kBAAkB,CAACuB,YAAY,CAAC,MAAQ,QAAQrB,MAAM,CAAC,IAAM,EAAE,IAAM,KAAKoI,MAAM,CAACpG,MAAOpC,EAAIgL,UAAa,IAAEvC,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIgL,UAAW,MAAOtC,EAAI,EAAErG,WAAW,oBAAoB,IAAI,GAAGnC,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,YAAYoI,MAAM,CAACpG,MAAOpC,EAAIgL,UAAc,KAAEvC,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIgL,UAAW,OAAQtC,EAAI,EAAErG,WAAW,mBAAmB,CAACnC,EAAG,IAAI,CAACG,YAAY,mBAAmBD,MAAM,CAAC,KAAO,UAAU6F,KAAK,cAAc,IAAI,IAAI,GAAG/F,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,cAAc,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,WAAW,KAAO,IAAI,YAAc,qBAAqBoI,MAAM,CAACpG,MAAOpC,EAAIgL,UAAgB,OAAEvC,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIgL,UAAW,SAAUtC,EAAI,EAAErG,WAAW,uBAAuB,IAAI,IAAI,GAAGnC,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,YAAY,CAACuB,YAAY,CAAC,mBAAmB,UAAU,eAAe,WAAWrB,MAAM,CAAC,KAAO,UAAU,QAAUJ,EAAImL,WAAW,KAAO,0BAA0B7K,GAAG,CAAC,MAAQN,EAAIoL,aAAa,CAACpL,EAAIS,GAAG,IAAIT,EAAIa,GAAGb,EAAI+K,OAAS,SAAW,aAAa,OAAO7K,EAAG,YAAY,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,UAAU,IAAI,CAAC7E,EAAIS,GAAG,WAAW,IAAI,IAAI,IAAI,EAC7qG,EACI,EAAkB,GCyEtB,GACEyB,KAAM,YACNmE,MAAO,CAAC,WACR,IAAAjD,GACE,MAAO,CACL4H,UAAW,CAAE9I,KAAM,GAAI2I,IAAK,GAAI/F,KAAM,GAAIuG,OAAQ,IAClDH,SAAU,GACVI,aAAc,KACdH,YAAY,EACZJ,QAAQ,EAEZ,EACA,OAAAzE,GACMrG,KAAKsL,UACPtL,KAAK8K,QAAS,EACd9K,KAAKuL,iBAET,EACAjI,QAAS,CACP,oBAAMiI,GACJ,MAAMtB,EAAY,2EAClB,IACE,MAAMvC,QAAY1H,KAAKoE,MAAMC,IAAI,aAAarE,KAAKsL,WACnDtL,KAAK+K,UAAY,CACf9I,KAAMyF,EAAIvE,KAAKlB,MAAQ,GACvB2I,IAAKlD,EAAIvE,KAAKyH,KAAO,GACrB/F,KAAM6C,EAAIvE,KAAK0B,MAAQ,GACvBuG,OAAQ1D,EAAIvE,KAAKiI,QAAU,IAIzB1D,EAAIvE,KAAK0G,SACX7J,KAAKiL,SAAWvD,EAAIvE,KAAK0G,OAAOW,WAAW,QACvC9C,EAAIvE,KAAK0G,OACT,GAAGI,IAAYvC,EAAIvE,KAAK0G,aAAY,IAAIS,MAAOC,YAEvD,CAAE,MAAOnC,GACPpI,KAAKgF,SAASE,MAAM,WACtB,CACF,EAEA,kBAAA8F,CAAmBQ,GACjBxL,KAAKqL,aAAeG,EAAKC,IACzBzL,KAAKiL,SAAWS,IAAIC,gBAAgBH,EAAKC,IAC3C,EAEA,gBAAMN,GACJ,GAAKnL,KAAK+K,UAAU9I,KAApB,CAIAjC,KAAKkL,YAAa,EAElB,IAEE,MAAMU,EAAkB,CACtB3J,KAAM4J,OAAO7L,KAAK+K,UAAU9I,MAC5B2I,IAAKkB,OAAO9L,KAAK+K,UAAUH,KAC3BQ,OAAQpL,KAAK+K,UAAUK,QAAU,GACjCvG,KAAM7E,KAAK+K,UAAUlG,MAAQ,IAGzBkH,EAAc/L,KAAK8K,OAAS,aAAa9K,KAAKsL,UAAY,YAC1DU,EAAiBhM,KAAK8K,OAAS,MAAQ,OAEvCpD,QAAY1H,KAAKoE,MAAM,CAC3B6H,OAAQD,EACR9E,IAAK6E,EACL5I,KAAMyI,IAGFM,EAAWlM,KAAK8K,OAAS9K,KAAKsL,QAAU5D,EAAIvE,KAAKkC,GAGvD,GAAIrF,KAAKqL,cAAgBa,EAAU,CACjC,MAAMC,EAAiB,IAAIC,SAC3BD,EAAeE,OAAO,OAAQrM,KAAKqL,oBAE7BrL,KAAKoE,MAAM,CACf6H,OAAQ,OACR/E,IAAK,aAAagF,iBAClB/I,KAAMgJ,EACNG,QAAS,CAAE,eAAgB,wBAE/B,CAEAtM,KAAKgF,SAASuH,QAAQvM,KAAK8K,OAAS,YAAc,UAClDlH,WAAW,KAAQ5D,KAAK4E,MAAM,YAAe,IAE/C,CAAE,MAAOwD,GACPjD,QAAQD,MAAM,gBAAiBkD,EAAIjE,UACnCnE,KAAKgF,SAASE,MAAMkD,EAAIjE,UAAUhB,MAAMuB,SAAW,OACrD,CAAE,QACA1E,KAAKkL,YAAa,CACpB,CA5CA,MAFElL,KAAKgF,SAASC,QAAQ,UA+C1B,IC1KiI,ICQjI,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,E,QCnBX,EAAS,WAAkB,IAAIlF,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,0BAA0B,CAACH,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,iBAAiB,CAACE,MAAM,CAAC,QAAU,gBAAgBE,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,UAAU,MAAM,GAAG3E,EAAG,UAAU,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAW,QAAEqC,WAAW,YAAYhC,YAAY,aAAa,CAACL,EAAI2F,GAAI3F,EAAY,SAAE,SAASyM,GAAO,OAAOvM,EAAG,MAAM,CAAC0C,IAAI6J,EAAMC,YAAYrM,YAAY,kBAAkB,CAACH,EAAG,KAAK,CAACG,YAAY,kBAAkB,CAACH,EAAG,IAAI,CAACG,YAAY,iBAAiBL,EAAIS,GAAG,IAAIT,EAAIa,GAAG4L,EAAME,eAAe,KAAKzM,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,OAAO,KAAO,SAAS,CAACJ,EAAIS,GAAG,KAAKT,EAAIa,GAAG4L,EAAM5E,OAAOrD,QAAQ,SAAS,GAAGtE,EAAG,MAAM,CAACG,YAAY,cAAcL,EAAI2F,GAAI8G,EAAY,OAAE,SAASG,GAAO,OAAO1M,EAAG,MAAM,CAAC0C,IAAIgK,EAAM7E,SAAS1H,YAAY,uBAAuB,CAACH,EAAG,WAAW,CAACG,YAAY,cAAcD,MAAM,CAAC,IAAMwM,EAAM3E,UAAU,IAAM,SAAS3H,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6M,eAAeJ,EAAOG,EAAM,IAAI,CAAC1M,EAAG,MAAM,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,SAAS6F,KAAK,SAAS,CAAC/F,EAAG,IAAI,CAACG,YAAY,iCAAiC,EAAE,GAAG,IAAI,GAA4B,IAAxBL,EAAI8M,SAAStI,QAAiBxE,EAAI6B,QAAoG7B,EAAIU,KAA/FR,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,cAAc,GAAYF,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,iBAAiB,QAAUJ,EAAI6B,SAASvB,GAAG,CAAC,MAAQN,EAAI+M,kBAAkB,CAAC/M,EAAIS,GAAG,oBAAoBP,EAAG,YAAY,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,UAAU,IAAI,CAAC7E,EAAIS,GAAG,SAAS,IAAI,GAAGP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,SAAS,QAAUJ,EAAIgN,YAAY,MAAQ,SAAS1M,GAAG,CAAC,iBAAiB,SAASC,GAAQP,EAAIgN,YAAYzM,CAAM,EAAE,OAASP,EAAIiN,cAAc,CAAEjN,EAAgB,aAAEE,EAAG,MAAM,CAACG,YAAY,0BAA0B,CAACH,EAAG,MAAM,CAACG,YAAY,UAAUoB,YAAY,CAAC,SAAW,WAAW,SAAW,WAAW,CAACvB,EAAG,MAAM,CAACoC,IAAI,aAAajC,YAAY,eAAeoB,YAAY,CAAC,MAAQ,QAAQrB,MAAM,CAAC,IAAMJ,EAAIkN,aAAajF,WAAW3H,GAAG,CAAC,KAAON,EAAIiN,eAAe/M,EAAG,MAAM,CAACG,YAAY,kBAAkBoB,YAAY,CAAC,SAAW,WAAW,OAAS,oBAAoB,WAAa,yBAAyB0L,MAAOnN,EAAY,aAAME,EAAG,UAAU,CAACuB,YAAY,CAAC,aAAa,QAAQrB,MAAM,CAAC,iBAAiB,QAAQ,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,aAAa,CAACF,EAAG,YAAY,CAACuB,YAAY,CAAC,MAAQ,QAAQrB,MAAM,CAAC,WAAa,IAAIoI,MAAM,CAACpG,MAAOpC,EAAoB,iBAAEyI,SAAS,SAAUC,GAAM1I,EAAIoN,iBAAiB1E,CAAG,EAAErG,WAAW,qBAAqBrC,EAAI2F,GAAI3F,EAAmB,gBAAE,SAASqN,GAAK,OAAOnN,EAAG,YAAY,CAAC0C,IAAIyK,EAAI/H,GAAGlF,MAAM,CAAC,MAAQiN,EAAInL,KAAK,MAAQmL,EAAI/H,KAAK,GAAG,IAAI,IAAI,IAAI,GAAGtF,EAAIU,KAAKR,EAAG,OAAO,CAACE,MAAM,CAAC,KAAO,UAAU6F,KAAK,UAAU,CAAC/F,EAAG,YAAY,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQP,EAAIgN,aAAc,CAAK,IAAI,CAAChN,EAAIS,GAAG,QAAQP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWE,GAAG,CAAC,MAAQN,EAAIsN,yBAAyB,CAACtN,EAAIS,GAAG,WAAW,MAAM,EAC55F,EACI,EAAkB,GCoEtB,GACEyB,KAAM,cACNmE,MAAO,CAAC,cACR,IAAAjD,GACE,MAAO,CACLvB,SAAS,EACTiL,SAAU,GACVS,gBAAiB,GACjBP,aAAa,EACbQ,aAAc,KACdN,aAAc,KACdE,iBAAkB,GAClBK,SAAU,CAAC,EAEf,EACA,OAAAnH,GACErG,KAAKyN,uBACP,EACAnK,QAAS,CACP,2BAAMmK,GACJzN,KAAK4B,SAAU,EACf,MAAMqI,EAAY,2EAElB,IAEE,MAAMvC,QAAY1H,KAAKoE,MAAM0E,KAAK,aAAa9I,KAAK6G,uBAAwB,CAAC,EAAG,CAC9E6G,QAAS,MAGPhG,EAAIvE,MAAQuE,EAAIvE,KAAKoB,OAAS,GAChCvE,KAAK6M,SAAWnF,EAAIvE,KAAKsD,IAAI+F,IAC3BA,EAAM5E,OAAS4E,EAAM5E,OAAOnB,IAAIoB,IAE9B,GAAIA,EAAEG,YAAcH,EAAEG,UAAUwC,WAAW,QAAS,CAClD,MAAME,EAAY7C,EAAEG,UAAU2F,QAAQ,OAAQ,IAC9C9F,EAAEG,UAAY,GAAGiC,KAAaS,QAAe,IAAIJ,MAAOC,WAC1D,CACA,OAAO1C,IAEF2E,IAITxM,KAAKsN,gBAAkBtN,KAAK6M,SAASpG,IAAImH,IAAK,CAC5CvI,GAAIuI,EAAEnB,YACNxK,KAAM2L,EAAElB,kBAGV1M,KAAK6N,iBAET,CAAE,MAAOzF,GACPjD,QAAQC,KAAK,qBAAsBgD,GACnCpI,KAAK6N,iBACP,CAAE,QACA7N,KAAK4B,SAAU,CACjB,CACF,EAEA,eAAAiM,GAEE7N,KAAK6M,SAAW,EAClB,EAEA,cAAAD,CAAeJ,EAAOG,GACpB3M,KAAKuN,aAAef,EACpBxM,KAAKiN,aAAeN,EACpB3M,KAAKmN,iBAAmBX,EAAMC,YAC9BzM,KAAK+M,aAAc,CACrB,EAEA,sBAAAM,GACE,MAAMS,EAAW9N,KAAK6M,SAASkB,KAAKH,GAAKA,EAAEnB,cAAgBzM,KAAKmN,kBAC5DW,GAAY9N,KAAKuN,aAAad,cAAgBzM,KAAKmN,mBACrDnN,KAAKuN,aAAa3F,OAAS5H,KAAKuN,aAAa3F,OAAOoG,OAAOnG,GAAKA,EAAEC,WAAa9H,KAAKiN,aAAanF,UACjGgG,EAASlG,OAAOqG,KAAKjO,KAAKiN,eAE5BjN,KAAK+M,aAAc,CACrB,EAEA,qBAAMD,GACJ9M,KAAK4B,SAAU,EACf,IAEE,MAAMsM,EAAU,GAChBlO,KAAK6M,SAASsB,QAAQ3B,IACpBA,EAAM5E,OAAOuG,QAAQtG,IACnBqG,EAAQD,KAAK,CACXnG,SAAUD,EAAEC,SACZ2E,YAAaD,EAAMC,wBAKnBzM,KAAKoE,MAAM0E,KAAK,aAAa9I,KAAK6G,+BAAgCqH,GACxElO,KAAKgF,SAASuH,QAAQ,eACtBvM,KAAK4E,MAAM,UACb,CAAE,MAAOM,GACPlF,KAAKgF,SAASE,MAAM,OACtB,CAAE,QACAlF,KAAK4B,SAAU,CACjB,CACF,EAEA,WAAAoL,GACEhN,KAAKuD,UAAU,KACb,MAAM6K,EAAMpO,KAAKwD,MAAM6K,WACvB,IAAKD,IAAQpO,KAAKiN,eAAiBjN,KAAKiN,aAAaqB,cAAqC,IAArBF,EAAIG,aAAoB,OAE7F,MAAMC,EAAMxO,KAAKiN,aAAaqB,aACxBG,EAAKL,EAAIM,YAAcN,EAAIG,aAC3BI,EAAKP,EAAIQ,aAAeR,EAAIS,cAElC7O,KAAKwN,SAAW,CACdsB,IAAMN,EAAI,GAAKG,EAAM,KACrBI,KAAOP,EAAI,GAAKC,EAAM,KACtBO,OAASR,EAAI,GAAKA,EAAI,IAAMC,EAAM,KAClCQ,QAAUT,EAAI,GAAKA,EAAI,IAAMG,EAAM,OAGzC,IC7LmI,ICQnI,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,GAAe,E,QCnBX,GAAS,WAAkB,IAAI5O,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,6BAA6B,CAACH,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,eAAe,OAAS,IAAIE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,UAAU,KAAK3E,EAAG,KAAK,CAACuB,YAAY,CAAC,cAAc,SAAS,CAACzB,EAAIS,GAAGT,EAAIa,GAAGb,EAAImP,cAAgB,SAAW,cAAc,GAAGjP,EAAG,SAAS,CAACE,MAAM,CAAC,OAAS,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,UAAU,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAc,WAAEqC,WAAW,eAAehC,YAAY,YAAYD,MAAM,CAAC,OAAS,UAAU,CAACF,EAAG,MAAM,CAACG,YAAY,mBAAmBD,MAAM,CAAC,KAAO,UAAU6F,KAAK,UAAU,CAAC/F,EAAG,OAAO,CAACA,EAAG,IAAI,CAACG,YAAY,2BAA2BL,EAAIS,GAAG,eAAeP,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQJ,EAAIoP,aAAa,iBAAiB,QAAQ,CAAClP,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,aAAa,UAAYJ,EAAImP,eAAe3G,MAAM,CAACpG,MAAOpC,EAAIoP,aAAkB,MAAE3G,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIoP,aAAc,QAAS1G,EAAI,EAAErG,WAAW,yBAAyB,GAAGnC,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,eAAe,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,iBAAiB,UAAYJ,EAAImP,cAAc,UAAY,IAAI3G,MAAM,CAACpG,MAAOpC,EAAIoP,aAAiB,KAAE3G,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIoP,aAAc,OAAQ1G,EAAI,EAAErG,WAAW,sBAAsB,CAACnC,EAAG,IAAI,CAACG,YAAY,mBAAmBD,MAAM,CAAC,KAAO,UAAU6F,KAAK,aAAa/F,EAAG,MAAM,CAACG,YAAY,YAAY,CAACL,EAAIS,GAAG,2BAA2B,GAAGP,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,iBAAiB,CAACuB,YAAY,CAAC,MAAQ,QAAQrB,MAAM,CAAC,KAAO,OAAO,YAAc,SAAS,eAAe,aAAa,UAAYJ,EAAImP,eAAe3G,MAAM,CAACpG,MAAOpC,EAAIoP,aAAwB,YAAE3G,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIoP,aAAc,cAAe1G,EAAI,EAAErG,WAAW,+BAA+B,GAAGnC,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,WAAW,UAAYJ,EAAImP,eAAe3G,MAAM,CAACpG,MAAOpC,EAAIoP,aAAqB,SAAE3G,SAAS,SAAUC,GAAM1I,EAAI2I,KAAK3I,EAAIoP,aAAc,WAAY1G,EAAI,EAAErG,WAAW,4BAA4B,GAAIrC,EAAiB,cAAEE,EAAG,YAAY,CAACuB,YAAY,CAAC,MAAQ,OAAO,aAAa,QAAQrB,MAAM,CAAC,KAAO,WAAWE,GAAG,CAAC,MAAQN,EAAIqP,uBAAuB,CAACrP,EAAIS,GAAG,eAAeT,EAAIU,MAAM,GAAKV,EAAImP,cAAi0BnP,EAAIU,KAAtzBR,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,cAAcA,EAAG,IAAI,CAACG,YAAY,iBAAiB,CAACH,EAAG,IAAI,CAACG,YAAY,gBAAgBL,EAAIS,GAAG,cAAcT,EAAIa,GAAGb,EAAIsP,eAAe,MAAMtP,EAAIa,GAAGb,EAAIoP,aAAajJ,YAAY,OAAOjG,EAAG,cAAc,CAACE,MAAM,CAAC,WAAaJ,EAAIuP,mBAAmB,eAAe,GAAG,MAAQvP,EAAIwP,aAAa,QAAU,GAAG,eAAe,MAAkC,MAA3BxP,EAAIuP,oBAA8BvP,EAAIoP,aAAajJ,WAAa,EAAGjG,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,oBAAoB,KAAO,UAAU,UAAW,EAAM,YAAY,MAAMF,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAACH,EAAG,YAAY,CAACG,YAAY,YAAYD,MAAM,CAAC,KAAO,UAAU,KAAO,mBAAmBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,iBAAiB,IAAI,CAAC7E,EAAIS,GAAG,iBAAiB,IAAI,GAAGT,EAAIU,MAAM,IAAa,IAAI,GAAGR,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,UAAU,CAACG,YAAY,cAAcuB,MAAM,CAAE,mBAAoB5B,EAAImP,eAAgB/O,MAAM,CAAC,OAAS,UAAU,CAACF,EAAG,MAAM,CAACG,YAAY,gBAAgBD,MAAM,CAAC,KAAO,UAAU6F,KAAK,UAAU,CAAC/F,EAAG,OAAO,CAACA,EAAG,IAAI,CAACG,YAAY,mBAAmBL,EAAIS,GAAG,oBAAqBT,EAAiB,cAAEE,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,UAAU,CAACJ,EAAIS,GAAG,eAAeT,EAAIU,MAAM,GAAKV,EAAImP,cAAoQjP,EAAG,MAAM,CAACG,YAAY,sBAAsB,CAACH,EAAG,MAAM,CAACG,YAAY,yBAAyB,CAACH,EAAG,IAAI,CAACG,YAAY,0BAA0BoB,YAAY,CAAC,YAAY,YAAYvB,EAAG,KAAK,CAACF,EAAIS,GAAG,YAAYP,EAAG,IAAI,CAACF,EAAIS,GAAG,mCAAhdP,EAAG,YAAY,CAACE,MAAM,CAAC,OAASJ,EAAIyP,aAAa,KAAO,QAAQ,QAAUzP,EAAI0P,cAAc,SAAW,GAAG,YAAY,eAAe,aAAa1P,EAAI2P,oBAAoB,WAAW3P,EAAI4P,oBAAoB,CAAC1P,EAAG,IAAI,CAACG,YAAY,oBAAkR,IAAI,IAAI,IAAI,EACjlI,EACI,GAAkB,GC+HtB,IACE6B,KAAM,iBACNmE,MAAO,CAAC,oBACR,IAAAjD,GACE,MAAO,CACL+H,YAAY,EACZgE,eAAgBlP,KAAK4P,kBAAkBvK,GACvC8J,aAAc,CACZ9J,GAAIrF,KAAK4P,kBAAkBvK,IAAM,KACjCZ,MAAOzE,KAAK4P,kBAAkBnL,OAAS,GACvCkC,YAAa3G,KAAK4P,kBAAkBjJ,aAAe,GACnDgD,SAAU3J,KAAK4P,kBAAkBjG,UAAY,GAC7C9E,KAAM7E,KAAK4P,kBAAkB/K,MAAQ,GACrCqB,WAAYlG,KAAK4P,kBAAkB1J,YAAc,GAEnDmJ,cAAerP,KAAK4P,kBAAkB1J,YAAc,EACpDqJ,aAAc,CACZ,CAAEM,MAAO,UAAWC,WAAY,IAChC,CAAED,MAAO,UAAWC,WAAY,MAGtC,EACAC,SAAU,CACR,kBAAAT,GACE,OAAqC,IAAjCtP,KAAKmP,aAAajJ,WAAyB,EACxC8J,KAAKC,MAAOjQ,KAAKqP,cAAgBrP,KAAKmP,aAAajJ,WAAc,IAC1E,EACA,YAAAsJ,GACE,MAAMnH,EAAUrI,KAAKoE,MAAM8L,SAASC,QAEpC,MAAO,GAAG9H,cAAoBrI,KAAKmP,aAAa9J,gBAClD,EACA,aAAAoK,GACE,MAAO,CACL,cAAiB,UAAUzG,aAAaoH,QAAQ,eAEpD,GAEF9M,QAAS,CACP,0BAAM8L,GACJ,GAAKpP,KAAKmP,aAAa1K,MAAvB,CAIAzE,KAAKkL,YAAa,EAClB,IAEE,MAAMxD,QAAY1H,KAAKoE,MAAM0E,KAAK,YAAa9I,KAAKmP,cAEpDnP,KAAKmP,aAAa9J,GAAKqC,EAAIvE,KAAKkC,GAChCrF,KAAKkP,eAAgB,EACrBlP,KAAKgF,SAASuH,QAAQ,oBACxB,CAAE,MAAOnE,GACPjD,QAAQD,MAAM,yBAA0BkD,EAAIjE,UAC5CnE,KAAKgF,SAASE,MAAM,sBACtB,CAAE,QACAlF,KAAKkL,YAAa,CACpB,CAdA,MAFElL,KAAKgF,SAASC,QAAQ,UAiB1B,EACA,mBAAAyK,GACE1P,KAAKgF,SAASuH,QAAQ,UACtBvM,KAAKmP,aAAajJ,aAElBtC,WAAW,KAAQ5D,KAAKqP,iBAAoB,KAC9C,EACA,iBAAAM,CAAkBvH,GAChBjD,QAAQD,MAAM,gBAAiBkD,GAC/BpI,KAAKgF,SAASE,MAAM,qBACtB,ICrMsI,MCQtI,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIF,GAAe,G,QCnBX,GAAS,WAAkB,IAAInF,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,4BAA4B,CAACH,EAAG,MAAM,CAACG,YAAY,kBAAkB,CAACH,EAAG,iBAAiB,CAACE,MAAM,CAAC,QAAU,aAAaE,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOP,EAAI6E,MAAM,UAAU,KAAM7E,EAAc,WAAEE,EAAG,SAAS,CAACG,YAAY,aAAaD,MAAM,CAAC,KAAO,UAAU,OAAS,SAAS,CAACJ,EAAIS,GAAG,uBAAuBT,EAAIU,MAAM,GAAGR,EAAG,UAAU,CAAC+B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOpC,EAAW,QAAEqC,WAAW,YAAYhC,YAAY,aAAa,CAAEL,EAAIsQ,gBAAgB9L,OAAS,EAAGtE,EAAG,MAAM,CAACG,YAAY,cAAcL,EAAI2F,GAAI3F,EAAmB,gBAAE,SAAS4M,GAAO,OAAO1M,EAAG,MAAM,CAAC0C,IAAIgK,EAAM7E,SAAS1H,YAAY,cAAc,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,MAAM,CAACoC,IAAI,OAASsK,EAAM7E,SAASwI,UAAS,EAAKlQ,YAAY,oBAAoBD,MAAM,CAAC,IAAMwM,EAAM3E,WAAW3H,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOP,EAAIwQ,UAAU5D,EAAM7E,SAAS,KAAK/H,EAAI2F,GAAIiH,EAAgB,WAAE,SAAS6D,EAAIC,GAAO,OAAOxQ,EAAG,MAAM,CAAC0C,IAAI8N,EAAMrQ,YAAY,WAAW8M,MAAOsD,EAAY,SAAEnQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAI2Q,qBAAqBF,EAAI,IAAI,CAACvQ,EAAG,OAAO,CAACG,YAAY,aAAauB,MAAM,CAAE,YAAa6O,EAAIG,WAAY,CAAC5Q,EAAIS,GAAG,IAAIT,EAAIa,GAAG4P,EAAI9D,eAAe,KAAK3M,EAAIa,IAAqB,IAAjB4P,EAAII,YAAkBC,QAAQ,IAAI,UAAU,IAAI,IAAI,GAAG,GAAK9Q,EAAI6B,QAAwG7B,EAAIU,KAAnGR,EAAG,MAAM,CAACG,YAAY,eAAe,CAACH,EAAG,WAAW,CAACE,MAAM,CAAC,YAAcJ,EAAI+Q,cAAc,GAAY7Q,EAAG,MAAM,CAACG,YAAY,cAAc,CAACH,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,QAAQ,KAAO,gBAAgB,QAAUJ,EAAImL,YAAY7K,GAAG,CAAC,MAAQN,EAAIgR,gBAAgB,CAAChR,EAAIS,GAAG,sBAAsB,KAAKP,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,SAAS,QAAUJ,EAAIiR,cAAc,MAAQ,OAAO3Q,GAAG,CAAC,iBAAiB,SAASC,GAAQP,EAAIiR,cAAc1Q,CAAM,IAAI,CAACL,EAAG,UAAU,CAACE,MAAM,CAAC,cAAc,UAAU,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,WAAa,GAAG,YAAc,QAAQ,UAAY,IAAIoI,MAAM,CAACpG,MAAOpC,EAAsB,mBAAEyI,SAAS,SAAUC,GAAM1I,EAAIwB,mBAAmBkH,CAAG,EAAErG,WAAW,uBAAuB,CAACnC,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,oBAAoB,MAAQ,UAAWJ,EAAIkR,aAAa1M,OAAS,EAAGtE,EAAG,cAAcF,EAAIU,KAAKV,EAAI2F,GAAI3F,EAAgB,aAAE,SAASmR,GAAG,OAAOjR,EAAG,YAAY,CAAC0C,IAAIuO,EAAE7L,GAAGlF,MAAM,CAAC,MAAQ+Q,EAAEjP,KAAK,MAAQiP,EAAE7L,KAAK,IAAI,IAAI,IAAI,GAAGpF,EAAG,OAAO,CAACE,MAAM,CAAC,KAAO,UAAU6F,KAAK,UAAU,CAAC/F,EAAG,YAAY,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQP,EAAIiR,eAAgB,CAAK,IAAI,CAACjR,EAAIS,GAAG,QAAQP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWE,GAAG,CAAC,MAAQN,EAAIoR,qBAAqB,CAACpR,EAAIS,GAAG,WAAW,IAAI,IAAI,EAC9gF,EACI,GAAkB,GC6DtB,IACEyB,KAAM,oBACNmE,MAAO,CAAC,cACR,IAAAjD,GACE,MAAO,CACLvB,SAAS,EACTsJ,YAAY,EACZkG,YAAY,EACZC,WAAY,GACZhB,gBAAiB,GACjBW,eAAe,EACfC,aAAc,GACdK,WAAY,CAAC,EACb/P,mBAAoB,GACpBuP,UAAW,eAEf,EACA,OAAAzK,GACErG,KAAKuR,iBACLC,OAAOC,iBAAiB,SAAUzR,KAAK0R,aACzC,EACA,aAAApM,GACEkM,OAAOG,oBAAoB,SAAU3R,KAAK0R,aAC5C,EACApO,QAAS,CACP,oBAAMiO,GACJ,IAAKvR,KAAK6G,YAAkC,SAApB7G,KAAK6G,WAG3B,OAFA7G,KAAK8Q,UAAY,qBACjB9Q,KAAK6N,kBAIP7N,KAAK4B,SAAU,EACf,IACE,MAAMuC,QAAiBnE,KAAKoE,MAAM0E,KAAK,aAAa9I,KAAK6G,uBAAwB,CAAC,EAAG,CACnF6G,QAAS,OAGPvJ,EAAShB,MAAQgB,EAAShB,KAAKoB,OAAS,EAC1CvE,KAAKqR,WAAalN,EAAShB,KAE3BnD,KAAK6N,iBAET,CAAE,MAAOzF,GACPjD,QAAQC,KAAK,WAAYgD,GACzBpI,KAAK6N,iBACP,CAAE,QACA7N,KAAK4R,cACL5R,KAAK4B,SAAU,CACjB,CACF,EAEA,eAAAiM,GACE7N,KAAKoR,YAAa,EAClB,MAAMS,EAAU,0EAChB7R,KAAKqR,WAAa,CAAC,CACjB,GAAM,IAAK,KAAQ,WAAY,WAAc,IAC7C,OAAU,CAAC,CAAE,SAAY,IAAK,UAAaQ,EAAS,aAAgB,CAAC,IAAK,IAAK,IAAK,QAExF,EAEA,WAAAD,GACE,MAAMnL,EAAM,CAAC,EACbzG,KAAKqR,WAAWlD,QAAQ2D,IAEtB,MAAMC,EAAQD,EAAOzM,GACf2M,EAAUF,EAAO7P,KAEvB6P,EAAOlK,OAAOuG,QAAQ8D,IACfxL,EAAIwL,EAAInK,YACXrB,EAAIwL,EAAInK,UAAY,CAAEA,SAAUmK,EAAInK,SAAUE,UAAWiK,EAAIjK,UAAWkK,WAAY,KAEtFzL,EAAIwL,EAAInK,UAAUoK,WAAWjE,KAAK,CAChCxB,YAAasF,EACbrF,cAAesF,EACfpB,WAAYkB,EAAOlB,YAAc,EACjCuB,OAAQF,EAAI3D,aACZd,SAAU,CAAC,EACXmD,UAAU,QAIhB,MAAMyB,EAASC,OAAOC,OAAO7L,GAAK8L,KAAK,CAACC,EAAGC,IAAMA,EAAE3K,SAAW0K,EAAE1K,UAChE9H,KAAKqQ,gBAAkB+B,EAAO7N,OAAS,EAAI,CAAC6N,EAAO,IAAM,EAC3D,EAEA,SAAA7B,CAAUmC,GACR1S,KAAKuD,UAAU,KACb,MAAM6K,EAAMpO,KAAKwD,MAAM,OAASkP,GAAS,IAAM1S,KAAKwD,MAAM,OAASkP,GAC7D/F,EAAQ3M,KAAKqQ,gBAAgBtC,KAAKlG,GAAKA,EAAEC,WAAa4K,GAC5D,IAAKtE,IAAQzB,GAA8B,IAArByB,EAAIG,aAAoB,OAG9C,MAAQA,aAAcoE,EAAI9D,cAAe+D,EAAIlE,YAAamE,EAAIjE,aAAckE,GAAO1E,EAC7E2E,EAAWJ,EAAKC,EAChBI,EAAeH,EAAKC,EAE1B,IAAIG,EAAOC,EAAK,EAAGC,EAAK,EAGpBH,EAAeD,GAEjBE,EAAQH,EAAKF,EACbM,GAAML,EAAKF,EAAKM,GAAS,IAGzBA,EAAQJ,EAAKF,EACbQ,GAAML,EAAKF,EAAKK,GAAS,GAG3BtG,EAAMuF,WAAW/D,QAAQiF,IAEvB,MAAOtE,EAAKC,EAAMsE,EAAQC,GAASF,EAAEjB,OAErCiB,EAAE5F,SAAW,CACXsB,IAAMA,EAAMmE,EAAQE,EAAM,KAC1BpE,KAAOA,EAAOkE,EAAQC,EAAM,KAC5BlE,OAASsE,EAAQvE,GAAQkE,EAAS,KAClChE,QAAUoE,EAASvE,GAAOmE,EAAS,QAGvCjT,KAAKuT,gBAET,EAEA,YAAA7B,GACE1R,KAAKqQ,gBAAgBlC,QAAQtG,GAAK7H,KAAKuQ,UAAU1I,EAAEC,UACrD,EAEA,0BAAM4I,CAAqBF,GACzBxQ,KAAKsR,WAAad,EAClBxQ,KAAKuB,mBAAqBiP,EAAI/D,aAAe,OACZ,IAA7BzM,KAAKiR,aAAa1M,cAAoBvE,KAAKwT,oBAC/CxT,KAAKgR,eAAgB,CACvB,EAEA,uBAAMwC,GACJ,IACE,MAAM9L,QAAY1H,KAAKoE,MAAMC,IAAI,aACjCrE,KAAKiR,aAAevJ,EAAIvE,IAC1B,CAAE,MAAOiF,GACPpI,KAAKgF,SAASE,MAAM,WACtB,CACF,EAEA,kBAAAiM,GACE,GAAgC,SAA5BnR,KAAKuB,oBAAkCvB,KAAKuB,mBAKzC,CACL,MAAMkS,EAAWzT,KAAKiR,aAAalD,KAAKmD,GAAKA,EAAE7L,KAAOrF,KAAKuB,oBACvDkS,IACFzT,KAAKsR,WAAW7E,YAAcgH,EAASpO,GACvCrF,KAAKsR,WAAW5E,cAAgB+G,EAASxR,KACzCjC,KAAKsR,WAAWX,UAAW,EAC3B3Q,KAAKgF,SAAS,CAAEN,QAAS,QAASnC,KAAM,SAE5C,MAZEvC,KAAKsR,WAAW7E,YAAc,KAC9BzM,KAAKsR,WAAW5E,cAAgB,UAChC1M,KAAKsR,WAAWX,UAAW,EAC3B3Q,KAAKgF,SAAS,CAAEN,QAAS,UAAWnC,KAAM,YAU5CvC,KAAKgR,eAAgB,CACvB,EAEA,mBAAMD,GACJ,UACQ/Q,KAAK0T,SAAS,eAAgB,OAAQ,CAAEnR,KAAM,YACpDvC,KAAKkL,YAAa,EAElB,MAAMgD,EAAU,GAChBlO,KAAKqQ,gBAAgBlC,QAAQxB,IAC3BA,EAAMuF,WAAW/D,QAAQqC,IAEnBA,EAAI/D,aACNyB,EAAQD,KAAK,CACXnG,SAAU6E,EAAM7E,SAChB2E,YAAa+D,EAAI/D,wBAMnBzM,KAAKoE,MAAM0E,KAAK,aAAa9I,KAAK6G,+BAAgCqH,GAExElO,KAAKgF,SAASuH,QAAQ,cACtBvM,KAAK4E,MAAM,UACb,CAAE,MAAOM,GACO,WAAVA,GAAoBlF,KAAKgF,SAASE,MAAM,OAC9C,CAAE,QACAlF,KAAKkL,YAAa,CACpB,CACF,IC7PyI,MCQzI,IAAY,OACd,GACA,GACA,IACA,EACA,KACA,WACA,MAIF,GAAe,G,QCmGf,IACEjJ,KAAM,MACN0R,WAAY,CACVC,YAAW,eAAc,YAAW,QAAO,EAC3CC,aAAY,YAAW,YAAW,cAAa,kBAAgB,GAC/DC,kBAAiB,IAEnB,IAAA3Q,GACE,MAAO,CACLtC,YAAa,cACbF,WAAW,EACXJ,eAAe,EACfS,aAAc,KACdO,mBAAoB,KACpBT,mBAAoB,KACpBM,qBAAsB,KAE1B,EACA2O,SAAU,CACR,WAAAgE,GACE,MAAMC,EAAa,CAAC,eAAgB,YAAa,iBAAkB,YAAa,cAAe,iBAC/F,OAAOA,EAAWvJ,SAASzK,KAAKa,YAClC,GAEFyC,QAAS,CACP,UAAA5C,CAAWuT,GACTjU,KAAKa,YAAcoT,EACnBjU,KAAKO,eAAgB,CACvB,EACA,aAAAQ,CAAcmN,GACZlO,KAAKgB,aAAekN,EAAQrJ,KACxBqJ,EAAQ5J,OAAgC,aAAvB4J,EAAQ5J,MAAM/B,MACjCvC,KAAKc,mBAAqBoN,EAAQ5J,MAAMe,GACxCrF,KAAKa,YAAc,aAEnBb,KAAKa,YAAc,cAEvB,EACA,gBAAAI,CAAiBiN,GACflO,KAAKc,mBAAqBoN,EAAQrH,WAClC7G,KAAKgB,aAAekN,EAAQrJ,KAC5B7E,KAAKa,YAAc,WACrB,EACA,gBAAAK,CAAiBmE,GACfrF,KAAKc,mBAAqBuE,EAC1BrF,KAAKoB,qBAAuB,CAAEiE,GAAIA,GAClCrF,KAAKa,YAAc,gBACrB,EACA,aAAAM,GACEnB,KAAKc,mBAAqB,KAC1Bd,KAAKoB,qBAAuB,KAC5BpB,KAAKa,YAAc,gBACrB,EACA,WAAAQ,CAAYgE,GACVrF,KAAKuB,mBAAqB8D,EAC1BrF,KAAKa,YAAc,WACrB,EACA,UAAAS,GACEtB,KAAKuB,mBAAqB,KAC1BvB,KAAKa,YAAc,WACrB,EACA,MAAAY,GACEuH,aAAakL,WAAW,aACxBlU,KAAKa,YAAc,QACnBb,KAAKgF,SAASmP,KAAK,QACrB,ICvLwH,MCQxH,IAAY,OACd,GACArU,EACA4B,GACA,EACA,KACA,KACA,MAIF,GAAe,G,mDCTf,aAAI0S,OAAOC,eAAgB,EAC3B,aAAIC,IAAI,MACR,aAAIA,IAAI,OAIR,MAAMC,GAAS,CACb,CACEC,KAAM,2BACNvS,KAAM,gBACNsD,UAAWuO,GACX1N,OAAO,IAILqO,GAAS,IAAI,MAAU,CAC3BC,KAAM,OACNC,KAAM,sBACNJ,YAIIK,GAAWC,GAAA,EAAMC,OAAO,CAE5B3E,QAAS,uFAETzC,QAAS,IACTqH,iBAAiB,IAInBH,GAASI,aAAaC,QAAQX,IAC5BF,IACE,MAAMc,EAAQlM,aAAaoH,QAAQ,aAInC,OAHI8E,IACFd,EAAO9H,QAAQ6I,cAAgB,UAAUD,KAEpCd,GAETlP,GAASkQ,QAAQC,OAAOnQ,IAI1B0P,GAASI,aAAa7Q,SAASmQ,IAC7BnQ,GAAYA,EACZe,IAEqB,iBAAfA,EAAMoQ,MAA2BpQ,EAAMR,QAAQ+F,SAAS,WAC1D,aAAkBvF,MAAM,4BAGjBA,EAAMf,UAAsC,MAA1Be,EAAMf,SAASgF,QACxC,aAAkBlE,QAAQ,eAC1B+D,aAAakL,WAAW,cAIjBhP,EAAMf,UAAsC,MAA1Be,EAAMf,SAASgF,QACxChE,QAAQD,MAAM,mCAETkQ,QAAQC,OAAOnQ,KAM1B,aAAIqQ,UAAUnR,MAAQwQ,GAEtB,IAAI,aAAI,CACNH,UACA3U,OAAQ0V,GAAKA,EAAEC,MACdC,OAAO,O,GChFNC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CACjDxQ,GAAIwQ,EACJK,QAAQ,EACRF,QAAS,CAAC,GAUX,OANAG,EAAoBN,GAAUI,EAAQA,EAAOD,QAASJ,GAGtDK,EAAOC,QAAS,EAGTD,EAAOD,OACf,CAGAJ,EAAoBQ,EAAID,E,WC5BxBP,EAAoBS,KAAO,CAAC,C,eCA5B,IAAIC,EAAW,GACfV,EAAoBW,EAAI,SAASC,EAAQC,EAAUnN,EAAIoN,GACtD,IAAGD,EAAH,CAMA,IAAIE,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAIP,EAAS/R,OAAQsS,IAAK,CACrCJ,EAAWH,EAASO,GAAG,GACvBvN,EAAKgN,EAASO,GAAG,GACjBH,EAAWJ,EAASO,GAAG,GAE3B,IAJA,IAGIC,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASlS,OAAQwS,MACpB,EAAXL,GAAsBC,GAAgBD,IAAarE,OAAO2E,KAAKpB,EAAoBW,GAAGU,MAAM,SAAStU,GAAO,OAAOiT,EAAoBW,EAAE5T,GAAK8T,EAASM,GAAK,GAChKN,EAASS,OAAOH,IAAK,IAErBD,GAAY,EACTJ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGI,EAAW,CACbR,EAASY,OAAOL,IAAK,GACrB,IAAI3F,EAAI5H,SACEyM,IAAN7E,IAAiBsF,EAAStF,EAC/B,CACD,CACA,OAAOsF,CArBP,CAJCE,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAIP,EAAS/R,OAAQsS,EAAI,GAAKP,EAASO,EAAI,GAAG,GAAKH,EAAUG,IAAKP,EAASO,GAAKP,EAASO,EAAI,GACrGP,EAASO,GAAK,CAACJ,EAAUnN,EAAIoN,EAwB/B,C,eC5BAd,EAAoBuB,EAAI,SAASlB,GAChC,IAAImB,EAASnB,GAAUA,EAAOoB,WAC7B,WAAa,OAAOpB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAL,EAAoBxC,EAAEgE,EAAQ,CAAE5E,EAAG4E,IAC5BA,CACR,C,eCNAxB,EAAoBxC,EAAI,SAAS4C,EAASsB,GACzC,IAAI,IAAI3U,KAAO2U,EACX1B,EAAoB2B,EAAED,EAAY3U,KAASiT,EAAoB2B,EAAEvB,EAASrT,IAC5E0P,OAAOmF,eAAexB,EAASrT,EAAK,CAAE8U,YAAY,EAAMpT,IAAKiT,EAAW3U,IAG3E,C,eCPAiT,EAAoBhI,EAAI,WACvB,GAA0B,kBAAf8J,WAAyB,OAAOA,WAC3C,IACC,OAAO1X,MAAQ,IAAI2X,SAAS,cAAb,EAChB,CAAE,MAAOC,GACR,GAAsB,kBAAXpG,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBoE,EAAoB2B,EAAI,SAASM,EAAKC,GAAQ,OAAOzF,OAAOkD,UAAUwC,eAAeC,KAAKH,EAAKC,EAAO,C,eCCtGlC,EAAoB1E,EAAI,SAAS8E,GACX,qBAAXiC,QAA0BA,OAAOC,aAC1C7F,OAAOmF,eAAexB,EAASiC,OAAOC,YAAa,CAAE/V,MAAO,WAE7DkQ,OAAOmF,eAAexB,EAAS,aAAc,CAAE7T,OAAO,GACvD,C,eCNAyT,EAAoBuC,IAAM,SAASlC,GAGlC,OAFAA,EAAOmC,MAAQ,GACVnC,EAAOoC,WAAUpC,EAAOoC,SAAW,IACjCpC,CACR,C,eCCA,IAAIqC,EAAkB,CACrB,IAAK,GAaN1C,EAAoBW,EAAEQ,EAAI,SAASwB,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4BtV,GAC/D,IAKI0S,EAAU0C,EALV9B,EAAWtT,EAAK,GAChBuV,EAAcvV,EAAK,GACnBwV,EAAUxV,EAAK,GAGI0T,EAAI,EAC3B,GAAGJ,EAASmC,KAAK,SAASvT,GAAM,OAA+B,IAAxBiT,EAAgBjT,EAAW,GAAI,CACrE,IAAIwQ,KAAY6C,EACZ9C,EAAoB2B,EAAEmB,EAAa7C,KACrCD,EAAoBQ,EAAEP,GAAY6C,EAAY7C,IAGhD,GAAG8C,EAAS,IAAInC,EAASmC,EAAQ/C,EAClC,CAEA,IADG6C,GAA4BA,EAA2BtV,GACrD0T,EAAIJ,EAASlS,OAAQsS,IACzB0B,EAAU9B,EAASI,GAChBjB,EAAoB2B,EAAEe,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAO3C,EAAoBW,EAAEC,EAC9B,EAEIqC,EAAqBC,KAAK,iCAAmCA,KAAK,kCAAoC,GAC1GD,EAAmB1K,QAAQqK,EAAqBO,KAAK,KAAM,IAC3DF,EAAmB5K,KAAOuK,EAAqBO,KAAK,KAAMF,EAAmB5K,KAAK8K,KAAKF,G,IC/CvF,IAAIG,EAAsBpD,EAAoBW,OAAER,EAAW,CAAC,KAAM,WAAa,OAAOH,EAAoB,KAAO,GACjHoD,EAAsBpD,EAAoBW,EAAEyC,E","sources":["webpack://ccu-rfid-frontend/./src/App.vue?7be2","webpack://ccu-rfid-frontend/./src/components/RFIDLanding.vue?c811","webpack://ccu-rfid-frontend/src/components/RFIDLanding.vue","webpack://ccu-rfid-frontend/./src/components/RFIDLanding.vue?32a2","webpack://ccu-rfid-frontend/./src/components/RFIDLanding.vue","webpack://ccu-rfid-frontend/./src/components/ActivityMenu.vue?33e2","webpack://ccu-rfid-frontend/src/components/ActivityMenu.vue","webpack://ccu-rfid-frontend/./src/components/ActivityMenu.vue?a65a","webpack://ccu-rfid-frontend/./src/components/ActivityMenu.vue","webpack://ccu-rfid-frontend/./src/components/Slideshow.vue?db3a","webpack://ccu-rfid-frontend/src/components/Slideshow.vue","webpack://ccu-rfid-frontend/./src/components/Slideshow.vue?3cab","webpack://ccu-rfid-frontend/./src/components/Slideshow.vue","webpack://ccu-rfid-frontend/./src/components/Login.vue?d821","webpack://ccu-rfid-frontend/src/components/Login.vue","webpack://ccu-rfid-frontend/./src/components/Login.vue?47fe","webpack://ccu-rfid-frontend/./src/components/Login.vue","webpack://ccu-rfid-frontend/./src/components/ActivityList.vue?1364","webpack://ccu-rfid-frontend/src/components/ActivityList.vue","webpack://ccu-rfid-frontend/./src/components/ActivityList.vue?ca19","webpack://ccu-rfid-frontend/./src/components/ActivityList.vue","webpack://ccu-rfid-frontend/./src/components/ElderList.vue?128c","webpack://ccu-rfid-frontend/src/components/ElderList.vue","webpack://ccu-rfid-frontend/./src/components/ElderList.vue?b49f","webpack://ccu-rfid-frontend/./src/components/ElderList.vue","webpack://ccu-rfid-frontend/./src/components/ElderEdit.vue?1d95","webpack://ccu-rfid-frontend/src/components/ElderEdit.vue","webpack://ccu-rfid-frontend/./src/components/ElderEdit.vue?2d2f","webpack://ccu-rfid-frontend/./src/components/ElderEdit.vue","webpack://ccu-rfid-frontend/./src/components/AIScreening.vue?2868","webpack://ccu-rfid-frontend/src/components/AIScreening.vue","webpack://ccu-rfid-frontend/./src/components/AIScreening.vue?6f49","webpack://ccu-rfid-frontend/./src/components/AIScreening.vue","webpack://ccu-rfid-frontend/./src/components/ActivityManage.vue?2afa","webpack://ccu-rfid-frontend/src/components/ActivityManage.vue","webpack://ccu-rfid-frontend/./src/components/ActivityManage.vue?09a9","webpack://ccu-rfid-frontend/./src/components/ActivityManage.vue","webpack://ccu-rfid-frontend/./src/components/AIRecognitionView.vue?7943","webpack://ccu-rfid-frontend/src/components/AIRecognitionView.vue","webpack://ccu-rfid-frontend/./src/components/AIRecognitionView.vue?2ad9","webpack://ccu-rfid-frontend/./src/components/AIRecognitionView.vue","webpack://ccu-rfid-frontend/src/App.vue","webpack://ccu-rfid-frontend/./src/App.vue?6a4a","webpack://ccu-rfid-frontend/./src/App.vue","webpack://ccu-rfid-frontend/./src/main.js","webpack://ccu-rfid-frontend/webpack/bootstrap","webpack://ccu-rfid-frontend/webpack/runtime/amd options","webpack://ccu-rfid-frontend/webpack/runtime/chunk loaded","webpack://ccu-rfid-frontend/webpack/runtime/compat get default export","webpack://ccu-rfid-frontend/webpack/runtime/define property getters","webpack://ccu-rfid-frontend/webpack/runtime/global","webpack://ccu-rfid-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://ccu-rfid-frontend/webpack/runtime/make namespace object","webpack://ccu-rfid-frontend/webpack/runtime/node module decorator","webpack://ccu-rfid-frontend/webpack/runtime/jsonp chunk loading","webpack://ccu-rfid-frontend/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.debugMode)?_c('div',{staticClass:\"side-debug-trigger\",on:{\"click\":function($event){_vm.drawerVisible = true}}},[_c('i',{staticClass:\"el-icon-setting\"}),_c('span',[_vm._v(\"快速切換\")])]):_vm._e(),_c('el-drawer',{attrs:{\"title\":\"開發者控制台\",\"visible\":_vm.drawerVisible,\"direction\":\"ltr\",\"size\":\"220px\",\"custom-class\":\"debug-drawer\"},on:{\"update:visible\":function($event){_vm.drawerVisible=$event}}},[_c('div',{staticClass:\"drawer-content\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"頁面切換\")]),_c('div',{staticClass:\"drawer-buttons\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\",\"icon\":\"el-icon-s-home\"},on:{\"click\":function($event){return _vm.switchView('RFIDLanding')}}},[_vm._v(\"長者端 (首頁)\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\",\"icon\":\"el-icon-s-custom\"},on:{\"click\":function($event){return _vm.switchView('Login')}}},[_vm._v(\"行政管理端\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"info\",\"plain\":\"\",\"icon\":\"el-icon-view\"},on:{\"click\":function($event){_vm.debugMode = false}}},[_vm._v(\"徹底隱藏工具\")])],1),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"系統狀態\")]),_c('ul',{staticClass:\"status-list\"},[_c('li',[_vm._v(\"目前視圖: \"+_vm._s(_vm.currentView))]),_c('li',[_vm._v(\"活動 ID: \"+_vm._s(_vm.selectedActivityId || '無'))])])],1)]),_c('div',{staticClass:\"container\"},[(_vm.currentView === 'RFIDLanding')?_c('RFIDLanding',{on:{\"scan-success\":_vm.onScanSuccess}}):(_vm.currentView === 'ActivityMenu')?_c('ActivityMenu',{attrs:{\"rfid\":_vm.selectedRfid},on:{\"select-activity\":_vm.onSelectActivity,\"go-back\":function($event){_vm.currentView = 'RFIDLanding'}}}):(_vm.currentView === 'Slideshow')?_c('Slideshow',{attrs:{\"rfid\":_vm.selectedRfid,\"activityId\":_vm.selectedActivityId},on:{\"go-back\":function($event){_vm.currentView = 'ActivityMenu'}}}):(_vm.currentView === 'Login')?_c('Login',{on:{\"login-success\":function($event){_vm.currentView = 'ActivityList'}}}):(_vm.currentView === 'ActivityList')?_c('ActivityList',{on:{\"manage-activity\":_vm.onManageActivity,\"add-activity\":_vm.onAddActivity}}):(_vm.currentView === 'ActivityManage')?_c('ActivityManage',{attrs:{\"selectedActivity\":_vm.activeActivityObject},on:{\"go-back\":function($event){_vm.currentView = 'ActivityList'},\"go-screening\":function($event){_vm.currentView = 'AIScreening'},\"go-recognition\":function($event){_vm.currentView = 'AIRecognition'}}}):(_vm.currentView === 'AIRecognition')?_c('AIRecognitionView',{attrs:{\"activityId\":_vm.selectedActivityId},on:{\"go-back\":function($event){_vm.currentView = 'ActivityManage'}}}):(_vm.currentView === 'AIScreening')?_c('AIScreening',{attrs:{\"activityId\":_vm.selectedActivityId},on:{\"go-back\":function($event){_vm.currentView = 'ActivityManage'}}}):(_vm.currentView === 'ElderList')?_c('ElderList',{on:{\"edit-elder\":_vm.onEditElder,\"add-elder\":_vm.onAddElder}}):(_vm.currentView === 'ElderEdit')?_c('ElderEdit',{attrs:{\"elderId\":_vm.selectedResidentId},on:{\"go-back\":function($event){_vm.currentView = 'ElderList'}}}):_c('p',{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"50px\"}},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 系統正在準備中... \")])],1),(_vm.isAdminView)?_c('div',{staticClass:\"admin-nav\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-s-order\"},on:{\"click\":function($event){_vm.currentView = 'ActivityList'}}},[_vm._v(\"活動列表\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-user-solid\"},on:{\"click\":function($event){_vm.currentView = 'ElderList'}}},[_vm._v(\"長者管理\")]),_c('el-button',{staticStyle:{\"color\":\"#F56C6C\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.logout}},[_vm._v(\"安全登出\")])],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"landing-container\"},[_c('div',{staticClass:\"bg-glow\"}),_c('div',{staticClass:\"content-box\"},[_c('h1',{staticClass:\"main-title\"},[_vm._v(\"回憶時光機\")]),_c('p',{staticClass:\"sub-title\"},[_vm._v(\"請輕碰感應卡，開啟您的專屬記憶\")]),_c('div',{staticClass:\"rfid-icon-wrapper\",class:{ 'scanning': _vm.loading }},[_c('div',{staticClass:\"rfid-main-circle\"},[_c('div',{staticClass:\"rfid-icon\"},[_c('i',{staticClass:\"el-icon-bank-card\",staticStyle:{\"font-size\":\"90px\"}}),(_vm.loading)?_c('div',{staticClass:\"scan-line\"}):_vm._e()])]),_c('div',{staticClass:\"ripple\"}),_c('div',{staticClass:\"ripple delay-1\"})]),_c('p',{staticClass:\"status-text\"},[_c('i',{class:_vm.loading ? 'el-icon-loading' : 'el-icon-place'}),_vm._v(\" \"+_vm._s(_vm.loading ? `正在讀取您的珍貴回憶... (${_vm.countdown}s)` : '等待感應中')+\" \")]),_c('el-button',{staticClass:\"glass-start-button\",attrs:{\"type\":\"warning\",\"loading\":_vm.loading},on:{\"click\":_vm.handleStart}},[_vm._v(\" \"+_vm._s(_vm.loading ? '請刷卡...' : '開始感應')+\" \")])],1),_vm._m(0),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.scanBuffer),expression:\"scanBuffer\"}],ref:\"rfidInput\",staticClass:\"rfid-input\",attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.scanBuffer)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();return _vm.onScanComplete.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.scanBuffer=$event.target.value}}})])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"footer-section\"},[_c('div',{staticClass:\"footer-info\"},[_c('span',{staticClass:\"dot\"}),_vm._v(\" 智慧 RFID 系統正在運作中 \"),_c('span',{staticClass:\"dot\"})])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"landing-container\">\n    <div class=\"bg-glow\"></div>\n    \n    <div class=\"content-box\">\n      <h1 class=\"main-title\">回憶時光機</h1>\n      <p class=\"sub-title\">請輕碰感應卡，開啟您的專屬記憶</p>\n\n      <div class=\"rfid-icon-wrapper\" :class=\"{ 'scanning': loading }\">\n        <div class=\"rfid-main-circle\">\n          <div class=\"rfid-icon\">\n            <i class=\"el-icon-bank-card\" style=\"font-size: 90px;\"></i>\n            <div v-if=\"loading\" class=\"scan-line\"></div>\n          </div>\n        </div>\n        <div class=\"ripple\"></div>\n        <div class=\"ripple delay-1\"></div>\n      </div>\n      \n      <p class=\"status-text\">\n        <i :class=\"loading ? 'el-icon-loading' : 'el-icon-place'\"></i>\n        {{ loading ? `正在讀取您的珍貴回憶... (${countdown}s)` : '等待感應中' }}\n      </p>\n\n      <el-button \n        type=\"warning\" \n        @click=\"handleStart\" \n        class=\"glass-start-button\"\n        :loading=\"loading\"\n      >\n        {{ loading ? '請刷卡...' : '開始感應' }}\n      </el-button>\n    </div>\n\n    <div class=\"footer-section\">\n      <div class=\"footer-info\">\n        <span class=\"dot\"></span> 智慧 RFID 系統正在運作中 <span class=\"dot\"></span>\n      </div>\n    </div>\n\n    <input\n      class=\"rfid-input\"\n      ref=\"rfidInput\"\n      v-model=\"scanBuffer\"\n      @keydown.enter.prevent=\"onScanComplete\"\n      type=\"text\"\n      autocomplete=\"off\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'RFIDLanding',\n  data() {\n    return {\n      loading: false,\n      scanBuffer: '',\n      scanTimer: null,\n      countdown: 3,\n      countdownTimer: null\n    };\n  },\n  methods: {\n    async handleStart() {\n      this.loading = true;\n      this.scanBuffer = '';\n      this.countdown = 3;\n\n      // 自動聚焦，準備接收刷卡器訊號\n      this.$nextTick(() => {\n        if (this.$refs.rfidInput) this.$refs.rfidInput.focus();\n      });\n\n      this.countdownTimer = setInterval(() => {\n        if (this.countdown > 1) this.countdown--;\n      }, 1000);\n\n      // 若 3 秒內未感應，轉入 Demo 模式\n      this.scanTimer = setTimeout(() => {\n        if (this.loading) this.enterDemoMode();\n      }, 3000);\n    },\n\n    async onScanComplete() {\n      clearTimeout(this.scanTimer);\n      clearInterval(this.countdownTimer);\n\n      const cardUid = this.scanBuffer.trim();\n      this.scanBuffer = '';\n\n      if (!cardUid) {\n        this.enterDemoMode();\n        return;\n      }\n      await this.processRfid(cardUid);\n    },\n\n    async processRfid(cardUid) {\n      try {\n        // 修正：路徑統一使用相對路徑，讓攔截器處理 /manager-api 前綴\n        // 發送 GET 至 .../manager-api/rfid/${cardUid}\n        const response = await this.$http.get(`/rfid/${cardUid}`);\n\n        if (response.data.match && response.data.match.length > 0) {\n          const target = response.data.match[0];\n\n          this.$notify({\n            title: '感應成功',\n            message: target.type === 'subject' \n              ? `${target.name} 您好，歡迎回到時光機！` \n              : `請觀賞 ${target.name} 活動相簿`,\n            type: 'success',\n            position: 'top-left'\n          });\n\n          // 跳轉傳遞：統一使用 rfid 變數名\n          setTimeout(() => {\n            this.$emit('scan-success', {\n              rfid: cardUid,\n              match: target,\n              activities: response.data.activitys || []\n            });\n          }, 1000);\n        } else {\n          this.$message.warning('查無此卡片資料，請聯絡管理員登記');\n          this.loading = false;\n        }\n      } catch (error) {\n        console.warn('API 錯誤或冷啟動，轉入 Demo', error);\n        this.enterDemoMode();\n      }\n    },\n\n    enterDemoMode() {\n      clearTimeout(this.scanTimer);\n      clearInterval(this.countdownTimer);\n      this.loading = false;\n\n      this.$message({\n        message: '【Demo 模式】歡迎回來，唐伯虎先生！',\n        type: 'warning'\n      });\n\n      setTimeout(() => {\n        this.$emit('scan-success', {\n          rfid: '116A2434',\n          match: { type: 'subject', name: '唐伯虎', id: '9527' },\n          activities: []\n        });\n      }, 1200);\n    }\n  },\n  beforeDestroy() {\n    clearTimeout(this.scanTimer);\n    clearInterval(this.countdownTimer);\n  }\n};\n</script>\n\n<style scoped>\n/* 樣式保持原有的美觀設計 */\n.landing-container { \n  display: flex; flex-direction: column; align-items: center; justify-content: center; \n  min-height: 100vh; background: radial-gradient(circle at center, #fffaf5 0%, #f7f1e9 100%);\n  position: relative; overflow: hidden;\n}\n.bg-glow { position: absolute; width: 600px; height: 600px; background: radial-gradient(circle, rgba(255,153,51,0.1) 0%, transparent 70%); top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 0; }\n.content-box { position: relative; z-index: 1; text-align: center; }\n.main-title { font-size: 48px; color: #5d5146; margin: 0; font-weight: 800; letter-spacing: 4px; }\n.sub-title { font-size: 20px; color: #9a8c7d; margin: 15px 0 50px 0; }\n.rfid-icon-wrapper { position: relative; width: 280px; height: 280px; margin: 0 auto 50px auto; display: flex; justify-content: center; align-items: center; }\n.rfid-main-circle { width: 200px; height: 200px; background: linear-gradient(135deg, #FFB366 0%, #FF9933 100%); border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 15px 35px rgba(255, 153, 51, 0.4), inset 0 -5px 10px rgba(0,0,0,0.1); position: relative; z-index: 2; overflow: hidden; }\n.rfid-icon { color: white; transition: 0.3s; }\n.scan-line { position: absolute; width: 100%; height: 4px; background: rgba(255, 255, 255, 0.6); filter: blur(2px); top: 0; left: 0; animation: scan-anim 2s infinite linear; }\n@keyframes scan-anim { 0% { top: -10%; } 100% { top: 110%; } }\n.ripple { position: absolute; width: 100%; height: 100%; border: 2px solid #FF9933; border-radius: 50%; opacity: 0; animation: ripple-anim 3s infinite linear; }\n.delay-1 { animation-delay: 1.5s; }\n@keyframes ripple-anim { 0% { transform: scale(0.7); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: scale(1.5); opacity: 0; } }\n.status-text { font-size: 20px; color: #7a6f64; margin-bottom: 40px; }\n.glass-start-button { width: 260px; height: 75px; font-size: 28px; font-weight: bold; border-radius: 40px; background: #FF9933; border: none; box-shadow: 0 8px 20px rgba(255, 153, 51, 0.3); transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); color: white; }\n.glass-start-button:hover { transform: translateY(-5px) scale(1.05); background: #FFB366; }\n.footer-section { position: absolute; bottom: 40px; width: 100%; text-align: center; }\n.footer-info { font-size: 14px; color: #b5aaa0; letter-spacing: 1px; }\n.dot { display: inline-block; width: 6px; height: 6px; background: #FF9933; border-radius: 50%; margin: 0 10px; opacity: 0.5; }\n.auth-warning { margin-top: 15px; color: #f56c6c; font-size: 14px; font-weight: bold; background: rgba(245, 108, 108, 0.1); padding: 8px 20px; border-radius: 20px; display: inline-block; }\n.rfid-input { position: absolute; opacity: 0; pointer-events: none; height: 0; width: 0; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RFIDLanding.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RFIDLanding.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RFIDLanding.vue?vue&type=template&id=b26aab7c&scoped=true\"\nimport script from \"./RFIDLanding.vue?vue&type=script&lang=js\"\nexport * from \"./RFIDLanding.vue?vue&type=script&lang=js\"\nimport style0 from \"./RFIDLanding.vue?vue&type=style&index=0&id=b26aab7c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b26aab7c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"activity-menu-container\"},[_c('div',{staticClass:\"header-playback\"},[_c('h1',{staticClass:\"main-title\"},[_vm._v(\"回憶照片牆\")]),(_vm.residentName)?_c('el-tag',{staticClass:\"identity-tag\",attrs:{\"type\":\"warning\",\"effect\":\"dark\"}},[_c('i',{staticClass:\"el-icon-user\"}),_vm._v(\" 歡迎：\"+_vm._s(_vm.residentName)+\" \")]):_vm._e(),_c('el-button',{staticClass:\"back-button\",attrs:{\"type\":\"warning\"},on:{\"click\":_vm.handleBack}},[_vm._v(\"返回\")])],1),_c('p',{staticClass:\"prompt-text\"},[_vm._v(\"點選活動封面即可開始播放您的精彩回憶\")]),_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"gutter\":30}},_vm._l((_vm.activityList),function(activity){return _c('el-col',{key:activity.id,staticClass:\"activity-col\",attrs:{\"span\":8}},[_c('el-card',{staticClass:\"activity-card\",attrs:{\"shadow\":\"hover\"},nativeOn:{\"click\":function($event){return _vm.handleSelectActivity(activity)}}},[_c('div',{staticClass:\"activity-content\"},[_c('el-image',{staticClass:\"activity-image\",attrs:{\"src\":activity.cover || _vm.getDefaultCover(),\"fit\":\"cover\"}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])]),_c('div',{staticClass:\"activity-info\"},[_c('p',{staticClass:\"activity-name\"},[_vm._v(_vm._s(activity.name))]),_c('p',{staticClass:\"activity-date\"},[_c('i',{staticClass:\"el-icon-date\"}),_vm._v(\" \"+_vm._s(activity.date)+\" \"),(activity.photoCount)?_c('span',[_vm._v(\" (\"+_vm._s(activity.photoCount)+\"張)\")]):_vm._e()])])],1)])],1)}),1),(!_vm.loading && _vm.activityList.length === 0)?_c('el-empty',{attrs:{\"description\":\"目前尚無相關活動照片\"}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"activity-menu-container\">\n    <div class=\"header-playback\">\n      <h1 class=\"main-title\">回憶照片牆</h1>\n      <el-tag v-if=\"residentName\" type=\"warning\" effect=\"dark\" class=\"identity-tag\">\n        <i class=\"el-icon-user\"></i> 歡迎：{{ residentName }}\n      </el-tag>\n      <el-button type=\"warning\" @click=\"handleBack\" class=\"back-button\">返回</el-button>\n    </div>\n\n    <p class=\"prompt-text\">點選活動封面即可開始播放您的精彩回憶</p>\n\n    <el-row :gutter=\"30\" v-loading=\"loading\">\n      <el-col :span=\"8\" v-for=\"activity in activityList\" :key=\"activity.id\" class=\"activity-col\">\n        <el-card shadow=\"hover\" class=\"activity-card\" @click.native=\"handleSelectActivity(activity)\">\n          <div class=\"activity-content\">\n            <el-image \n              :src=\"activity.cover || getDefaultCover()\" \n              class=\"activity-image\"\n              fit=\"cover\"\n            >\n              <div slot=\"error\" class=\"image-slot\">\n                <i class=\"el-icon-picture-outline\"></i>\n              </div>\n            </el-image>\n            <div class=\"activity-info\">\n              <p class=\"activity-name\">{{ activity.name }}</p>\n              <p class=\"activity-date\">\n                <i class=\"el-icon-date\"></i> {{ activity.date }} \n                <span v-if=\"activity.photoCount\"> ({{ activity.photoCount }}張)</span>\n              </p>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n    \n    <el-empty v-if=\"!loading && activityList.length === 0\" description=\"目前尚無相關活動照片\"></el-empty>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ActivityMenu',\n  // 修正點 2: 將 props 名稱從 rfid_uid 統一改為 rfid\n  props: ['rfid'], \n  data() {\n    return {\n      loading: false,\n      residentName: '',\n      activityList: []\n    };\n  },\n  mounted() {\n    // 修正點 3: 檢查 rfid 變數\n    if (this.rfid) {\n      this.fetchDataByRfid();\n    } else {\n      this.loadMockActivities();\n    }\n  },\n  methods: {\n    getDefaultCover() {\n      return 'https://images.unsplash.com/photo-1516733725897-1aa73b87c8e8?w=600';\n    },\n\n    async fetchDataByRfid() {\n      this.loading = true;\n      try {\n        // 修正點 4: 移除 /api/，路徑與 main.js 的 baseURL 對接\n        // 發送至 /manager-api/rfid/{rfid}\n        const response = await this.$http.get(`/rfid/${this.rfid}`);\n        \n        // 1. 取得長輩身分資訊\n        if (response.data.match && response.data.match.length > 0) {\n          const matchInfo = response.data.match[0];\n          this.residentName = matchInfo.name; \n        }\n\n        // 2. 對接後端 activitys 陣列結構\n        if (response.data.activitys && response.data.activitys.length > 0) {\n          this.activityList = response.data.activitys.map(item => ({\n            id: item.id,\n            name: item.title,\n            date: item.activity_at,\n            cover: item.cover,\n            photoCount: item.photo_count\n          }));\n        }\n      } catch (error) {\n        console.error(\"RFID 查詢失敗\", error);\n        this.$message.error('連線失敗，啟動示範模式');\n        this.loadMockActivities();\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    loadMockActivities() {\n      this.residentName = \"示範長者\";\n      this.activityList = [\n        { id: '2', name: '象棋大賽', date: '2025-12-18', photoCount: 6, cover: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=600' },\n        { id: '7', name: '話劇表演', date: '2025-12-24', photoCount: 2, cover: 'https://images.unsplash.com/photo-1576765608535-5f04d1e3f289?w=600' }\n      ];\n    },\n\n    handleSelectActivity(activity) {\n      this.$emit('select-activity', {\n        activityId: activity.id,\n        // 修正點 5: 傳遞變數名改為 rfid\n        rfid: this.rfid\n      });\n    },\n    \n    handleBack() {\n      this.$emit('go-back');\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 樣式部分保持不變 */\n.activity-menu-container { padding: 40px; background-color: #fffaf5; min-height: 100vh; }\n.header-playback { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 3px solid #f0e6da; padding-bottom: 20px; }\n.main-title { font-size: 32px; color: #5d5146; font-weight: bold; }\n.identity-tag { font-size: 18px; padding: 10px 20px; border-radius: 15px; margin-right: auto; margin-left: 20px; height: auto; line-height: 1.2; }\n.prompt-text { color: #8c7e71; font-size: 18px; margin-bottom: 40px; }\n.activity-card { border-radius: 24px; cursor: pointer; transition: all 0.3s ease; border: none; overflow: hidden; background: white; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }\n.activity-card:hover { transform: translateY(-12px); box-shadow: 0 15px 30px rgba(255, 153, 51, 0.2); }\n.activity-image { width: 100%; height: 240px; display: block; }\n.activity-info { padding: 20px; text-align: center; }\n.activity-name { font-size: 20px; font-weight: bold; color: #333; margin: 0 0 8px 0; }\n.activity-date { font-size: 16px; color: #909399; margin: 0; }\n.back-button { background-color: #FF9933; border-color: #FF9933; color: white; font-weight: bold; padding: 12px 30px; border-radius: 25px; font-size: 18px; transition: 0.3s; }\n.back-button:hover { background-color: #FFB366; opacity: 0.9; }\n.activity-col { margin-bottom: 30px; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityMenu.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityMenu.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ActivityMenu.vue?vue&type=template&id=96c99324&scoped=true\"\nimport script from \"./ActivityMenu.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityMenu.vue?vue&type=script&lang=js\"\nimport style0 from \"./ActivityMenu.vue?vue&type=style&index=0&id=96c99324&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"96c99324\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"slideshow-container\"},[_c('div',{staticClass:\"header-playback\"},[_c('div',{staticClass:\"title-group\"},[_c('h1',{staticClass:\"main-title\"},[_vm._v(\"回憶播放中\")]),(_vm.activityName)?_c('span',{staticClass:\"activity-info\"},[_c('i',{staticClass:\"el-icon-collection-tag\"}),_vm._v(\" \"+_vm._s(_vm.activityName)+\" \")]):_vm._e()]),_c('el-button',{staticClass:\"back-button\",attrs:{\"type\":\"warning\",\"icon\":\"el-icon-close\"},on:{\"click\":_vm.handleBack}},[_vm._v(\"結束放映\")])],1),_c('el-card',{staticClass:\"slideshow-area\",attrs:{\"shadow\":\"always\"}},[_c('div',{staticClass:\"photo-display\"},[(_vm.photoList.length > 1)?_c('div',{staticClass:\"nav-arrow left-arrow\",on:{\"click\":_vm.prevPhoto}},[_c('i',{staticClass:\"el-icon-arrow-left\"})]):_vm._e(),_c('div',{staticClass:\"current-photo-container\"},[_c('transition',{attrs:{\"name\":\"photo-fade\",\"mode\":\"out-in\"}},[(_vm.photoList.length > 0)?_c('el-image',{key:_vm.currentPhotoIndex,staticClass:\"main-photo\",attrs:{\"src\":_vm.photoList[_vm.currentPhotoIndex].url,\"fit\":\"contain\"}},[_c('div',{staticClass:\"image-loading\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 正在翻開您的回憶錄... \")]),_c('div',{staticClass:\"image-error\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"}),_vm._v(\" 哎呀，這段記憶暫時跑掉了 \")])]):(_vm.loading)?_c('div',{staticClass:\"current-photo-placeholder\"},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 正在開啟時光機... \")]):_c('div',{staticClass:\"current-photo-placeholder\"},[_vm._v(\"目前此活動尚無相關照片\")])],1)],1),(_vm.photoList.length > 1)?_c('div',{staticClass:\"nav-arrow right-arrow\",on:{\"click\":_vm.nextPhoto}},[_c('i',{staticClass:\"el-icon-arrow-right\"})]):_vm._e()])]),_c('div',{staticClass:\"controls-bar\"},[_c('div',{staticClass:\"control-panel\"},[_c('el-button',{staticClass:\"play-btn\",attrs:{\"type\":_vm.isPlaying ? 'info' : 'warning',\"circle\":\"\",\"icon\":_vm.isPlaying ? 'el-icon-video-pause' : 'el-icon-video-play'},on:{\"click\":_vm.togglePlay}}),_c('div',{staticClass:\"counter-badge\"},[_c('span',{staticClass:\"current\"},[_vm._v(_vm._s(_vm.photoList.length > 0 ? _vm.currentPhotoIndex + 1 : 0))]),_c('span',{staticClass:\"separator\"},[_vm._v(\"/\")]),_c('span',{staticClass:\"total\"},[_vm._v(_vm._s(_vm.photoList.length))])])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"slideshow-container\">\n    <div class=\"header-playback\">\n      <div class=\"title-group\">\n        <h1 class=\"main-title\">回憶播放中</h1>\n        <span class=\"activity-info\" v-if=\"activityName\">\n          <i class=\"el-icon-collection-tag\"></i> {{ activityName }}\n        </span>\n      </div>\n      <el-button type=\"warning\" @click=\"handleBack\" class=\"back-button\" icon=\"el-icon-close\">結束放映</el-button>\n    </div>\n\n    <el-card shadow=\"always\" class=\"slideshow-area\">\n      <div class=\"photo-display\">\n        <div class=\"nav-arrow left-arrow\" @click=\"prevPhoto\" v-if=\"photoList.length > 1\">\n          <i class=\"el-icon-arrow-left\"></i>\n        </div>\n        \n        <div class=\"current-photo-container\">\n          <transition name=\"photo-fade\" mode=\"out-in\">\n            <el-image \n              :key=\"currentPhotoIndex\"\n              v-if=\"photoList.length > 0\"\n              :src=\"photoList[currentPhotoIndex].url\" \n              fit=\"contain\"\n              class=\"main-photo\"\n            >\n              <div slot=\"placeholder\" class=\"image-loading\">\n                <i class=\"el-icon-loading\"></i> 正在翻開您的回憶錄...\n              </div>\n              <div slot=\"error\" class=\"image-error\">\n                <i class=\"el-icon-picture-outline\"></i> 哎呀，這段記憶暫時跑掉了\n              </div>\n            </el-image>\n            <div v-else-if=\"loading\" class=\"current-photo-placeholder\">\n              <i class=\"el-icon-loading\"></i> 正在開啟時光機...\n            </div>\n            <div v-else class=\"current-photo-placeholder\">目前此活動尚無相關照片</div>\n          </transition>\n        </div>\n\n        <div class=\"nav-arrow right-arrow\" @click=\"nextPhoto\" v-if=\"photoList.length > 1\">\n          <i class=\"el-icon-arrow-right\"></i>\n        </div>\n      </div>\n    </el-card>\n\n    <div class=\"controls-bar\">\n      <div class=\"control-panel\">\n        <el-button \n          :type=\"isPlaying ? 'info' : 'warning'\" \n          @click=\"togglePlay\" \n          circle \n          class=\"play-btn\" \n          :icon=\"isPlaying ? 'el-icon-video-pause' : 'el-icon-video-play'\"\n        ></el-button>\n        <div class=\"counter-badge\">\n          <span class=\"current\">{{ photoList.length > 0 ? currentPhotoIndex + 1 : 0 }}</span>\n          <span class=\"separator\">/</span>\n          <span class=\"total\">{{ photoList.length }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Slideshow',\n  props: ['activityId', 'rfid'],\n  data() {\n    return {\n      loading: false,\n      isPlaying: true,\n      currentPhotoIndex: 0,\n      photoList: [],\n      activityName: '',\n      timer: null\n    };\n  },\n  mounted() {\n    this.fetchPhotos();\n    this.startTimer();\n  },\n  beforeDestroy() {\n    this.stopTimer();\n  },\n  methods: {\n    async fetchPhotos() {\n      this.loading = true;\n      try {\n        // 修正點 1：移除 /api/ 前綴，改用相對路徑。\n        // 配合 main.js 的 baseURL，這會請求至 .../manager-api/activities/{id}/photos\n        const res = await this.$http.get(`/activities/${this.activityId}/photos`, {\n          params: { rfid: this.rfid }\n        });\n        \n\n        if (res.data.photos && res.data.photos.length > 0) {\n          this.photoList = res.data.photos.map(p => ({\n            id: p.id || p.photo_id,\n            url: p.image_url || p.photo_url, \n            taken_at: p.taken_at\n          }));\n          this.activityName = res.data.activity_title || `活動編號 #${this.activityId}`;\n        } else {\n          this.loadMockPhotos(); \n        }\n      } catch (err) {\n        console.warn('API 抓取失敗，啟動示範模式');\n        this.loadMockPhotos(); \n      } finally {\n        this.loading = false;\n      }\n    },\n\n    loadMockPhotos() {\n      this.activityName = '時光記憶精選 (示範模式)';\n      // 修正點 2：使用穩定的絕對路徑確保 Demo 時圖片一定會出來\n      const baseUrl = \"https://ee16389-alt.github.io/ccu-rfid-frontend/slideshow/\";\n      this.photoList = [\n        { url: `${baseUrl}activity1.png` }, \n        { url: `${baseUrl}activity2.png` }, \n        { url: `${baseUrl}activity3.png` }, \n        { url: `${baseUrl}activity4.png` }\n      ];\n    },\n\n    startTimer() {\n      this.timer = setInterval(() => {\n        if (this.isPlaying && this.photoList.length > 1) {\n          this.nextPhoto();\n        }\n      }, 6000); \n    },\n    stopTimer() {\n      if (this.timer) clearInterval(this.timer);\n    },\n    togglePlay() {\n      this.isPlaying = !this.isPlaying;\n    },\n    prevPhoto() {\n      this.currentPhotoIndex = (this.currentPhotoIndex - 1 + this.photoList.length) % this.photoList.length;\n    },\n    nextPhoto() {\n      this.currentPhotoIndex = (this.currentPhotoIndex + 1) % this.photoList.length;\n    },\n    handleBack() {\n      this.$emit('go-back');\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 此處保留您原本的樣式即可 */\n.slideshow-container { padding: 30px; background-color: #333; min-height: 100vh; color: white; }\n.header-playback { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\n.main-title { font-size: 28px; margin: 0; color: #FF9933; }\n.slideshow-area { background-color: #000; border: none; position: relative; height: 70vh; display: flex; align-items: center; justify-content: center; }\n.photo-display { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }\n.main-photo { max-width: 100%; max-height: 100%; }\n.nav-arrow { position: absolute; top: 50%; transform: translateY(-50%); font-size: 50px; color: rgba(255,255,255,0.5); cursor: pointer; z-index: 10; transition: 0.3s; }\n.nav-arrow:hover { color: #FF9933; scale: 1.2; }\n.left-arrow { left: 20px; }\n.right-arrow { right: 20px; }\n.controls-bar { margin-top: 30px; text-align: center; }\n.control-panel { display: inline-flex; align-items: center; background: rgba(255,255,255,0.1); padding: 10px 30px; border-radius: 40px; }\n.play-btn { font-size: 30px; margin-right: 20px; }\n.counter-badge { font-size: 24px; font-family: monospace; }\n.current { color: #FF9933; font-weight: bold; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Slideshow.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Slideshow.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Slideshow.vue?vue&type=template&id=8d643482&scoped=true\"\nimport script from \"./Slideshow.vue?vue&type=script&lang=js\"\nexport * from \"./Slideshow.vue?vue&type=script&lang=js\"\nimport style0 from \"./Slideshow.vue?vue&type=style&index=0&id=8d643482&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8d643482\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-wrapper\"},[_c('div',{staticClass:\"login-box\"},[_vm._m(0),_c('el-card',{staticClass:\"login-card\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"login-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('img',{staticClass:\"login-logo\",attrs:{\"src\":\"https://img.icons8.com/color/96/elderly-person.png\",\"alt\":\"logo\"}}),_c('h2',[_vm._v(\"行政管理系統\")]),_c('p',{staticClass:\"subtitle\"},[_vm._v(\"請輸入您的管理員憑證\")])]),_c('el-form',{attrs:{\"model\":_vm.loginForm,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"管理員帳號\"}},[_c('el-input',{attrs:{\"placeholder\":\"請輸入帳號 (ccu)\",\"prefix-icon\":\"el-icon-user\",\"clearable\":\"\"},model:{value:(_vm.loginForm.account),callback:function ($$v) {_vm.$set(_vm.loginForm, \"account\", $$v)},expression:\"loginForm.account\"}})],1),_c('el-form-item',{attrs:{\"label\":\"管理密碼\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"請輸入密碼 (123)\",\"prefix-icon\":\"el-icon-lock\",\"show-password\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleLogin.apply(null, arguments)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-button',{staticClass:\"submit-btn\",attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleLogin}},[_vm._v(\" 啟動管理平台 \")])],1)],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-image-side\"},[_c('div',{staticClass:\"side-bg\"}),_c('div',{staticClass:\"overlay\"},[_c('h3',[_vm._v(\"智慧回憶錄\")]),_c('p',[_vm._v(\"用科技守護每一份珍貴的長者記憶\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-wrapper\">\n    <div class=\"login-box\">\n      <div class=\"login-image-side\">\n        <div class=\"side-bg\"></div>\n        <div class=\"overlay\">\n          <h3>智慧回憶錄</h3>\n          <p>用科技守護每一份珍貴的長者記憶</p>\n        </div>\n      </div>\n\n      <el-card class=\"login-card\" shadow=\"never\">\n        <div slot=\"header\" class=\"login-header\">\n          <img src=\"https://img.icons8.com/color/96/elderly-person.png\" class=\"login-logo\" alt=\"logo\">\n          <h2>行政管理系統</h2>\n          <p class=\"subtitle\">請輸入您的管理員憑證</p>\n        </div>\n        \n        <el-form :model=\"loginForm\" label-position=\"top\">\n          <el-form-item label=\"管理員帳號\">\n            <el-input \n              v-model=\"loginForm.account\" \n              placeholder=\"請輸入帳號 (ccu)\" \n              prefix-icon=\"el-icon-user\"\n              clearable\n            ></el-input>\n          </el-form-item>\n          \n          <el-form-item label=\"管理密碼\">\n            <el-input \n              v-model=\"loginForm.password\" \n              type=\"password\" \n              placeholder=\"請輸入密碼 (123)\" \n              prefix-icon=\"el-icon-lock\" \n              show-password\n              @keyup.enter.native=\"handleLogin\"\n            ></el-input>\n          </el-form-item>\n\n          <el-button \n            type=\"primary\" \n            class=\"submit-btn\" \n            @click=\"handleLogin\" \n            :loading=\"loading\"\n          >\n            啟動管理平台\n          </el-button>\n        </el-form>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: { account: 'ccu', password: '123' },\n      loading: false\n    };\n  },\n  methods: {\n    async handleLogin() {\n      // 驗證欄位是否填寫\n      if (!this.loginForm.account || !this.loginForm.password) {\n        this.$message.warning('請完整輸入帳號密碼');\n        return;\n      }\n\n      this.loading = true;\n      try {\n        // 修正：發送相對路徑請求，攔截器會自動注入 baseURL\n        const res = await this.$http.post('/Admin/login', this.loginForm);\n\n        if (res.data && res.data.access_token) {\n          // 儲存 Token 供全域攔截器使用\n          localStorage.setItem('userToken', res.data.access_token);\n          \n          this.$message({\n            message: '身份驗證成功，歡迎進入管理系統',\n            type: 'success',\n            duration: 2000\n          });\n          \n          // 通知 App.vue 切換至主畫面\n          this.$emit('login-success');\n        }\n      } catch (err) {\n        console.error('Login Error:', err);\n        const status = err.response ? err.response.status : null;\n        \n        if (status === 401) {\n          this.$message.error('帳號或密碼錯誤，請重新輸入');\n        } else {\n          // 配合 main.js 處理冷啟動逾時\n          this.$message.error('連線失敗：伺服器啟動中或網路異常');\n        }\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 保持原有美觀樣式 */\n.login-wrapper { display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f7f3ed; }\n.login-box { display: flex; width: 900px; min-height: 580px; background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }\n.login-image-side { flex: 1.2; position: relative; background-color: #f0e6da; }\n.side-bg { \n  position: absolute; top: 0; left: 0; width: 100%; height: 100%; \n  background-image: url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=1000&auto=format&fit=crop');\n  background-size: cover; background-position: center; z-index: 1;\n}\n.overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 40px; background: linear-gradient(transparent, rgba(0,0,0,0.7)); color: white; z-index: 2; text-align: left; }\n.overlay h3 { font-size: 28px; margin-bottom: 10px; }\n.login-card { flex: 1; border: none !important; padding: 30px; display: flex; flex-direction: column; justify-content: center; }\n.login-header { text-align: center; margin-bottom: 30px; }\n.login-logo { width: 64px; margin-bottom: 15px; }\n.subtitle { color: #909399; font-size: 14px; margin-top: 8px; }\n.submit-btn { width: 100%; background-color: #FF9933; border-color: #FF9933; border-radius: 10px; font-weight: bold; font-size: 16px; padding: 12px; margin-top: 10px; }\n@media (max-width: 768px) { .login-image-side { display: none; } .login-box { width: 90%; } }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=3b1adf54&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=3b1adf54&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b1adf54\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"activity-list-container\"},[_c('div',{staticClass:\"header-section\"},[_c('h2',[_vm._v(\"活動清單管理\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.$emit('add-activity')}}},[_vm._v(\"新增活動\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.activities,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"活動封面\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticStyle:{\"width\":\"80px\",\"height\":\"60px\",\"border-radius\":\"6px\",\"border\":\"1px solid #eee\"},attrs:{\"src\":scope.row.cover || 'https://images.unsplash.com/photo-1516733725897-1aa73b87c8e8?w=300',\"fit\":\"cover\",\"preview-src-list\":[scope.row.cover]}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"活動名稱\",\"min-width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"activity_at\",\"label\":\"活動日期\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"label\":\"RFID 綁定\",\"width\":\"130\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.rfid)?_c('el-tag',{attrs:{\"type\":\"success\",\"size\":\"small\",\"effect\":\"plain\"}},[_c('i',{staticClass:\"el-icon-postcard\"}),_vm._v(\" \"+_vm._s(scope.row.rfid)+\" \")]):_c('el-tag',{attrs:{\"type\":\"info\",\"size\":\"small\",\"effect\":\"plain\"}},[_vm._v(\"未綁定\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"location\",\"label\":\"地點\",\"min-width\":\"130\"}}),_c('el-table-column',{attrs:{\"prop\":\"photo_count\",\"label\":\"照片數\",\"width\":\"90\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){return _vm.$emit('manage-activity', scope.row.id)}}},[_vm._v(\" 管理 \")])]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"activity-list-container\">\n    <div class=\"header-section\">\n      <h2>活動清單管理</h2>\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"$emit('add-activity')\">新增活動</el-button>\n    </div>\n\n    <el-table :data=\"activities\" style=\"width: 100%\" stripe v-loading=\"loading\">\n      <el-table-column label=\"活動封面\" width=\"120\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-image \n            :src=\"scope.row.cover || 'https://images.unsplash.com/photo-1516733725897-1aa73b87c8e8?w=300'\" \n            style=\"width: 80px; height: 60px; border-radius: 6px; border: 1px solid #eee;\"\n            fit=\"cover\"\n            :preview-src-list=\"[scope.row.cover]\"\n          >\n            <div slot=\"error\" class=\"image-slot\">\n              <i class=\"el-icon-picture-outline\"></i>\n            </div>\n          </el-image>\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"title\" label=\"活動名稱\" min-width=\"180\"></el-table-column>\n      <el-table-column prop=\"activity_at\" label=\"活動日期\" width=\"120\"></el-table-column>\n      \n      <el-table-column label=\"RFID 綁定\" width=\"130\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.rfid\" type=\"success\" size=\"small\" effect=\"plain\">\n            <i class=\"el-icon-postcard\"></i> {{ scope.row.rfid }}\n          </el-tag>\n          <el-tag v-else type=\"info\" size=\"small\" effect=\"plain\">未綁定</el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"location\" label=\"地點\" min-width=\"130\"></el-table-column>\n      <el-table-column prop=\"photo_count\" label=\"照片數\" width=\"90\" align=\"center\"></el-table-column>\n      \n      <el-table-column label=\"操作\" width=\"120\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button \n            type=\"warning\" \n            size=\"mini\" \n            icon=\"el-icon-setting\"\n            @click=\"$emit('manage-activity', scope.row.id)\"\n          >\n            管理\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ActivityList',\n  data() {\n    return {\n      loading: false,\n      activities: [] \n    };\n  },\n  mounted() {\n    this.fetchActivities();\n  },\n  methods: {\n    async fetchActivities() {\n      this.loading = true;\n      \n      try {\n        // 修正點 2: 使用簡潔相對路徑，讓 main.js 的 baseURL 處理前綴\n        const response = await this.$http.get('/Activity');\n        \n        if (response.data && response.data.length > 0) {\n          // 修正點 3: 確保對應後端的 RFID 欄位\n          this.activities = response.data.map(item => ({\n            ...item,\n            rfid: item.rfid || '' \n          }));\n        } else {\n          this.loadMockData();\n        }\n      } catch (error) {\n        console.warn('API 連線失敗，載入示範資料');\n        this.loadMockData(); \n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    loadMockData() {\n      this.activities = [\n        { \n          id: 'demo_01', \n          title: '象棋大賽暨腦力激盪', \n          activity_at: '2025-12-18', \n          location: '二樓多功能活動室',\n          photo_count: 24,\n          rfid: '8A303053',\n          cover: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=500' \n        },\n        { \n          id: 'demo_02', \n          title: '冬至搓湯圓暖心活動', \n          activity_at: '2025-12-21', \n          location: '一樓共餐食堂',\n          photo_count: 18,\n          rfid: '', \n          cover: 'https://images.unsplash.com/photo-1581579438747-104c53d7fbc4?w=500' \n        }\n      ];\n    }\n  }\n};\n</script>\n\n<style scoped>\n.activity-list-container { padding: 10px; }\n.header-section { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }\nh2 { font-weight: 600; color: #5d5146; margin: 0; }\n.image-slot { \n  display: flex; justify-content: center; align-items: center; \n  width: 100%; height: 100%; background: #f5f7fa; color: #909399; \n  font-size: 20px;\n}\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ActivityList.vue?vue&type=template&id=18f6d928&scoped=true\"\nimport script from \"./ActivityList.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityList.vue?vue&type=script&lang=js\"\nimport style0 from \"./ActivityList.vue?vue&type=style&index=0&id=18f6d928&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18f6d928\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"elder-list-container\"},[_c('div',{staticClass:\"header-section\",staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\",\"margin-bottom\":\"25px\"}},[_c('h2',{staticStyle:{\"font-weight\":\"600\",\"color\":\"#5d5146\"}},[_vm._v(\"長者住民管理\")]),_c('el-button',{staticClass:\"add-button\",staticStyle:{\"background-color\":\"#FF9933\",\"border-color\":\"#FF9933\",\"font-weight\":\"bold\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.$emit('add-elder')}}},[_vm._v(\" 新增長者住民 \")])],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"list-wrapper\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.elderList,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"頭像\",\"width\":\"100\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-avatar',{staticStyle:{\"border\":\"2px solid #f0e6da\",\"background-color\":\"#eee\"},attrs:{\"size\":50,\"src\":scope.row.avatar || _vm.getDefaultAvatar(),\"crossorigin\":\"anonymous\"}},[_vm._v(\" \"+_vm._s(scope.row.name ? scope.row.name.charAt(0) : 'U')+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"姓名\",\"width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"font-weight\":\"bold\",\"color\":\"#333\"}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"age\",\"label\":\"年齡\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"rfid\",\"label\":\"RFID 卡號 (辨識 ID)\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.rfid)?_c('el-tag',{attrs:{\"size\":\"medium\",\"type\":\"success\",\"effect\":\"plain\"}},[_c('i',{staticClass:\"el-icon-postcard\"}),_vm._v(\" \"+_vm._s(scope.row.rfid)+\" \")]):_c('el-tag',{attrs:{\"size\":\"medium\",\"type\":\"info\",\"effect\":\"plain\"}},[_vm._v(\"尚未綁定\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"color\":\"#FF9933\",\"font-weight\":\"bold\"},attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){return _vm.$emit('edit-elder', scope.row.id)}}},[_c('i',{staticClass:\"el-icon-edit\"}),_vm._v(\" 編輯資料 \")])]}}])})],1),(_vm.elderList.length === 0 && !_vm.loading)?_c('div',{staticClass:\"empty-placeholder\"},[_c('i',{staticClass:\"el-icon-user-solid\",staticStyle:{\"font-size\":\"48px\",\"color\":\"#E4E7ED\",\"margin-bottom\":\"15px\"}}),_c('p',[_vm._v(\"目前尚無長者登記資料\")])]):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"elder-list-container\">\n    <div class=\"header-section\" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;\">\n      <h2 style=\"font-weight: 600; color: #5d5146;\">長者住民管理</h2>\n      <el-button \n        type=\"primary\" \n        @click=\"$emit('add-elder')\" \n        class=\"add-button\"\n        icon=\"el-icon-plus\"\n        style=\"background-color: #FF9933; border-color: #FF9933; font-weight: bold;\"\n      >\n        新增長者住民\n      </el-button>\n    </div>\n\n    <div class=\"list-wrapper\" v-loading=\"loading\">\n      <el-table :data=\"elderList\" style=\"width: 100%\" stripe>\n        <el-table-column label=\"頭像\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-avatar \n              :size=\"50\"\n              :src=\"scope.row.avatar || getDefaultAvatar()\"\n              crossorigin=\"anonymous\"\n              style=\"border: 2px solid #f0e6da; background-color: #eee;\"\n            >\n              {{ scope.row.name ? scope.row.name.charAt(0) : 'U' }}\n            </el-avatar>\n          </template>\n        </el-table-column>\n        \n        <el-table-column prop=\"name\" label=\"姓名\" width=\"160\">\n          <template slot-scope=\"scope\">\n            <span style=\"font-weight: bold; color: #333;\">{{ scope.row.name }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"age\" label=\"年齡\" width=\"100\" align=\"center\"></el-table-column>\n        \n        <el-table-column prop=\"rfid\" label=\"RFID 卡號 (辨識 ID)\" min-width=\"150\">\n          <template slot-scope=\"scope\">\n            <el-tag v-if=\"scope.row.rfid\" size=\"medium\" type=\"success\" effect=\"plain\">\n              <i class=\"el-icon-postcard\"></i> {{ scope.row.rfid }}\n            </el-tag>\n            <el-tag v-else size=\"medium\" type=\"info\" effect=\"plain\">尚未綁定</el-tag>\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"120\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button \n              size=\"mini\" \n              type=\"text\" \n              @click=\"$emit('edit-elder', scope.row.id)\" \n              style=\"color: #FF9933; font-weight: bold;\"\n            >\n              <i class=\"el-icon-edit\"></i> 編輯資料\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div v-if=\"elderList.length === 0 && !loading\" class=\"empty-placeholder\">\n        <i class=\"el-icon-user-solid\" style=\"font-size: 48px; color: #E4E7ED; margin-bottom: 15px;\"></i>\n        <p>目前尚無長者登記資料</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ElderList',\n  data() {\n    return {\n      loading: false,\n      elderList: []\n    };\n  },\n  mounted() {\n    this.fetchElders();\n  },\n  methods: {\n    getDefaultAvatar() {\n      return 'https://images.unsplash.com/photo-1472393365320-dc77242e6ea2?auto=format&fit=crop&w=150&q=80';\n    },\n\n    async fetchElders() {\n      this.loading = true;\n      const azureBase = 'https://ccu-rfid-project-arhddfhugverf8dr.japanwest-01.azurewebsites.net';\n      \n      try {\n        const res = await this.$http.get('/Resident');\n\n        if (res.data && res.data.length > 0) {\n          this.elderList = res.data.map(item => {\n            let finalAvatar = null;\n            \n            // 修正點：優先讀取後端實際回傳的 avatar 欄位\n            const avatarField = item.avatar || item.avatar_url; \n            \n            if (avatarField) {\n              const timestamp = new Date().getTime();\n              // 修正點：如果是 Firebase 連結 (http) 則跳過 Azure 拼接\n              if (avatarField.startsWith('http')) {\n                finalAvatar = `${avatarField}${avatarField.includes('?') ? '&' : '?'}t=${timestamp}`;\n              } else {\n                const cleanPath = avatarField.startsWith('/') ? avatarField.substring(1) : avatarField;\n                finalAvatar = `${azureBase}/${cleanPath}?t=${timestamp}`;\n              }\n            }\n\n            return {\n              id: item.id,\n              name: item.name,\n              age: item.age,\n              // 修正點：對接至後端正確的 rfid 欄位\n              rfid: item.rfid, \n              avatar: finalAvatar \n            };\n          });\n        } else {\n          this.setMockData();\n        }\n      } catch (err) {\n        console.warn('API 連線失敗，載入展示模式', err);\n        this.setMockData(); \n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    setMockData() {\n      this.elderList = [\n        { \n          id: 'm1', \n          name: 'James Wilson', \n          age: 82, \n          rfid: '116A2434', \n          avatar: 'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=150&q=80' \n        },\n        { \n          id: 'm2', \n          name: '唐伯虎', \n          age: 75, \n          rfid: '8A303053', \n          avatar: 'https://images.unsplash.com/photo-1544144433-d50aff500b91?auto=format&fit=crop&w=150&q=80' \n        }\n      ];\n    }\n  }\n};\n</script>\n\n<style scoped>\n.elder-list-container { padding: 10px; background-color: #fcfaf8; min-height: 80vh; }\n.header-section h2 { margin: 0; font-size: 24px; }\n.list-wrapper { \n  background: #fff; \n  padding: 25px; \n  border-radius: 16px; \n  box-shadow: 0 4px 20px rgba(0,0,0,0.05); \n  border: 1px solid #f0e6da;\n}\n.empty-placeholder { text-align: center; padding: 60px 0; color: #909399; }\n/deep/ .el-table { border-radius: 8px; overflow: hidden; }\n/deep/ .el-table th { background-color: #fcfaf8 !important; color: #5d5146; font-weight: bold; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ElderList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ElderList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ElderList.vue?vue&type=template&id=1f27c1bd&scoped=true\"\nimport script from \"./ElderList.vue?vue&type=script&lang=js\"\nexport * from \"./ElderList.vue?vue&type=script&lang=js\"\nimport style0 from \"./ElderList.vue?vue&type=style&index=0&id=1f27c1bd&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f27c1bd\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"elder-edit-container\"},[_c('div',{staticClass:\"header-section\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-back\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.$emit('go-back')}}}),_c('h2',{staticStyle:{\"margin-left\":\"15px\"}},[_vm._v(_vm._s(_vm.isEdit ? '編輯長者住民資料' : '新增長者住民入園登記'))])],1),_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitting),expression:\"submitting\"}],staticClass:\"edit-card\",attrs:{\"shadow\":\"never\"}},[_c('el-form',{attrs:{\"model\":_vm.elderForm,\"label-position\":\"top\"}},[_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{staticClass:\"avatar-col\",attrs:{\"span\":8}},[_c('div',{staticClass:\"avatar-group\"},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"#\",\"auto-upload\":false,\"show-file-list\":false,\"on-change\":_vm.handleAvatarChange}},[(_vm.imageUrl)?_c('div',{staticClass:\"avatar-preview-wrapper\"},[_c('img',{staticClass:\"avatar-preview\",attrs:{\"src\":_vm.imageUrl,\"crossorigin\":\"anonymous\"}}),_c('div',{staticClass:\"avatar-mask\"},[_c('i',{staticClass:\"el-icon-edit\"}),_c('span',[_vm._v(\"更換照片\")])])]):_c('div',{staticClass:\"uploader-placeholder\"},[_c('i',{staticClass:\"el-icon-user avatar-uploader-icon\",staticStyle:{\"font-size\":\"40px\",\"color\":\"#dcdfe6\"}}),_c('br'),_c('span',{staticStyle:{\"color\":\"#909399\",\"font-size\":\"14px\"}},[_vm._v(\"上傳大頭照\")])])]),_c('div',{staticClass:\"upload-guide\"},[_c('el-alert',{attrs:{\"title\":\"供 AI 臉部辨識基準\",\"type\":\"info\",\"closable\":false,\"show-icon\":\"\",\"center\":\"\"}}),_c('p',{staticClass:\"guide-text\"},[_vm._v(\"請確保面部清晰無遮擋\")])],1)],1)]),_c('el-col',{attrs:{\"span\":16}},[_c('el-form-item',{attrs:{\"label\":\"住民姓名\",\"required\":\"\"}},[_c('el-input',{attrs:{\"placeholder\":\"例如：唐伯虎\"},model:{value:(_vm.elderForm.name),callback:function ($$v) {_vm.$set(_vm.elderForm, \"name\", $$v)},expression:\"elderForm.name\"}})],1),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"住民年齡\"}},[_c('el-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"min\":1,\"max\":120},model:{value:(_vm.elderForm.age),callback:function ($$v) {_vm.$set(_vm.elderForm, \"age\", $$v)},expression:\"elderForm.age\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"RFID 辨識編號\"}},[_c('el-input',{attrs:{\"placeholder\":\"請填寫或感應卡片\"},model:{value:(_vm.elderForm.rfid),callback:function ($$v) {_vm.$set(_vm.elderForm, \"rfid\", $$v)},expression:\"elderForm.rfid\"}},[_c('i',{staticClass:\"el-icon-postcard\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"住民健康與生活備註\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"5\",\"placeholder\":\"例如：患有高血壓，需定時服藥...\"},model:{value:(_vm.elderForm.remark),callback:function ($$v) {_vm.$set(_vm.elderForm, \"remark\", $$v)},expression:\"elderForm.remark\"}})],1)],1)],1),_c('div',{staticClass:\"form-actions\"},[_c('el-button',{staticStyle:{\"background-color\":\"#67c23a\",\"border-color\":\"#67c23a\"},attrs:{\"type\":\"success\",\"loading\":_vm.submitting,\"icon\":\"el-icon-folder-checked\"},on:{\"click\":_vm.submitForm}},[_vm._v(\" \"+_vm._s(_vm.isEdit ? '更新住民檔案' : '確認入園並建立檔案')+\" \")]),_c('el-button',{on:{\"click\":function($event){return _vm.$emit('go-back')}}},[_vm._v(\"取消返回\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"elder-edit-container\">\n    <div class=\"header-section\">\n      <el-button icon=\"el-icon-back\" circle @click=\"$emit('go-back')\"></el-button>\n      <h2 style=\"margin-left: 15px;\">{{ isEdit ? '編輯長者住民資料' : '新增長者住民入園登記' }}</h2>\n    </div>\n\n    <el-card shadow=\"never\" class=\"edit-card\" v-loading=\"submitting\">\n      <el-form :model=\"elderForm\" label-position=\"top\">\n        <el-row :gutter=\"40\">\n          <el-col :span=\"8\" class=\"avatar-col\">\n            <div class=\"avatar-group\">\n              <el-upload\n                class=\"avatar-uploader\"\n                action=\"#\"\n                :auto-upload=\"false\"\n                :show-file-list=\"false\"\n                :on-change=\"handleAvatarChange\"\n              >\n                <div v-if=\"imageUrl\" class=\"avatar-preview-wrapper\">\n                  <img :src=\"imageUrl\" class=\"avatar-preview\" crossorigin=\"anonymous\">\n                  <div class=\"avatar-mask\">\n                    <i class=\"el-icon-edit\"></i>\n                    <span>更換照片</span>\n                  </div>\n                </div>\n                <div v-else class=\"uploader-placeholder\">\n                  <i class=\"el-icon-user avatar-uploader-icon\" style=\"font-size: 40px; color: #dcdfe6;\"></i>\n                  <br>\n                  <span style=\"color: #909399; font-size: 14px;\">上傳大頭照</span>\n                </div>\n              </el-upload>\n              <div class=\"upload-guide\">\n                <el-alert title=\"供 AI 臉部辨識基準\" type=\"info\" :closable=\"false\" show-icon center></el-alert>\n                <p class=\"guide-text\">請確保面部清晰無遮擋</p>\n              </div>\n            </div>\n          </el-col>\n\n          <el-col :span=\"16\">\n            <el-form-item label=\"住民姓名\" required>\n              <el-input v-model=\"elderForm.name\" placeholder=\"例如：唐伯虎\"></el-input>\n            </el-form-item>\n            <el-row :gutter=\"20\">\n              <el-col :span=\"12\">\n                <el-form-item label=\"住民年齡\">\n                  <el-input-number v-model=\"elderForm.age\" :min=\"1\" :max=\"120\" style=\"width: 100%\"></el-input-number>\n                </el-form-item>\n              </el-col>\n              <el-col :span=\"12\">\n                <el-form-item label=\"RFID 辨識編號\">\n                  <el-input v-model=\"elderForm.rfid\" placeholder=\"請填寫或感應卡片\">\n                    <i slot=\"prefix\" class=\"el-icon-postcard\"></i>\n                  </el-input>\n                </el-form-item>\n              </el-col>\n            </el-row>\n            <el-form-item label=\"住民健康與生活備註\">\n              <el-input type=\"textarea\" v-model=\"elderForm.remark\" rows=\"5\" placeholder=\"例如：患有高血壓，需定時服藥...\"></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n\n        <div class=\"form-actions\">\n          <el-button type=\"success\" @click=\"submitForm\" :loading=\"submitting\" icon=\"el-icon-folder-checked\" style=\"background-color: #67c23a; border-color: #67c23a;\">\n            {{ isEdit ? '更新住民檔案' : '確認入園並建立檔案' }}\n          </el-button>\n          <el-button @click=\"$emit('go-back')\">取消返回</el-button>\n        </div>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ElderEdit',\n  props: ['elderId'],\n  data() {\n    return {\n      elderForm: { name: '', age: 80, rfid: '', remark: '' },\n      imageUrl: '', \n      selectedFile: null,\n      submitting: false,\n      isEdit: false\n    };\n  },\n  mounted() {\n    if (this.elderId) {\n      this.isEdit = true;\n      this.fetchElderData();\n    }\n  },\n  methods: {\n    async fetchElderData() {\n      const azureBase = 'https://ccu-rfid-project-arhddfhugverf8dr.japanwest-01.azurewebsites.net';\n      try {\n        const res = await this.$http.get(`/Resident/${this.elderId}`);\n        this.elderForm = {\n          name: res.data.name || '',\n          age: res.data.age || 80,\n          rfid: res.data.rfid || '', // 修正：對齊後端 rfid\n          remark: res.data.remark || ''\n        };\n        \n        // 修正：處理圖片路徑，若是 Firebase 連結則直接顯示\n        if (res.data.avatar) {\n          this.imageUrl = res.data.avatar.startsWith('http') \n            ? res.data.avatar \n            : `${azureBase}${res.data.avatar}?t=${new Date().getTime()}`;\n        }\n      } catch (err) {\n        this.$message.error('讀取住民資料失敗');\n      }\n    },\n\n    handleAvatarChange(file) {\n      this.selectedFile = file.raw;\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n\n    async submitForm() {\n      if (!this.elderForm.name) {\n        this.$message.warning('請填寫住民姓名');\n        return;\n      }\n      this.submitting = true;\n\n      try {\n        // --- 階段 1: 更新基本資料 (使用 JSON 以避免 415 錯誤) ---\n        const residentPayload = {\n          name: String(this.elderForm.name),\n          age: Number(this.elderForm.age),\n          remark: this.elderForm.remark || \"\",\n          rfid: this.elderForm.rfid || \"\" // 修正：使用 rfid\n        };\n\n        const residentUrl = this.isEdit ? `/Resident/${this.elderId}` : `/Resident`;\n        const residentMethod = this.isEdit ? 'put' : 'post';\n\n        const res = await this.$http({\n          method: residentMethod,\n          url: residentUrl,\n          data: residentPayload\n        });\n\n        const targetId = this.isEdit ? this.elderId : res.data.id;\n\n        // --- 階段 2: 照片處理 (單獨使用 FormData) ---\n        if (this.selectedFile && targetId) {\n          const avatarFormData = new FormData();\n          avatarFormData.append('file', this.selectedFile); \n\n          await this.$http({\n            method: 'post',\n            url: `/Resident/${targetId}/UploadAvatar`,\n            data: avatarFormData,\n            headers: { 'Content-Type': 'multipart/form-data' }\n          });\n        }\n\n        this.$message.success(this.isEdit ? '資料與照片更新成功' : '新增登記成功');\n        setTimeout(() => { this.$emit('go-back'); }, 1000);\n\n      } catch (err) {\n        console.error('Submit Error:', err.response);\n        this.$message.error(err.response?.data?.message || '儲存失敗');\n      } finally {\n        this.submitting = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.elder-edit-container { padding: 15px; background-color: #fcfaf8; min-height: 80vh; }\n.header-section { display: flex; align-items: center; margin-bottom: 25px; }\n.avatar-col { display: flex; justify-content: center; }\n.avatar-group { display: flex; flex-direction: column; align-items: center; }\n\n/* 上傳框與預覽 */\n.avatar-uploader {\n  width: 200px; height: 200px;\n  border: 2px dashed #dcdfe6; border-radius: 50%;\n  cursor: pointer; position: relative; overflow: hidden;\n  transition: all 0.3s; background-color: #fcfcfc;\n  display: flex; justify-content: center; align-items: center;\n}\n.avatar-uploader /deep/ .el-upload { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }\n.avatar-preview-wrapper { position: relative; width: 100%; height: 100%; border-radius: 50%; overflow: hidden; }\n.avatar-preview { width: 100%; height: 100%; object-fit: cover; display: block; }\n\n/* 遮罩邏輯優化：修正蓋住照片的問題 */\n.avatar-mask {\n  position: absolute; top: 0; left: 0; width: 100%; height: 100%;\n  background: rgba(0,0,0,0.5); color: #fff;\n  display: flex; flex-direction: column; justify-content: center; align-items: center;\n  \n  /* 初始狀態隱藏，且不阻擋滑鼠點擊圖片 */\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s ease;\n  pointer-events: none; \n}\n\n/* 僅在滑鼠移入上傳區域時顯現遮罩 */\n.avatar-uploader:hover .avatar-mask {\n  opacity: 1;\n  visibility: visible;\n}\n\n.upload-guide { margin-top: 20px; text-align: center; }\n.guide-text { font-size: 12px; color: #909399; margin-top: 8px; }\n.form-actions { margin-top: 40px; text-align: center; padding-top: 30px; border-top: 1px dashed #e9e0d6; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ElderEdit.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ElderEdit.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ElderEdit.vue?vue&type=template&id=3a9d5c01&scoped=true\"\nimport script from \"./ElderEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ElderEdit.vue?vue&type=script&lang=js\"\nimport style0 from \"./ElderEdit.vue?vue&type=style&index=0&id=3a9d5c01&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a9d5c01\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ai-screening-container\"},[_c('div',{staticClass:\"header-section\"},[_c('el-page-header',{attrs:{\"content\":\"AI 辨識結果修正與確認\"},on:{\"back\":function($event){return _vm.$emit('go-back')}}})],1),_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"main-card\"},[_vm._l((_vm.aiGroups),function(group){return _c('div',{key:group.resident_id,staticClass:\"resident-group\"},[_c('h3',{staticClass:\"resident-title\"},[_c('i',{staticClass:\"el-icon-user\"}),_vm._v(\" \"+_vm._s(group.resident_name)+\" \"),_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"info\"}},[_vm._v(\"共 \"+_vm._s(group.photos.length)+\" 張\")])],1),_c('div',{staticClass:\"photo-list\"},_vm._l((group.photos),function(photo){return _c('div',{key:photo.photo_id,staticClass:\"photo-thumb-wrapper\"},[_c('el-image',{staticClass:\"photo-thumb\",attrs:{\"src\":photo.photo_url,\"fit\":\"cover\"},on:{\"click\":function($event){return _vm.openEditDialog(group, photo)}}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])])],1)}),0)])}),(_vm.aiGroups.length === 0 && !_vm.loading)?_c('div',{staticClass:\"empty-state\"},[_c('el-empty',{attrs:{\"description\":\"目前無辨識資料\"}})],1):_vm._e(),_c('div',{staticClass:\"form-actions\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload\",\"loading\":_vm.loading},on:{\"click\":_vm.handleFinalSave}},[_vm._v(\" 確認無誤，同步至活動紀錄 \")]),_c('el-button',{on:{\"click\":function($event){return _vm.$emit('go-back')}}},[_vm._v(\"返回\")])],1)],2),_c('el-dialog',{attrs:{\"title\":\"修正照片辨識\",\"visible\":_vm.editVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.editVisible=$event},\"opened\":_vm.drawEditBox}},[(_vm.editingPhoto)?_c('div',{staticClass:\"edit-preview-container\"},[_c('div',{staticClass:\"img-box\",staticStyle:{\"position\":\"relative\",\"overflow\":\"hidden\"}},[_c('img',{ref:\"previewImg\",staticClass:\"full-preview\",staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.editingPhoto.photo_url},on:{\"load\":_vm.drawEditBox}}),_c('div',{staticClass:\"recognition-box\",staticStyle:{\"position\":\"absolute\",\"border\":\"2px solid #f56c6c\",\"background\":\"rgba(245,108,108,0.2)\"},style:(_vm.boxStyle)})]),_c('el-form',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"重新標記此人為：\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"filterable\":\"\"},model:{value:(_vm.targetResidentId),callback:function ($$v) {_vm.targetResidentId=$$v},expression:\"targetResidentId\"}},_vm._l((_vm.residentOptions),function(opt){return _c('el-option',{key:opt.id,attrs:{\"label\":opt.name,\"value\":opt.id}})}),1)],1)],1)],1):_vm._e(),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmPhotoCorrection}},[_vm._v(\"確認修正\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ai-screening-container\">\n    <div class=\"header-section\">\n      <el-page-header @back=\"$emit('go-back')\" content=\"AI 辨識結果修正與確認\"></el-page-header>\n    </div>\n\n    <el-card v-loading=\"loading\" class=\"main-card\">\n      <div v-for=\"group in aiGroups\" :key=\"group.resident_id\" class=\"resident-group\">\n        <h3 class=\"resident-title\">\n          <i class=\"el-icon-user\"></i> {{ group.resident_name }} \n          <el-tag size=\"mini\" type=\"info\">共 {{ group.photos.length }} 張</el-tag>\n        </h3>\n        \n        <div class=\"photo-list\">\n          <div v-for=\"photo in group.photos\" :key=\"photo.photo_id\" class=\"photo-thumb-wrapper\">\n            <el-image \n              class=\"photo-thumb\"\n              :src=\"photo.photo_url\"\n              fit=\"cover\"\n              @click=\"openEditDialog(group, photo)\"\n            >\n              <div slot=\"error\" class=\"image-slot\">\n                <i class=\"el-icon-picture-outline\"></i>\n              </div>\n            </el-image>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"aiGroups.length === 0 && !loading\" class=\"empty-state\">\n        <el-empty description=\"目前無辨識資料\"></el-empty>\n      </div>\n\n      <div class=\"form-actions\">\n        <el-button type=\"primary\" icon=\"el-icon-upload\" @click=\"handleFinalSave\" :loading=\"loading\">\n          確認無誤，同步至活動紀錄\n        </el-button>\n        <el-button @click=\"$emit('go-back')\">返回</el-button>\n      </div>\n    </el-card>\n\n    <el-dialog title=\"修正照片辨識\" :visible.sync=\"editVisible\" width=\"600px\" @opened=\"drawEditBox\">\n      <div class=\"edit-preview-container\" v-if=\"editingPhoto\">\n        <div class=\"img-box\" style=\"position: relative; overflow: hidden;\">\n          <img ref=\"previewImg\" :src=\"editingPhoto.photo_url\" class=\"full-preview\" @load=\"drawEditBox\" style=\"width: 100%;\">\n          <div class=\"recognition-box\" :style=\"boxStyle\" style=\"position: absolute; border: 2px solid #f56c6c; background: rgba(245,108,108,0.2);\"></div>\n        </div>\n        \n        <el-form label-position=\"top\" style=\"margin-top: 20px;\">\n          <el-form-item label=\"重新標記此人為：\">\n            <el-select v-model=\"targetResidentId\" filterable style=\"width: 100%\">\n              <el-option \n                v-for=\"opt in residentOptions\" \n                :key=\"opt.id\" \n                :label=\"opt.name\" \n                :value=\"opt.id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </div>\n      <span slot=\"footer\">\n        <el-button @click=\"editVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmPhotoCorrection\">確認修正</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AIScreening',\n  props: ['activityId'],\n  data() {\n    return {\n      loading: false,\n      aiGroups: [],\n      residentOptions: [],\n      editVisible: false,\n      editingGroup: null,\n      editingPhoto: null,\n      targetResidentId: '',\n      boxStyle: {}\n    };\n  },\n  mounted() {\n    this.fetchScreeningResults();\n  },\n  methods: {\n    async fetchScreeningResults() {\n      this.loading = true;\n      const azureBase = 'https://ccu-rfid-project-arhddfhugverf8dr.japanwest-01.azurewebsites.net';\n      \n      try {\n        // 維持 30 秒逾時\n        const res = await this.$http.post(`/Activity/${this.activityId}/recognize`, {}, {\n          timeout: 30000 \n        });\n        \n        if (res.data && res.data.length > 0) {\n          this.aiGroups = res.data.map(group => {\n            group.photos = group.photos.map(p => {\n              // 補全圖片網址路徑，解決 404 問題\n              if (p.photo_url && !p.photo_url.startsWith('http')) {\n                const cleanPath = p.photo_url.replace(/^\\/+/, '');\n                p.photo_url = `${azureBase}/${cleanPath}?t=${new Date().getTime()}`;\n              }\n              return p;\n            });\n            return group;\n          });\n\n          // 統一欄位名稱為 resident_id 與 resident_name\n          this.residentOptions = this.aiGroups.map(g => ({ \n            id: g.resident_id, \n            name: g.resident_name \n          }));\n        } else {\n          this.loadMockResults();\n        }\n      } catch (err) {\n        console.warn(\"API 逾時或獲取失敗，啟動示範模式\", err);\n        this.loadMockResults();\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    loadMockResults() {\n      // 備援示範數據邏輯\n      this.aiGroups = []; \n    },\n\n    openEditDialog(group, photo) {\n      this.editingGroup = group;\n      this.editingPhoto = photo;\n      this.targetResidentId = group.resident_id;\n      this.editVisible = true;\n    },\n\n    confirmPhotoCorrection() {\n      const newGroup = this.aiGroups.find(g => g.resident_id === this.targetResidentId);\n      if (newGroup && this.editingGroup.resident_id !== this.targetResidentId) {\n        this.editingGroup.photos = this.editingGroup.photos.filter(p => p.photo_id !== this.editingPhoto.photo_id);\n        newGroup.photos.push(this.editingPhoto);\n      }\n      this.editVisible = false;\n    },\n\n    async handleFinalSave() {\n      this.loading = true;\n      try {\n        // 封裝 JSON Payload 排除 415 錯誤\n        const payload = [];\n        this.aiGroups.forEach(group => {\n          group.photos.forEach(p => {\n            payload.push({ \n              photo_id: p.photo_id, \n              resident_id: group.resident_id \n            });\n          });\n        });\n\n        await this.$http.post(`/Activity/${this.activityId}/recognize/confirm`, payload);\n        this.$message.success('AI 辨識結果已同步！');\n        this.$emit('go-back');\n      } catch (error) {\n        this.$message.error('儲存失敗');\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    drawEditBox() {\n      this.$nextTick(() => {\n        const img = this.$refs.previewImg;\n        if (!img || !this.editingPhoto || !this.editingPhoto.bounding_box || img.naturalWidth === 0) return;\n        \n        const box = this.editingPhoto.bounding_box; \n        const sx = img.clientWidth / img.naturalWidth;\n        const sy = img.clientHeight / img.naturalHeight;\n        \n        this.boxStyle = {\n          top: (box[0] * sy) + 'px',\n          left: (box[1] * sx) + 'px',\n          width: ((box[3] - box[1]) * sx) + 'px',\n          height: ((box[2] - box[0]) * sy) + 'px'\n        };\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.resident-group { margin-bottom: 30px; border-bottom: 1px solid #ebeef5; padding-bottom: 20px; }\n.photo-list { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 15px; }\n.photo-thumb-wrapper { width: 120px; height: 120px; cursor: pointer; border-radius: 4px; overflow: hidden; position: relative; }\n.photo-thumb { width: 100%; height: 100%; }\n.image-slot { display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; background: #f5f7fa; color: #909399; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AIScreening.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AIScreening.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AIScreening.vue?vue&type=template&id=22e5105f&scoped=true\"\nimport script from \"./AIScreening.vue?vue&type=script&lang=js\"\nexport * from \"./AIScreening.vue?vue&type=script&lang=js\"\nimport style0 from \"./AIScreening.vue?vue&type=style&index=0&id=22e5105f&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22e5105f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"activity-manage-container\"},[_c('div',{staticClass:\"header-section\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-back\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.$emit('go-back')}}}),_c('h2',{staticStyle:{\"margin-left\":\"15px\"}},[_vm._v(_vm._s(_vm.isNewActivity ? '建立活動檔案' : '管理活動內容'))])],1),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.submitting),expression:\"submitting\"}],staticClass:\"info-card\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"info-card-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_c('i',{staticClass:\"el-icon-collection-tag\"}),_vm._v(\" 活動基本設定\")])]),_c('el-form',{attrs:{\"model\":_vm.activityForm,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"活動名稱\"}},[_c('el-input',{attrs:{\"placeholder\":\"例如：12月象棋大賽\",\"disabled\":!_vm.isNewActivity},model:{value:(_vm.activityForm.title),callback:function ($$v) {_vm.$set(_vm.activityForm, \"title\", $$v)},expression:\"activityForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"RFID 實體卡綁定\"}},[_c('el-input',{attrs:{\"placeholder\":\"請掃描或輸入 RFID 序號\",\"disabled\":!_vm.isNewActivity,\"clearable\":\"\"},model:{value:(_vm.activityForm.rfid),callback:function ($$v) {_vm.$set(_vm.activityForm, \"rfid\", $$v)},expression:\"activityForm.rfid\"}},[_c('i',{staticClass:\"el-icon-postcard\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('div',{staticClass:\"form-tip\"},[_vm._v(\"綁定後，長者掃描此卡可直接進入該活動相簿\")])],1),_c('el-form-item',{attrs:{\"label\":\"活動日期\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"選擇活動日期\",\"value-format\":\"yyyy-MM-dd\",\"disabled\":!_vm.isNewActivity},model:{value:(_vm.activityForm.activity_at),callback:function ($$v) {_vm.$set(_vm.activityForm, \"activity_at\", $$v)},expression:\"activityForm.activity_at\"}})],1),_c('el-form-item',{attrs:{\"label\":\"活動地點\"}},[_c('el-input',{attrs:{\"placeholder\":\"例如：社區交誼廳\",\"disabled\":!_vm.isNewActivity},model:{value:(_vm.activityForm.location),callback:function ($$v) {_vm.$set(_vm.activityForm, \"location\", $$v)},expression:\"activityForm.location\"}})],1),(_vm.isNewActivity)?_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleCreateActivity}},[_vm._v(\"建立活動並開始上傳\")]):_vm._e()],1),(!_vm.isNewActivity)?_c('div',{staticClass:\"progress-section\"},[_c('el-divider'),_c('p',{staticClass:\"progress-text\"},[_c('i',{staticClass:\"el-icon-cpu\"}),_vm._v(\" AI 人臉特徵掃描：\"+_vm._s(_vm.analyzedCount)+\" / \"+_vm._s(_vm.activityForm.photoCount)+\" \")]),_c('el-progress',{attrs:{\"percentage\":_vm.progressPercentage,\"stroke-width\":18,\"color\":_vm.customColors,\"striped\":\"\",\"striped-flow\":\"\"}}),(_vm.progressPercentage === 100 && _vm.activityForm.photoCount > 0)?_c('div',{staticClass:\"ai-guide-box\"},[_c('el-alert',{attrs:{\"title\":\"掃描完成！AI 已自動識別長者身分\",\"type\":\"success\",\"closable\":false,\"show-icon\":\"\"}}),_c('div',{staticClass:\"button-group\"},[_c('el-button',{staticClass:\"pulse-btn\",attrs:{\"type\":\"success\",\"icon\":\"el-icon-picture\"},on:{\"click\":function($event){return _vm.$emit('go-recognition')}}},[_vm._v(\"查看 AI 辨識成果\")])],1)],1):_vm._e()],1):_vm._e()],1)],1),_c('el-col',{attrs:{\"span\":16}},[_c('el-card',{staticClass:\"upload-card\",class:{ 'disabled-overlay': _vm.isNewActivity },attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"upload-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_c('i',{staticClass:\"el-icon-upload\"}),_vm._v(\" 批次照片上傳 (支援拖拽)\")]),(_vm.isNewActivity)?_c('el-tag',{attrs:{\"type\":\"warning\",\"size\":\"small\"}},[_vm._v(\"請先於左側儲存資訊\")]):_vm._e()],1),(!_vm.isNewActivity)?_c('el-upload',{attrs:{\"action\":_vm.getUploadUrl,\"name\":\"Files\",\"headers\":_vm.uploadHeaders,\"multiple\":\"\",\"list-type\":\"picture-card\",\"on-success\":_vm.handleUploadSuccess,\"on-error\":_vm.handleUploadError}},[_c('i',{staticClass:\"el-icon-plus\"})]):_c('div',{staticClass:\"upload-placeholder\"},[_c('div',{staticClass:\"placeholder-icon-wrap\"},[_c('i',{staticClass:\"el-icon-picture-outline\",staticStyle:{\"font-size\":\"60px\"}})]),_c('h3',[_vm._v(\"等待建立活動\")]),_c('p',[_vm._v(\"請先完成左側活動基本資訊，即可開啟雲端 AI 上傳通道\")])])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"activity-manage-container\">\n    <div class=\"header-section\">\n      <el-button icon=\"el-icon-back\" circle @click=\"$emit('go-back')\"></el-button>\n      <h2 style=\"margin-left: 15px;\">{{ isNewActivity ? '建立活動檔案' : '管理活動內容' }}</h2>\n    </div>\n\n    <el-row :gutter=\"20\">\n      <el-col :span=\"8\">\n        <el-card shadow=\"never\" class=\"info-card\" v-loading=\"submitting\">\n          <div slot=\"header\" class=\"info-card-header\">\n            <span><i class=\"el-icon-collection-tag\"></i> 活動基本設定</span>\n          </div>\n          \n          <el-form :model=\"activityForm\" label-position=\"top\">\n            <el-form-item label=\"活動名稱\">\n              <el-input \n                v-model=\"activityForm.title\" \n                placeholder=\"例如：12月象棋大賽\"\n                :disabled=\"!isNewActivity\"\n              ></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"RFID 實體卡綁定\">\n              <el-input \n                v-model=\"activityForm.rfid\" \n                placeholder=\"請掃描或輸入 RFID 序號\"\n                :disabled=\"!isNewActivity\"\n                clearable\n              >\n                <i slot=\"prefix\" class=\"el-icon-postcard\"></i>\n              </el-input>\n              <div class=\"form-tip\">綁定後，長者掃描此卡可直接進入該活動相簿</div>\n            </el-form-item>\n\n            <el-form-item label=\"活動日期\">\n              <el-date-picker\n                v-model=\"activityForm.activity_at\"\n                type=\"date\"\n                placeholder=\"選擇活動日期\"\n                style=\"width: 100%\"\n                value-format=\"yyyy-MM-dd\"\n                :disabled=\"!isNewActivity\"\n              ></el-date-picker>\n            </el-form-item>\n            <el-form-item label=\"活動地點\">\n              <el-input \n                v-model=\"activityForm.location\" \n                placeholder=\"例如：社區交誼廳\"\n                :disabled=\"!isNewActivity\"\n              ></el-input>\n            </el-form-item>\n            \n            <el-button \n              v-if=\"isNewActivity\" \n              type=\"primary\" \n              style=\"width: 100%; margin-top: 10px;\" \n              @click=\"handleCreateActivity\"\n            >建立活動並開始上傳</el-button>\n          </el-form>\n\n          <div v-if=\"!isNewActivity\" class=\"progress-section\">\n            <el-divider></el-divider>\n            <p class=\"progress-text\">\n              <i class=\"el-icon-cpu\"></i> AI 人臉特徵掃描：{{ analyzedCount }} / {{ activityForm.photoCount }}\n            </p>\n            <el-progress \n              :percentage=\"progressPercentage\" \n              :stroke-width=\"18\"\n              :color=\"customColors\"\n              striped\n              striped-flow\n            ></el-progress>\n            \n            <div v-if=\"progressPercentage === 100 && activityForm.photoCount > 0\" class=\"ai-guide-box\">\n              <el-alert \n                title=\"掃描完成！AI 已自動識別長者身分\" \n                type=\"success\" \n                :closable=\"false\" \n                show-icon\n              ></el-alert>\n              \n              <div class=\"button-group\">\n                <el-button \n                  type=\"success\" \n                  class=\"pulse-btn\" \n                  icon=\"el-icon-picture\" \n                  @click=\"$emit('go-recognition')\"\n                >查看 AI 辨識成果</el-button>\n              </div>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n\n      <el-col :span=\"16\">\n        <el-card shadow=\"never\" class=\"upload-card\" :class=\"{ 'disabled-overlay': isNewActivity }\">\n          <div slot=\"header\" class=\"upload-header\">\n            <span><i class=\"el-icon-upload\"></i> 批次照片上傳 (支援拖拽)</span>\n            <el-tag v-if=\"isNewActivity\" type=\"warning\" size=\"small\">請先於左側儲存資訊</el-tag>\n          </div>\n          \n          <el-upload\n            v-if=\"!isNewActivity\"\n            :action=\"getUploadUrl\"\n            name=\"Files\"\n            :headers=\"uploadHeaders\"\n            multiple\n            list-type=\"picture-card\"\n            :on-success=\"handleUploadSuccess\"\n            :on-error=\"handleUploadError\"\n          >\n            <i class=\"el-icon-plus\"></i>\n          </el-upload>\n          \n          <div v-else class=\"upload-placeholder\">\n            <div class=\"placeholder-icon-wrap\">\n              <i class=\"el-icon-picture-outline\" style=\"font-size: 60px;\"></i>\n            </div>\n            <h3>等待建立活動</h3>\n            <p>請先完成左側活動基本資訊，即可開啟雲端 AI 上傳通道</p>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ActivityManage',\n  props: ['selectedActivity'], \n  data() {\n    return {\n      submitting: false,\n      isNewActivity: !this.selectedActivity?.id,\n      activityForm: {\n        id: this.selectedActivity?.id || null,\n        title: this.selectedActivity?.title || '',\n        activity_at: this.selectedActivity?.activity_at || '',\n        location: this.selectedActivity?.location || '',\n        rfid: this.selectedActivity?.rfid || '', \n        photoCount: this.selectedActivity?.photoCount || 0\n      },\n      analyzedCount: this.selectedActivity?.photoCount || 0,\n      customColors: [\n        { color: '#f56c6c', percentage: 20 },\n        { color: '#67c23a', percentage: 100 }\n      ]\n    };\n  },\n  computed: {\n    progressPercentage() {\n      if (this.activityForm.photoCount === 0) return 0;\n      return Math.floor((this.analyzedCount / this.activityForm.photoCount) * 100);\n    },\n    getUploadUrl() {\n      const baseUrl = this.$http.defaults.baseURL;\n      // 自動對齊 API 端點路徑\n      return `${baseUrl}/Activity/${this.activityForm.id}/UploadBatch`;\n    },\n    uploadHeaders() {\n      return {\n        'Authorization': `Bearer ${localStorage.getItem('userToken')}`\n      };\n    }\n  },\n  methods: {\n    async handleCreateActivity() {\n      if (!this.activityForm.title) {\n        this.$message.warning('請輸入活動名稱');\n        return;\n      }\n      this.submitting = true;\n      try {\n        // 使用相對路徑與 JSON 格式，避開 415 錯誤\n        const res = await this.$http.post('/Activity', this.activityForm);\n        \n        this.activityForm.id = res.data.id;\n        this.isNewActivity = false;\n        this.$message.success('活動檔案已建立，且已綁定 RFID');\n      } catch (err) {\n        console.error('Create Activity Error:', err.response);\n        this.$message.error('活動建立失敗，請檢查欄位格式或連線狀態');\n      } finally {\n        this.submitting = false;\n      }\n    },\n    handleUploadSuccess() {\n      this.$message.success('照片上傳成功');\n      this.activityForm.photoCount++;\n      // 模擬 AI 進度更新\n      setTimeout(() => { this.analyzedCount++; }, 1500);\n    },\n    handleUploadError(err) {\n      console.error('Upload Error:', err);\n      this.$message.error('上傳失敗，請確認檔案大小或伺服器狀態');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.form-tip { font-size: 12px; color: #909399; margin-top: 4px; line-height: 1.4; }\n.activity-manage-container { padding: 15px; background-color: #fcfaf8; min-height: 80vh; }\n.header-section { display: flex; align-items: center; margin-bottom: 25px; }\n.header-section h2 { margin: 0; color: #5d5146; font-size: 22px; }\n.info-card { border-radius: 12px; border: 1px solid #e9e0d6; }\n.info-card-header { font-weight: bold; color: #5d5146; }\n.progress-section { margin-top: 25px; padding: 15px; background: #fff; border-radius: 8px; border: 1px solid #ebeef5; }\n.progress-text { font-size: 14px; color: #606266; margin-bottom: 12px; font-weight: 500; }\n.upload-card { border-radius: 12px; min-height: 500px; }\n.upload-header { display: flex; justify-content: space-between; align-items: center; font-weight: bold; }\n.disabled-overlay { opacity: 0.6; pointer-events: none; background-color: #f9f9f9; }\n.upload-placeholder { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 350px; color: #909399; }\n.placeholder-icon-wrap { width: 120px; height: 120px; background: #f0f2f5; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; color: #c0c4cc; }\n.button-group { margin-top: 18px; display: flex; flex-direction: column; gap: 12px; }\n@keyframes pulse-green {\n  0% { box-shadow: 0 0 0 0 rgba(103, 194, 58, 0.6); transform: scale(1); }\n  50% { box-shadow: 0 0 0 10px rgba(103, 194, 58, 0); transform: scale(1.02); }\n  100% { box-shadow: 0 0 0 0 rgba(103, 194, 58, 0); transform: scale(1); }\n}\n.pulse-btn { width: 100%; font-weight: bold; font-size: 16px; animation: pulse-green 2.5s infinite; margin-left: 0 !important; }\n.ai-guide-box { margin-top: 15px; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityManage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ActivityManage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ActivityManage.vue?vue&type=template&id=c9b80d26&scoped=true\"\nimport script from \"./ActivityManage.vue?vue&type=script&lang=js\"\nexport * from \"./ActivityManage.vue?vue&type=script&lang=js\"\nimport style0 from \"./ActivityManage.vue?vue&type=style&index=0&id=c9b80d26&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9b80d26\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ai-recognition-container\"},[_c('div',{staticClass:\"header-section\"},[_c('el-page-header',{attrs:{\"content\":\"AI 辨識結果預覽\"},on:{\"back\":function($event){return _vm.$emit('go-back')}}}),(_vm.isDemoMode)?_c('el-tag',{staticClass:\"demo-badge\",attrs:{\"type\":\"warning\",\"effect\":\"dark\"}},[_vm._v(\"示範模式 (使用 Mock 資料)\")]):_vm._e()],1),_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"main-card\"},[(_vm.processedPhotos.length > 0)?_c('div',{staticClass:\"photo-grid\"},_vm._l((_vm.processedPhotos),function(photo){return _c('div',{key:photo.photo_id,staticClass:\"photo-item\"},[_c('div',{staticClass:\"image-wrapper\"},[_c('img',{ref:'img-' + photo.photo_id,refInFor:true,staticClass:\"recognition-image\",attrs:{\"src\":photo.photo_url},on:{\"load\":function($event){return _vm.drawBoxes(photo.photo_id)}}}),_vm._l((photo.detections),function(det,index){return _c('div',{key:index,staticClass:\"face-box\",style:(det.boxStyle),on:{\"click\":function($event){return _vm.openCorrectionDialog(det)}}},[_c('span',{staticClass:\"name-label\",class:{ 'is-edited': det.isEdited }},[_vm._v(\" \"+_vm._s(det.resident_name)+\" (\"+_vm._s((det.confidence * 100).toFixed(0))+\"%) \")])])})],2)])}),0):(!_vm.loading)?_c('div',{staticClass:\"empty-state\"},[_c('el-empty',{attrs:{\"description\":_vm.emptyText}})],1):_vm._e(),_c('div',{staticClass:\"action-bar\"},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"large\",\"icon\":\"el-icon-check\",\"loading\":_vm.submitting},on:{\"click\":_vm.handleConfirm}},[_vm._v(\" 確認所有辨識結果並正式存檔 \")])],1)]),_c('el-dialog',{attrs:{\"title\":\"修正辨識結果\",\"visible\":_vm.dialogVisible,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{attrs:{\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"正確長者\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"請選擇長者\",\"clearable\":\"\"},model:{value:(_vm.selectedResidentId),callback:function ($$v) {_vm.selectedResidentId=$$v},expression:\"selectedResidentId\"}},[_c('el-option',{attrs:{\"label\":\"❌ 非住民 (不屬於任何人/背景)\",\"value\":\"none\"}}),(_vm.allResidents.length > 0)?_c('el-divider'):_vm._e(),_vm._l((_vm.allResidents),function(r){return _c('el-option',{key:r.id,attrs:{\"label\":r.name,\"value\":r.id}})})],2)],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveTempCorrection}},[_vm._v(\"暫存修改\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ai-recognition-container\">\n    <div class=\"header-section\">\n      <el-page-header @back=\"$emit('go-back')\" content=\"AI 辨識結果預覽\"></el-page-header>\n      <el-tag v-if=\"isDemoMode\" type=\"warning\" effect=\"dark\" class=\"demo-badge\">示範模式 (使用 Mock 資料)</el-tag>\n    </div>\n\n    <el-card v-loading=\"loading\" class=\"main-card\">\n      <div v-if=\"processedPhotos.length > 0\" class=\"photo-grid\">\n        <div v-for=\"photo in processedPhotos\" :key=\"photo.photo_id\" class=\"photo-item\">\n          <div class=\"image-wrapper\">\n            <img \n              :ref=\"'img-' + photo.photo_id\"\n              :src=\"photo.photo_url\"\n              @load=\"drawBoxes(photo.photo_id)\" \n              class=\"recognition-image\"\n            >\n            \n            <div \n              v-for=\"(det, index) in photo.detections\" \n              :key=\"index\"\n              class=\"face-box\"\n              :style=\"det.boxStyle\"\n              @click=\"openCorrectionDialog(det)\"\n            >\n              <span class=\"name-label\" :class=\"{ 'is-edited': det.isEdited }\">\n                {{ det.resident_name }} ({{ (det.confidence * 100).toFixed(0) }}%)\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div v-else-if=\"!loading\" class=\"empty-state\">\n        <el-empty :description=\"emptyText\"></el-empty>\n      </div>\n\n      <div class=\"action-bar\">\n        <el-button type=\"success\" size=\"large\" icon=\"el-icon-check\" :loading=\"submitting\" @click=\"handleConfirm\">\n          確認所有辨識結果並正式存檔\n        </el-button>\n      </div>\n    </el-card>\n\n    <el-dialog title=\"修正辨識結果\" :visible.sync=\"dialogVisible\" width=\"35%\">\n      <el-form label-width=\"100px\">\n        <el-form-item label=\"正確長者\">\n          <el-select v-model=\"selectedResidentId\" filterable placeholder=\"請選擇長者\" clearable>\n            <el-option label=\"❌ 非住民 (不屬於任何人/背景)\" value=\"none\"></el-option>\n            <el-divider v-if=\"allResidents.length > 0\"></el-divider>\n            <el-option v-for=\"r in allResidents\" :key=\"r.id\" :label=\"r.name\" :value=\"r.id\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveTempCorrection\">暫存修改</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AIRecognitionView',\n  props: ['activityId'],\n  data() {\n    return {\n      loading: false,\n      submitting: false,\n      isDemoMode: false,\n      rawResults: [],\n      processedPhotos: [],\n      dialogVisible: false,\n      allResidents: [],\n      currentDet: {},\n      selectedResidentId: '',\n      emptyText: '目前該活動尚未有辨識資料'\n    };\n  },\n  mounted() {\n    this.fetchAIResults();\n    window.addEventListener('resize', this.refreshBoxes);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.refreshBoxes);\n  },\n  methods: {\n    async fetchAIResults() {\n      if (!this.activityId || this.activityId === 'null') {\n        this.emptyText = '活動 ID 缺失，無法辨識';\n        this.loadMockResults();\n        return;\n      }\n\n      this.loading = true;\n      try {\n        const response = await this.$http.post(`/Activity/${this.activityId}/recognize`, {}, {\n          timeout: 120000 \n        });\n        \n        if (response.data && response.data.length > 0) {\n          this.rawResults = response.data;\n        } else {\n          this.loadMockResults();\n        }\n      } catch (err) {\n        console.warn('API 獲取失敗', err);\n        this.loadMockResults();\n      } finally {\n        this.processData();\n        this.loading = false;\n      }\n    },\n\n    loadMockResults() {\n      this.isDemoMode = true;\n      const mockImg = \"https://ee16389-alt.github.io/ccu-rfid-frontend/slideshow/activity2.png\";\n      this.rawResults = [{\n        \"id\": \"3\", \"name\": \"江小信 (範例)\", \"confidence\": 0.95,\n        \"photos\": [{ \"photo_id\": 999, \"photo_url\": mockImg, \"bounding_box\": [696, 139, 882, 325] }]\n      }];\n    },\n\n    processData() {\n      const map = {};\n      this.rawResults.forEach(person => {\n        // 對接後端新欄位\n        const resId = person.id; \n        const resName = person.name;\n\n        person.photos.forEach(pic => {\n          if (!map[pic.photo_id]) {\n            map[pic.photo_id] = { photo_id: pic.photo_id, photo_url: pic.photo_url, detections: [] };\n          }\n          map[pic.photo_id].detections.push({\n            resident_id: resId,\n            resident_name: resName,\n            confidence: person.confidence || 0,\n            rawBox: pic.bounding_box, // 後端格式 [top, left, bottom, right]\n            boxStyle: {},\n            isEdited: false\n          });\n        });\n      });\n      const sorted = Object.values(map).sort((a, b) => b.photo_id - a.photo_id);\n      this.processedPhotos = sorted.length > 0 ? [sorted[0]] : [];\n    },\n\n    drawBoxes(photoId) {\n      this.$nextTick(() => {\n        const img = this.$refs['img-' + photoId][0] || this.$refs['img-' + photoId];\n        const photo = this.processedPhotos.find(p => p.photo_id === photoId);\n        if (!img || !photo || img.naturalWidth === 0) return;\n\n        // 取得圖片原始尺寸與當前顯示尺寸\n        const { naturalWidth: nw, naturalHeight: nh, clientWidth: cw, clientHeight: ch } = img;\n        const rawRatio = nw / nh;\n        const displayRatio = cw / ch;\n\n        let scale, ox = 0, oy = 0;\n\n        // 修正 2：對接正確的位移邏輯\n        if (displayRatio > rawRatio) {\n          // 容器寬度大於圖片比例 → 上下貼齊，左右留白 (偏移 ox)\n          scale = ch / nh;\n          ox = (cw - nw * scale) / 2;\n        } else {\n          // 容器高度大於圖片比例 → 左右貼齊，上下留白 (偏移 oy)\n          scale = cw / nw;\n          oy = (ch - nh * scale) / 2;\n        }\n\n        photo.detections.forEach(d => {\n          // 修正 3：對接正確的 rawBox 順序 [Top, Left, Bottom, Right]\n          const [top, left, bottom, right] = d.rawBox;\n          \n          d.boxStyle = {\n            top: (top * scale + oy) + 'px',\n            left: (left * scale + ox) + 'px',\n            width: ((right - left) * scale) + 'px',\n            height: ((bottom - top) * scale) + 'px'\n          };\n        });\n        this.$forceUpdate();\n      });\n    },\n\n    refreshBoxes() {\n      this.processedPhotos.forEach(p => this.drawBoxes(p.photo_id));\n    },\n\n    async openCorrectionDialog(det) {\n      this.currentDet = det;\n      this.selectedResidentId = det.resident_id || 'none';\n      if (this.allResidents.length === 0) await this.fetchAllResidents();\n      this.dialogVisible = true;\n    },\n\n    async fetchAllResidents() {\n      try {\n        const res = await this.$http.get('/Resident');\n        this.allResidents = res.data;\n      } catch (err) {\n        this.$message.error('無法讀取長者清單');\n      }\n    },\n\n    saveTempCorrection() {\n      if (this.selectedResidentId === 'none' || !this.selectedResidentId) {\n        this.currentDet.resident_id = null;\n        this.currentDet.resident_name = \"未辨識/非住民\";\n        this.currentDet.isEdited = true;\n        this.$message({ message: '已標記為非住民', type: 'warning' });\n      } else {\n        const selected = this.allResidents.find(r => r.id === this.selectedResidentId);\n        if (selected) {\n          this.currentDet.resident_id = selected.id;\n          this.currentDet.resident_name = selected.name;\n          this.currentDet.isEdited = true;\n          this.$message({ message: '修改已暫存', type: 'info' });\n        }\n      }\n      this.dialogVisible = false;\n    },\n\n    async handleConfirm() {\n      try {\n        await this.$confirm('確認所有辨識結果正確嗎？', '存檔確認', { type: 'success' });\n        this.submitting = true;\n        \n        const payload = [];\n        this.processedPhotos.forEach(photo => {\n          photo.detections.forEach(det => {\n            // 修正 4：傳送符合後端要求的 JSON 陣列格式\n            if (det.resident_id) {\n              payload.push({ \n                photo_id: photo.photo_id, \n                resident_id: det.resident_id \n              });\n            }\n          });\n        });\n\n        await this.$http.post(`/Activity/${this.activityId}/recognize/confirm`, payload);\n        \n        this.$message.success('辨識紀錄已成功存檔！');\n        this.$emit('go-back');\n      } catch (error) {\n        if (error !== 'cancel') this.$message.error('儲存失敗');\n      } finally {\n        this.submitting = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.photo-grid { display: grid; grid-template-columns: 1fr; gap: 20px; margin-top: 20px; }\n.image-wrapper { \n  position: relative; \n  display: block; \n  width: 100%; \n  max-width: 800px; \n  margin: 0 auto; \n  border-radius: 8px; \n  overflow: hidden; \n  background: #000;\n}\n.recognition-image { \n  width: 100%; \n  display: block; \n  object-fit: contain; /* 改為 contain 配合 ox/oy 偏移計算最為精準 */\n  aspect-ratio: 16 / 9; \n}\n.face-box { \n  position: absolute; \n  border: 3px solid #67C23A; \n  background-color: rgba(103, 194, 58, 0.1); \n  cursor: pointer; \n  z-index: 10; \n  box-sizing: border-box;\n}\n.face-box:hover { border-color: #E6A23C; background-color: rgba(230, 162, 60, 0.2); }\n.name-label { \n  position: absolute; \n  top: -30px; \n  left: -3px; \n  background: #67C23A; \n  color: white; \n  padding: 2px 8px; \n  font-size: 12px; \n  border-radius: 4px; \n  white-space: nowrap;\n}\n.name-label.is-edited { background: #409EFF; }\n.action-bar { margin-top: 30px; text-align: center; }\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AIRecognitionView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AIRecognitionView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AIRecognitionView.vue?vue&type=template&id=cd594534&scoped=true\"\nimport script from \"./AIRecognitionView.vue?vue&type=script&lang=js\"\nexport * from \"./AIRecognitionView.vue?vue&type=script&lang=js\"\nimport style0 from \"./AIRecognitionView.vue?vue&type=style&index=0&id=cd594534&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd594534\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <div v-if=\"debugMode\" class=\"side-debug-trigger\" @click=\"drawerVisible = true\">\n      <i class=\"el-icon-setting\"></i>\n      <span>快速切換</span>\n    </div>\n\n    <el-drawer\n      title=\"開發者控制台\"\n      :visible.sync=\"drawerVisible\"\n      direction=\"ltr\"\n      size=\"220px\"\n      custom-class=\"debug-drawer\"\n    >\n      <div class=\"drawer-content\">\n        <el-divider content-position=\"left\">頁面切換</el-divider>\n        <div class=\"drawer-buttons\">\n          <el-button @click=\"switchView('RFIDLanding')\" size=\"small\" type=\"success\" plain icon=\"el-icon-s-home\">長者端 (首頁)</el-button>\n          <el-button @click=\"switchView('Login')\" size=\"small\" type=\"primary\" plain icon=\"el-icon-s-custom\">行政管理端</el-button>\n          <el-button @click=\"debugMode = false\" size=\"small\" type=\"info\" plain icon=\"el-icon-view\">徹底隱藏工具</el-button>\n        </div>\n        \n        <el-divider content-position=\"left\">系統狀態</el-divider>\n        <ul class=\"status-list\">\n          <li>目前視圖: {{ currentView }}</li>\n          <li>活動 ID: {{ selectedActivityId || '無' }}</li>\n        </ul>\n      </div>\n    </el-drawer>\n\n    <div class=\"container\">\n      <RFIDLanding \n        v-if=\"currentView === 'RFIDLanding'\" \n        @scan-success=\"onScanSuccess\" \n      />\n\n      <ActivityMenu \n        v-else-if=\"currentView === 'ActivityMenu'\" \n        :rfid=\"selectedRfid\"\n        @select-activity=\"onSelectActivity\"\n        @go-back=\"currentView = 'RFIDLanding'\"\n      />\n\n      <Slideshow \n        v-else-if=\"currentView === 'Slideshow'\" \n        :rfid=\"selectedRfid\" \n        :activityId=\"selectedActivityId\"\n        @go-back=\"currentView = 'ActivityMenu'\"\n      />\n\n      <Login \n        v-else-if=\"currentView === 'Login'\" \n        @login-success=\"currentView = 'ActivityList'\" \n      />\n\n      <ActivityList \n        v-else-if=\"currentView === 'ActivityList'\" \n        @manage-activity=\"onManageActivity\"\n        @add-activity=\"onAddActivity\" \n      />\n\n      <ActivityManage \n        v-else-if=\"currentView === 'ActivityManage'\" \n        :selectedActivity=\"activeActivityObject\"\n        @go-back=\"currentView = 'ActivityList'\"\n        @go-screening=\"currentView = 'AIScreening'\" \n        @go-recognition=\"currentView = 'AIRecognition'\"\n      />\n\n      <AIRecognitionView \n        v-else-if=\"currentView === 'AIRecognition'\" \n        :activityId=\"selectedActivityId\"\n        @go-back=\"currentView = 'ActivityManage'\"\n      />\n\n      <AIScreening \n        v-else-if=\"currentView === 'AIScreening'\" \n        :activityId=\"selectedActivityId\"\n        @go-back=\"currentView = 'ActivityManage'\"\n      />\n\n      <ElderList \n        v-else-if=\"currentView === 'ElderList'\" \n        @edit-elder=\"onEditElder\"\n        @add-elder=\"onAddElder\"\n      />\n\n      <ElderEdit \n        v-else-if=\"currentView === 'ElderEdit'\" \n        :elderId=\"selectedResidentId\"\n        @go-back=\"currentView = 'ElderList'\"\n      />\n      \n      <p v-else style=\"text-align: center; margin-top: 50px;\">\n        <i class=\"el-icon-loading\"></i> 系統正在準備中...\n      </p>\n    </div>\n\n    <div v-if=\"isAdminView\" class=\"admin-nav\">\n      <el-button @click=\"currentView = 'ActivityList'\" icon=\"el-icon-s-order\">活動列表</el-button>\n      <el-button @click=\"currentView = 'ElderList'\" icon=\"el-icon-user-solid\">長者管理</el-button>\n      <el-button @click=\"logout\" type=\"text\" style=\"color: #F56C6C;\">安全登出</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport RFIDLanding from './components/RFIDLanding.vue';\nimport ActivityMenu from './components/ActivityMenu.vue';\nimport Slideshow from './components/Slideshow.vue';\nimport Login from './components/Login.vue';\nimport ActivityList from './components/ActivityList.vue';\nimport ElderList from './components/ElderList.vue';\nimport ElderEdit from './components/ElderEdit.vue';\nimport AIScreening from './components/AIScreening.vue';\nimport ActivityManage from './components/ActivityManage.vue';\nimport AIRecognitionView from './components/AIRecognitionView.vue';\n\nexport default {\n  name: 'App',\n  components: {\n    RFIDLanding, ActivityMenu, Slideshow, Login,\n    ActivityList, ElderList, ElderEdit, AIScreening, ActivityManage,\n    AIRecognitionView\n  },\n  data() {\n    return {\n      currentView: 'RFIDLanding',\n      debugMode: true,\n      drawerVisible: false, // 修正點：控制側邊欄開關\n      selectedRfid: null, \n      selectedResidentId: null,\n      selectedActivityId: null,\n      activeActivityObject: null \n    };\n  },\n  computed: {\n    isAdminView() {\n      const adminPages = ['ActivityList', 'ElderList', 'ActivityManage', 'ElderEdit', 'AIScreening', 'AIRecognition'];\n      return adminPages.includes(this.currentView);\n    }\n  },\n  methods: {\n    switchView(view) {\n      this.currentView = view;\n      this.drawerVisible = false; // 切換後自動收起\n    },\n    onScanSuccess(payload) {\n      this.selectedRfid = payload.rfid;\n      if (payload.match && payload.match.type === 'activity') {\n        this.selectedActivityId = payload.match.id;\n        this.currentView = 'Slideshow';\n      } else {\n        this.currentView = 'ActivityMenu';\n      }\n    },\n    onSelectActivity(payload) {\n      this.selectedActivityId = payload.activityId;\n      this.selectedRfid = payload.rfid; \n      this.currentView = 'Slideshow';\n    },\n    onManageActivity(id) {\n      this.selectedActivityId = id;\n      this.activeActivityObject = { id: id }; \n      this.currentView = 'ActivityManage';\n    },\n    onAddActivity() {\n      this.selectedActivityId = null;\n      this.activeActivityObject = null; \n      this.currentView = 'ActivityManage';\n    },\n    onEditElder(id) {\n      this.selectedResidentId = id;\n      this.currentView = 'ElderEdit';\n    },\n    onAddElder() {\n      this.selectedResidentId = null;\n      this.currentView = 'ElderEdit';\n    },\n    logout() {\n      localStorage.removeItem('userToken');\n      this.currentView = 'Login';\n      this.$message.info('已安全登出');\n    }\n  }\n};\n</script>\n\n<style>\nbody { margin: 0; font-family: \"Helvetica Neue\",Helvetica,\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"Arial\",sans-serif; background-color: #f5f7fa; }\n\n/* 修正點 3：側邊觸發按鈕樣式（垂直貼在左邊） */\n.side-debug-trigger {\n  position: fixed;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  background: #303133;\n  color: white;\n  padding: 12px 6px;\n  border-radius: 0 10px 10px 0;\n  cursor: pointer;\n  z-index: 2500;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  box-shadow: 2px 0 10px rgba(0,0,0,0.2);\n  opacity: 0.6;\n  transition: all 0.3s;\n}\n.side-debug-trigger:hover {\n  opacity: 1;\n  padding-left: 10px;\n}\n.side-debug-trigger i { margin-bottom: 5px; font-size: 18px; }\n.side-debug-trigger span { writing-mode: vertical-lr; letter-spacing: 2px; }\n\n.drawer-content { padding: 0 20px; }\n.drawer-buttons .el-button { width: 100%; margin-left: 0 !important; margin-bottom: 12px; }\n.status-list { list-style: none; padding: 0; font-size: 13px; color: #606266; line-height: 2; }\n\n.admin-nav {\n  position: fixed; bottom: 0; width: 100%; background: white;\n  box-shadow: 0 -2px 10px rgba(0,0,0,0.05); display: flex;\n  justify-content: center; padding: 10px; z-index: 1000;\n}\n.container { min-height: 100vh; padding-bottom: 80px; }\n</style>","import mod from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=281b2604\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=281b2604&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport axios from 'axios';\nimport VueRouter from 'vue-router';\n\n// 導入核心視圖組件\nimport AIRecognitionView from './components/AIRecognitionView.vue';\n\nVue.config.productionTip = false\nVue.use(ElementUI);\nVue.use(VueRouter);\n\n// --- 1. 設定路由表 ---\n// 使用 hash 模式以確保在 GitHub Pages 上重新整理不會出現 404\nconst routes = [\n  {\n    path: '/activity/:activityId/ai',\n    name: 'AIRecognition',\n    component: AIRecognitionView,\n    props: true \n  }\n];\n\nconst router = new VueRouter({\n  mode: 'hash', \n  base: process.env.BASE_URL, \n  routes\n});\n\n// --- 2. Axios 實例配置 ---\nconst instance = axios.create({\n  // 將 /manager-api 直接加入 baseURL，避免組件內路徑重複\n  baseURL: 'https://ccu-rfid-project-arhddfhugverf8dr.japanwest-01.azurewebsites.net/manager-api',\n  // 延長逾時時間至 30 秒，應對 Azure 冷啟動延遲\n  timeout: 30000, \n  withCredentials: false \n});\n\n// --- 3. 請求攔截器：自動帶入 Authorization Token ---\ninstance.interceptors.request.use(\n  config => {\n    const token = localStorage.getItem('userToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => Promise.reject(error)\n);\n\n// --- 4. 回應攔截器：處理連線逾時與身份失效 ---\ninstance.interceptors.response.use(\n  response => response,\n  error => {\n    // 處理請求逾時提示\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\n      ElementUI.Message.error('伺服器回應過慢，請稍後再試（Azure 啟動中）');\n    }\n    // 處理 401 Token 過期\n    else if (error.response && error.response.status === 401) {\n      ElementUI.Message.warning('登入已逾時，請重新登入');\n      localStorage.removeItem('userToken');\n      // 如果有 App.vue 的事件控制，可在此觸發跳轉\n    }\n    // 處理 404 路徑錯誤提示\n    else if (error.response && error.response.status === 404) {\n      console.error('API 路徑錯誤，請檢查是否重複拼接了 manager-api');\n    }\n    return Promise.reject(error);\n  }\n);\n\n// --- 5. 全域掛載 ---\n// 讓組件內可以使用 this.$http 調用 API\nVue.prototype.$http = instance;\n\nnew Vue({\n  router, \n  render: h => h(App),\n}).$mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkccu_rfid_frontend\"] = self[\"webpackChunkccu_rfid_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6104); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticClass","on","$event","drawerVisible","_v","_e","switchView","debugMode","_s","currentView","selectedActivityId","onScanSuccess","selectedRfid","onSelectActivity","onManageActivity","onAddActivity","activeActivityObject","onEditElder","onAddElder","selectedResidentId","staticStyle","logout","staticRenderFns","class","loading","countdown","handleStart","_m","directives","name","rawName","value","expression","ref","domProps","type","indexOf","_k","keyCode","key","preventDefault","onScanComplete","apply","arguments","target","composing","scanBuffer","data","scanTimer","countdownTimer","methods","$nextTick","$refs","rfidInput","focus","setInterval","setTimeout","enterDemoMode","clearTimeout","clearInterval","cardUid","trim","processRfid","response","$http","get","match","length","$notify","title","message","position","$emit","rfid","activities","activitys","$message","warning","error","console","warn","id","beforeDestroy","component","residentName","handleBack","_l","activity","nativeOn","handleSelectActivity","cover","getDefaultCover","slot","date","photoCount","activityList","props","mounted","fetchDataByRfid","loadMockActivities","matchInfo","map","item","activity_at","photo_count","activityId","activityName","photoList","prevPhoto","currentPhotoIndex","url","nextPhoto","isPlaying","togglePlay","timer","fetchPhotos","startTimer","stopTimer","res","params","photos","p","photo_id","image_url","photo_url","taken_at","activity_title","loadMockPhotos","err","baseUrl","loginForm","model","callback","$$v","$set","handleLogin","account","password","post","access_token","localStorage","setItem","duration","status","scopedSlots","_u","fn","scope","row","fetchActivities","loadMockData","location","elderList","avatar","getDefaultAvatar","charAt","fetchElders","azureBase","finalAvatar","avatarField","avatar_url","timestamp","Date","getTime","startsWith","includes","cleanPath","substring","age","setMockData","isEdit","elderForm","handleAvatarChange","imageUrl","submitting","submitForm","remark","selectedFile","elderId","fetchElderData","file","raw","URL","createObjectURL","residentPayload","String","Number","residentUrl","residentMethod","method","targetId","avatarFormData","FormData","append","headers","success","group","resident_id","resident_name","photo","openEditDialog","aiGroups","handleFinalSave","editVisible","drawEditBox","editingPhoto","style","targetResidentId","opt","confirmPhotoCorrection","residentOptions","editingGroup","boxStyle","fetchScreeningResults","timeout","replace","g","loadMockResults","newGroup","find","filter","push","payload","forEach","img","previewImg","bounding_box","naturalWidth","box","sx","clientWidth","sy","clientHeight","naturalHeight","top","left","width","height","isNewActivity","activityForm","handleCreateActivity","analyzedCount","progressPercentage","customColors","getUploadUrl","uploadHeaders","handleUploadSuccess","handleUploadError","selectedActivity","color","percentage","computed","Math","floor","defaults","baseURL","getItem","processedPhotos","refInFor","drawBoxes","det","index","openCorrectionDialog","isEdited","confidence","toFixed","emptyText","handleConfirm","dialogVisible","allResidents","r","saveTempCorrection","isDemoMode","rawResults","currentDet","fetchAIResults","window","addEventListener","refreshBoxes","removeEventListener","processData","mockImg","person","resId","resName","pic","detections","rawBox","sorted","Object","values","sort","a","b","photoId","nw","nh","cw","ch","rawRatio","displayRatio","scale","ox","oy","d","bottom","right","$forceUpdate","fetchAllResidents","selected","$confirm","components","RFIDLanding","ActivityList","AIRecognitionView","isAdminView","adminPages","view","removeItem","info","config","productionTip","use","routes","path","router","mode","base","instance","axios","create","withCredentials","interceptors","request","token","Authorization","Promise","reject","code","prototype","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","m","amdO","deferred","O","result","chunkIds","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","e","obj","prop","hasOwnProperty","call","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}